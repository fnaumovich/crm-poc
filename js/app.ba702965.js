(function(t){function e(e){for(var r,s,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={app:0},o=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/crm-poc/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0025":function(t,e,n){},"003d":function(t,e,n){"use strict";n("88b9")},"03cc":function(t,e,n){"use strict";var r=n("c3f1"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"043d":function(t,e,n){t.exports={"text-block":"IntegrationInstagram_text-block_2prYb",text:"IntegrationInstagram_text_zEdvK",row:"IntegrationInstagram_row_3fyrq"}},"0459":function(t,e,n){"use strict";var r=n("ab09"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"0460":function(t,e,n){},"05b7":function(t,e,n){t.exports={filters:"Shops_filters_3iPTc"}},"07ae":function(t,e,n){},"08d0":function(t,e,n){t.exports={"users-wrapper":"UserAddTt_users-wrapper_1JLf_",filters:"UserAddTt_filters_1mFUY","credit-product-add-to-table":"UserAddTt_credit-product-add-to-table_3BDrn"}},"0b6a":function(t,e,n){"use strict";n("aa55")},"0b86":function(t,e,n){t.exports={loader:"OtpLoading_loader_2nkqj",spin:"OtpLoading_spin_1ha9e"}},"0c4a":function(t,e,n){"use strict";n("9061")},"0cce":function(t,e,n){"use strict";var r=n("5f36"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"0d2e":function(t,e,n){"use strict";n("33d3")},"0d3f":function(t,e,n){"use strict";var r=n("afb1"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"0d4d":function(t,e,n){t.exports={root:"OtpCounter_root_1wim-"}},"0d74":function(t,e,n){"use strict";var r=n("344b"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"0f93":function(t,e,n){},"0fb9":function(t,e,n){"use strict";n("251b")},1:function(t,e){},1021:function(t,e,n){t.exports={input:"CreditProductConnectedTo_input_1gMkg"}},1034:function(t,e,n){"use strict";var r=n("950b"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"111c":function(t,e,n){t.exports={root:"OtpSwitcher_root_1o9x2",right:"OtpSwitcher_right_1m2GO",text:"OtpSwitcher_text_2VQhr",left:"OtpSwitcher_left_3tCi9",control:"OtpSwitcher_control_4T-l0",checked:"OtpSwitcher_checked_3v75R",slider:"OtpSwitcher_slider_2iInH",icon:"OtpSwitcher_icon_6VDXF","theme-primary":"OtpSwitcher_theme-primary_3m-Zy",input:"OtpSwitcher_input_EOTb_"}},1245:function(t,e,n){},"13e0":function(t,e,n){"use strict";n("2118")},1486:function(t,e,n){t.exports={root:"ConnectCreditProductsTable_root_1SvoC","search-row":"ConnectCreditProductsTable_search-row_k3kv8",search:"ConnectCreditProductsTable_search_3pqWL"}},"14c4":function(t,e,n){"use strict";n("da13")},1513:function(t,e,n){t.exports={root:"CopyableElement_root_3zos-",message:"CopyableElement_message_Nw53g"}},1571:function(t,e,n){},1579:function(t,e,n){t.exports={root:"AdditionalWrapper_root_23bTH"}},1637:function(t,e,n){"use strict";var r=n("1021"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"169e":function(t,e,n){"use strict";var r=n("9dce"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"16bf":function(t,e,n){"use strict";var r=n("d0a7"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},1883:function(t,e,n){t.exports=n.p+"img/passportRegistration.9ac0de72.png"},1901:function(t,e,n){},"199b":function(t,e,n){"use strict";var r=n("7844"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"19dc":function(t,e,n){},"1aa7":function(t,e,n){"use strict";n("4c91")},"1b5b":function(t,e,n){"use strict";var r=n("bec9"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"1cde":function(t,e,n){"use strict";var r=n("6e5d"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"1ce6":function(t,e,n){"use strict";n("19dc")},"1dcb":function(t,e,n){t.exports={error:"CancelRequestModal_error_8r1at",loading:"CancelRequestModal_loading_2Vz9N"}},"1e37":function(t,e,n){t.exports=n.p+"img/phone.4437fb96.png"},"1ef3":function(t,e,n){"use strict";n("99b1")},"1f49":function(t,e,n){t.exports={root:"SearchUser_root_1CjdO",text:"SearchUser_text_2sDqg","buttons-panel":"SearchUser_buttons-panel_3RLoe"}},"20ee":function(t,e,n){"use strict";var r=n("d852"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},2118:function(t,e,n){},"22bd":function(t,e,n){},2311:function(t,e,n){t.exports={root:"Params_root_15u01",list:"Params_list_3R00l"}},"23ea":function(t,e,n){"use strict";n("ada9")},"24d0":function(t,e,n){},"251b":function(t,e,n){},2611:function(t,e,n){"use strict";var r=n("1486"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"26f6":function(t,e,n){},"27de":function(t,e,n){t.exports={root:"RequestInfo_root_1gj1X",wrapper:"RequestInfo_wrapper_zyBPL",param:"RequestInfo_param_1-OeD",label:"RequestInfo_label_1FjjO",value:"RequestInfo_value_1KqWJ",link:"RequestInfo_link_QADHX"}},"28cb":function(t,e,n){},"298b":function(t,e,n){"use strict";n("500c")},"29c3":function(t,e,n){t.exports={root:"Users_root_eJLpR",filters:"Users_filters_1xHw6","crm-input-new":"Users_crm-input-new_2lL25"}},"2a9a":function(t,e,n){t.exports=n.p+"img/double-chevron-right.967085a4.svg"},"2aa4":function(t,e,n){},"2ad7":function(t,e,n){t.exports=n.p+"img/cross.a4bf158a.svg"},"2cdf":function(t,e,n){"use strict";n("9d22")},"2dfb":function(t,e,n){t.exports={root:"StepOne_root_2ilxM",goods:"StepOne_goods_2MXJ7"}},"2f9d":function(t,e,n){t.exports={"users-wrapper":"UserAddTo_users-wrapper_3c1jl",filters:"UserAddTo_filters_1zGrP","credit-product-add-to-table":"UserAddTo_credit-product-add-to-table_eWGkj"}},"30db":function(t,e,n){"use strict";n("0025")},"33d3":function(t,e,n){},"344b":function(t,e,n){t.exports={root:"PageTitle_root_14IL5"}},3661:function(t,e,n){t.exports={root:"ProModeIcon_root_3OzdP"}},3686:function(t,e,n){},"36f8":function(t,e,n){"use strict";n("bcd9")},"383e":function(t,e,n){},"3ab4":function(t,e,n){"use strict";var r=n("67e8"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"3afe":function(t,e,n){t.exports={root:"ProductsTable_root_LWaN8",filters:"ProductsTable_filters_gzpTj",input:"ProductsTable_input_1cTb4"}},"3bb5":function(t,e,n){"use strict";var r=n("0b86"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"3be0":function(t,e,n){t.exports={root:"GoodsUpload_root_2e8iE","text-1":"GoodsUpload_text-1_2gKzC","rules-title":"GoodsUpload_rules-title_3t3mS",rules:"GoodsUpload_rules_6PdWM","upload-block":"GoodsUpload_upload-block_2c6Ss",row:"GoodsUpload_row_ezPIQ","upload-text":"GoodsUpload_upload-text_3qjhy"}},"3c40":function(t,e,n){},"3df7":function(t,e,n){t.exports={root:"EditLink_root_1OodN","text-holder":"EditLink_text-holder_1aZRB",icon:"EditLink_icon_3-c-B"}},4083:function(t,e,n){t.exports={filters:"OrganizationsTable_filters_34ltD",filter:"OrganizationsTable_filter_yILxn",search:"OrganizationsTable_search_1ZsCG"}},"40a1":function(t,e,n){t.exports=n.p+"img/link.bc29d029.svg"},4103:function(t,e,n){t.exports={root:"GreenBlock_root_3vrvI",default:"GreenBlock_default_4im5N",outline:"GreenBlock_outline_24yfq"}},"410f":function(t,e,n){t.exports={text:"IntegrationQrCode_text_2TelL",row:"IntegrationQrCode_row_1X99Z","qrcode-container":"IntegrationQrCode_qrcode-container_3I2Tx",links:"IntegrationQrCode_links_fkpxu"}},"41c7":function(t,e,n){"use strict";n("22bd")},"43ef":function(t,e,n){"use strict";n("8753")},4516:function(t,e,n){"use strict";var r=n("6dea"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},4765:function(t,e,n){},"49f8":function(t,e,n){"use strict";var r=n("f071"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"4c00":function(t,e,n){"use strict";n("8e28")},"4c91":function(t,e,n){},"4cb5":function(t,e,n){"use strict";var r=n("6ae9"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"4dde":function(t,e,n){t.exports={root:"OtpStatusNotification_root_33vmx",icon:"OtpStatusNotification_icon_3zYsk",body:"OtpStatusNotification_body_1Pj02"}},"4e08":function(t,e,n){t.exports={root:"CancelRequest_root_2iOHR",cancel:"CancelRequest_cancel_Aor3p"}},"4fb4":function(t,e,n){t.exports={root:"Constructor_root_1lnju",subtitle:"Constructor_subtitle_1jIEd"}},"500c":function(t,e,n){},"503f":function(t,e,n){t.exports={root:"StatusBadge_root_2howT"}},"508a":function(t,e,n){"use strict";var r=n("690c"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},5155:function(t,e,n){"use strict";n("662e")},"51bb":function(t,e,n){"use strict";var r=n("410f"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},5531:function(t,e,n){"use strict";n("0f93")},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"IconAdditionalProducts",(function(){return Fe})),n.d(r,"IconConstructor",(function(){return We})),n.d(r,"IconCreditProducts",(function(){return Xe})),n.d(r,"IconOrganizations",(function(){return on})),n.d(r,"IconRequests",(function(){return pn})),n.d(r,"IconShops",(function(){return bn})),n.d(r,"IconUsers",(function(){return Cn}));var a={};n.r(a),n.d(a,"Cross",(function(){return hr})),n.d(a,"Download",(function(){return yr})),n.d(a,"Edit",(function(){return Pr})),n.d(a,"Plus",(function(){return Ar})),n.d(a,"Upload",(function(){return Lr})),n.d(a,"Copy",(function(){return Vr})),n.d(a,"Pencil",(function(){return Qr}));var o={};n.r(o),n.d(o,"IconFacebook",(function(){return $T})),n.d(o,"IconVk",(function(){return NT})),n.d(o,"IconWhatsapp",(function(){return UT})),n.d(o,"IconMail",(function(){return YT})),n.d(o,"IconInstagram",(function(){return eA}));n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("b0c0");var s=n("2b0e"),i=(n("caad"),n("2532"),function(){return window.localStorage}),c=function(t,e){try{i().setItem(t,e)}catch(n){}},l=function(t){try{return i().getItem(t)}catch(e){return null}},u=function(t){try{i().removeItem(t)}catch(e){}},d={set:c,get:l,remove:u},p=n("1232"),f="fedor-test",m="crm_token",h="crm_refresh_token",v=[],g=function(){return d.get(m)},b=function(t){var e,n,r,a=t.token,o=t.refreshToken;d.set(m,a),d.set(h,o);var s=Object(p["a"])(a);v=null!==(e=null===s||void 0===s||null===(n=s.resource_access)||void 0===n||null===(r=n[f])||void 0===r?void 0:r.roles)&&void 0!==e?e:[]},_={getToken:g,updateCredentials:b,isRoleAdmin:function(){return v.includes("ADMIN")}},k=n("c28b"),y=n.n(k),w=n("2b88"),O=n.n(w),C=n("6018"),x=n("b2e5"),S=n.n(x),P=n("998c"),j=n.n(P),E=n("4cc4"),R=n.n(E),$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app crm-app",attrs:{id:"app crm-app"}},[n("otp-header"),n("main",{staticClass:"main"},[n("div",{staticClass:"crm-container"},[n("router-view")],1)]),n("portal-target",{attrs:{name:"modal",slim:""}}),n("portal-target",{attrs:{name:"side-page",slim:""}})],1)},T=[],A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.$style.root},[r("div",{class:t.$style.inner},[r("div",{class:t.$style.brand,on:{click:t.toMainPage}},[r("img",{attrs:{src:n("5b1c"),alt:"logo",width:"26px",height:"26px"}}),t._v(" Ecommerce ")]),r("div",{class:t.$style.menu,on:{click:t.logout}},[t._v(" LOGOUT ")])])])},I=[],D={name:"OtpHeader",methods:{toMainPage:function(){var t="/";this.$route.path!==t&&this.$router.push(t)},logout:function(){this.$keycloak.logoutFn()}}},z=D,N=n("befd"),M=n("2877");function L(t){this["$style"]=N["default"].locals||N["default"]}var B=Object(M["a"])(z,A,I,!1,L,null,null),F=B.exports,q={name:"App",components:{OtpHeader:F},mounted:function(){console.log("hello world")}},U=q,G=(n("5c0b"),Object(M["a"])(U,$,T,!1,null,null,null)),V=G.exports,H=n("2909"),W=(n("99af"),n("8c4f")),K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("otp-auth-page-wrapper",[n("otp-auth-wrapper",{attrs:{title:"Сброс пароля"}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.changePassword(e)}}},[n("form-item",[n("form-input",{attrs:{label:"Новый пароль",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("form-item",{staticClass:"crm-mb-24"},[n("form-input",{attrs:{label:"Новый пароль еще раз",type:"password"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1),n("otp-button",{attrs:{size:"md",wide:""}},[t._v(" Создать ")])],1),t.showError?t._l(t.errorMessages,(function(e,r){return n("badge",{key:r,attrs:{variant:"danger"}},[t._v(" "+t._s(e)+" ")])})):t._e()],2)],1)},Y=[],Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"otp-form-items",class:{"_no-mb":t.noMarginBottom}},[n("div",{staticClass:"otp-form-items__label"},[t._t("label",[t._v(" "+t._s(t.label)+" ")])],2),n("div",{staticClass:"otp-form-items__content"},[t._t("default")],2)])},Q=[],J={name:"FormItems",props:{label:{type:String,default:""},noMarginBottom:Boolean}},X=J,tt=(n("1ef3"),Object(M["a"])(X,Z,Q,!1,null,null,null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"otp-form-item",class:t.classes},[t.label||t.$slots["label"]?n("div",{staticClass:"otp-form-item__label"},[t._t("label",[t._v(" "+t._s(t.label)+" ")])],2):t._e(),n("div",{staticClass:"otp-form-item__body"},[t._t("default"),t.error?n("div",{staticClass:"otp-form-item__error"},[t._t("error",[t._v(" "+t._s(t.error)+" ")])],2):t.description||t.$slots["description"]?n("div",{staticClass:"otp-form-item__description"},[t._t("description",[t._v(" "+t._s(t.description)+" ")])],2):t._e()],2)])},rt=[],at={name:"FormItem",props:{label:{type:String,default:""},description:{type:String,default:""},error:{type:String,default:""},noMarginBottom:Boolean,inlineView:Boolean},computed:{classes:function(){return{"_no-mb":this.noMarginBottom,"_inline-view":this.inlineView}}}},ot=at,st=(n("d86b"),Object(M["a"])(ot,nt,rt,!1,null,null,null)),it=st.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"otp-input",class:t.classes},[n("label",{staticClass:"otp-input__label"},[t._t("label",[t._v(" "+t._s(t.label)+" ")])],2),n("input",t._b({staticClass:"otp-input__input",attrs:{placeholder:t.placeholder,type:t.type,disabled:t.disabled,readonly:t.readOnly},domProps:{value:t.value},on:{input:t.onInput,focus:t.onFocus,blur:t.onBlur}},"input",t.$attrs,!1)),t.$slots["suffix"]?n("div",{staticClass:"otp-input__suffix"},[t._t("suffix")],2):t._e()])},lt=[],ut=(n("a9e3"),{name:"FormInput",inheritAttrs:!1,props:{value:{type:[String,Number],default:""},label:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},error:Boolean,valid:Boolean,disabled:Boolean,wideSuffix:Boolean,readOnly:Boolean},data:function(){return{focused:!1}},computed:{classes:function(){return{_focused:this.focused,_disabled:this.disabled,_error:this.error,_valid:this.valid,"_has-value":0===this.value||!!this.value,"_with-suffix":this.$slots.suffix||this.valid,"_wide-suffix":this.wideSuffix,"_read-only":this.readOnly}}},methods:{onInput:function(t){this.emitValue(t,"input")},onFocus:function(){this.focused=!0,this.$emit("focus")},onBlur:function(){this.focused=!1,this.$emit("blur")},emitValue:function(t,e){var n=t.target.value;this.$emit(e,n)}}}),dt=ut,pt=(n("1aa7"),Object(M["a"])(dt,ct,lt,!1,null,null,null)),ft=pt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"crm-input-new",class:t.classes},[n("input",t._b({directives:[{name:"mask",rawName:"v-mask",value:t.mask,expression:"mask"}],ref:"input",staticClass:"crm-input-new__input",attrs:{placeholder:t.placeholder,type:t.type,disabled:t.disabled,readonly:t.readOnly},domProps:{value:t.value},on:{input:t.onInput,focus:t.onFocus,blur:t.onBlur}},"input",t.$attrs,!1)),t.isSuffixVisible?n("div",{staticClass:"crm-input-new__suffix"},[t.isTypeSearch?[t.hasInputValue&&t.focused?n("div",{staticClass:"crm-input-new__clear-icon",on:{mousedown:t.clear}},[n("cross",{attrs:{width:"16",height:"16"}})],1):n("search")]:t.hasSlotSuffix?t._t("suffix"):n("div",{staticClass:"crm-input-new__with-line"},[t._t("suffix-with-line")],2)],2):t._e()])},ht=[],vt=n("ade3"),gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"crm-icon icon-search",attrs:{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"}},[n("g",{attrs:{"clip-path":"url(#clip0)",stroke:"#6E6E6E","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}},[n("path",{attrs:{d:"M9.097 1.558a5.792 5.792 0 11-4.335 10.743A5.792 5.792 0 019.097 1.558M11.333 11.333l4 4"}})]),n("defs",[n("clipPath",{attrs:{id:"clip0"}},[n("path",{attrs:{fill:"#fff",d:"M0 0h16v16H0z"}})])])])},bt=[],_t={name:"Search"},kt=_t,yt=Object(M["a"])(kt,gt,bt,!1,null,null,null),wt=yt.exports,Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"crm-icon icon-cross",attrs:{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M4 20L20 4M20 20L4 4",stroke:"#6E6E6E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},Ct=[],xt={name:"Cross"},St=xt,Pt=Object(M["a"])(St,Ot,Ct,!1,null,null,null),jt=Pt.exports,Et={SEARCH:"search",TEXT:"text",PASSWORD:"password"},Rt={name:"FormInput",components:{Search:wt,Cross:jt},inheritAttrs:!1,props:{value:{type:[String,Number,Array,Object],default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""},size:{type:String,default:"sm",validator:function(t){return["sm","md","lg"].includes(t)}},error:Boolean,valid:Boolean,disabled:Boolean,readOnly:Boolean,fontBold:{type:Boolean,default:!0},forSelect:Boolean,forMultiselect:Boolean,forFilter:Boolean,hasValue:Boolean,darkPlaceholder:Boolean,mask:{type:[String,Object],default:""}},data:function(){return{focused:!1}},computed:{classes:function(){var t;return t={_disabled:this.disabled,_error:this.error,_valid:this.valid,"_has-value":this.hasInputValue,"_with-suffix":this.isSuffixVisible,"_suffix-with-line":this.hasSlotSuffixWithLine,"_read-only":this.readOnly},Object(vt["a"])(t,"_size-".concat(this.size),this.size),Object(vt["a"])(t,"_font-bold",this.fontBold),Object(vt["a"])(t,"_type-search",this.isTypeSearch),Object(vt["a"])(t,"_for-select",this.forSelect),Object(vt["a"])(t,"_for-multiselect",this.forMultiselect),Object(vt["a"])(t,"_for-filter",this.forFilter),Object(vt["a"])(t,"_dark-placeholder",this.darkPlaceholder),t},isSuffixVisible:function(){return this.isTypeSearch||this.hasSlotSuffix||this.hasSlotSuffixWithLine||this.valid},hasSlotSuffix:function(){return!!this.$slots.suffix},hasSlotSuffixWithLine:function(){return!!this.$slots["suffix-with-line"]},isTypeSearch:function(){return this.type===Et.SEARCH},hasInputValue:function(){return 0===this.value||!!this.value||this.hasValue}},methods:{onInput:function(t){this.emitValue(t,"input")},onFocus:function(){this.$emit("focus"),this.focused=!0},onBlur:function(){this.$emit("blur"),this.focused=!1},emitValue:function(t,e){var n=t.target.value;this.$emit(e,n)},clear:function(){this.$emit("input",""),this.$emit("clear")}}},$t=Rt,Tt=(n("92b1"),Object(M["a"])($t,mt,ht,!1,null,null,null)),At=Tt.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[t._t("default")],2)},Dt=[],zt={name:"OtpAuthPageWrapper"},Nt=zt,Mt=n("77bb");function Lt(t){this["$style"]=Mt["default"].locals||Mt["default"]}var Bt=Object(M["a"])(Nt,It,Dt,!1,Lt,null,null),Ft=Bt.exports,qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style.logo},[n("app-logo")],1),n("div",{class:t.$style.title},[t._v(" "+t._s(t.title)+" ")]),t._t("default")],2)},Ut=[],Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.999 24.003C12.999 17.927 17.923 13 23.998 13s11 4.926 11 11.002c0 6.074-4.925 10.998-11 10.998s-11-4.924-11-10.998zM32 9.999a6 6 0 016-6 6 6 0 110 12 6 6 0 01-6-6z",fill:"#52AE30"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23.97 0v8.673C15.52 8.685 8.673 15.543 8.673 24c0 8.466 6.861 15.327 15.327 15.327 8.414 0 15.327-6.795 15.327-15.385L48 23.95C48 37.256 37.256 48 24 48 10.746 48 0 37.256 0 24 0 10.754 10.73.017 23.97 0z",fill:"#2A644A"}})])},Vt=[],Ht={name:"AppLogo"},Wt=Ht,Kt=Object(M["a"])(Wt,Gt,Vt,!1,null,null,null),Yt=Kt.exports,Zt={name:"OtpAuthWrapper",components:{AppLogo:Yt},props:{title:{type:String,required:!0}}},Qt=Zt,Jt=n("20ee");function Xt(t){this["$style"]=Jt["default"].locals||Jt["default"]}var te=Object(M["a"])(Qt,qt,Ut,!1,Xt,null,null),ee=te.exports,ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"otp-button",class:t.classes,attrs:{disabled:t.disabled},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)},re=[],ae={name:"Button",props:{design:{type:String,default:"default",validator:function(t){return["default","text","outline"].includes(t)}},size:{type:String,default:"sm",validator:function(t){return["sm","md"].includes(t)}},wide:Boolean,disabled:Boolean},computed:{classes:function(){var t;return t={},Object(vt["a"])(t,"_design-".concat(this.design),this.design),Object(vt["a"])(t,"_size-".concat(this.size),this.size),Object(vt["a"])(t,"_wide",this.wide),Object(vt["a"])(t,"_disabled",this.disabled),t}}},oe=ae,se=(n("70ee"),Object(M["a"])(oe,ne,re,!1,null,null,null)),ie=se.exports,ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.classes},[t._t("default")],2)},le=[],ue=["primary","success","danger","purple","dark","light"],de={name:"Badge",props:{variant:{type:String,default:"primary",validator:function(t){return ue.includes(t)}}},computed:{classes:function(){return[this.$style.root,this.$style[this.variant]]}}},pe=de,fe=n("73a9");function me(t){this["$style"]=fe["default"].locals||fe["default"]}var he=Object(M["a"])(pe,ce,le,!1,me,null,null),ve=he.exports,ge={name:"ChangePassword",components:{OtpAuthWrapper:ee,OtpAuthPageWrapper:Ft,FormItem:it,FormInput:ft,OtpButton:ie,Badge:ve},data:function(){return{password:"",confirmPassword:"",showError:!1,errorMessages:""}},methods:{changePassword:function(){this.showError=!1,this.setErrors(""),this.password!==this.confirmPassword&&(this.showError=!0,this.setErrors("Пароли не совпадают"))},setErrors:function(t){this.errorMessages=Array.isArray(t)?t:[t]}}},be=ge,_e=Object(M["a"])(be,K,Y,!1,null,null,null),ke=_e.exports,ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("otp-heading",{class:t.$style.title},[t._v(" Хорошего дня! ")]),n("menu-block")],1)},we=[],Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.tag,{tag:"component",class:[t.$style.root,t.$style[t.tag]]},[t._t("default")],2)},Ce=[],xe={name:"OtpHeading",props:{tag:{type:String,default:"h1",validator:function(t){return["h1","h2","h3","h4"].includes(t)}}}},Se=xe,Pe=n("f988");function je(t){this["$style"]=Pe["default"].locals||Pe["default"]}var Ee=Object(M["a"])(Se,Oe,Ce,!1,je,null,null),Re=Ee.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style.list},t._l(t.menu,(function(e,r){return n("div",{key:r,class:t.$style.item,on:{click:function(n){return t.goTo(e.route)}}},[n("div",{class:t.$style["icon-block"]},[n("div",{class:t.$style.icon},[n("menu-icons",{attrs:{icon:e.icon}})],1)]),n("div",{class:t.$style.caption},[t._v(" "+t._s(e.caption)+" ")])])})),0)])},Te=[],Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("icon-"+t.icon,{tag:"component"})},Ie=[],De=n("5530"),ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"72",height:"72",viewBox:"0 0 72 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M26.26 53H13.218C10.337 53 8 50.68 8 47.824V14.175C8 11.32 10.337 9 13.217 9h49.566C65.665 9 68 11.32 68 14.177V37.47",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M23 47h-7a2 2 0 01-2-2V17a2 2 0 012-2h44a2 2 0 012 2v20.846",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 18a2 2 0 00-2 2v28a2 2 0 002 2h14.287c-.968-1.836.83-4 2.714-4 2.163 0 3.704 1.642 5.595 4H42a2 2 0 002-2V28a2 2 0 012-2h3a4 4 0 014 4v10.5L65 44V20a2 2 0 00-2-2H19z",fill:"#52AE30"}}),n("path",{attrs:{"clip-rule":"evenodd",d:"M49.937 43V28.974A2.974 2.974 0 0046.963 26v0a2.974 2.974 0 00-2.974 2.974V53c-3.2-3.845-5.003-7-8.004-7-1.894 0-3.701 2.187-2.699 4.029C35.22 53.549 45.171 68 45.171 68h16.827L65.6 53.593a6 6 0 00-4.133-7.214L49.938 43z",stroke:"#52AE30","stroke-width":"2","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".5",d:"M4 21v-8a8 8 0 018-8h16M32 5h3M38.397 31H25a3 3 0 01-3-3v-3a3 3 0 013-3h28",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round"}})])},Ne=[],Me={name:"IconAdditionalProducts"},Le=Me,Be=Object(M["a"])(Le,ze,Ne,!1,null,null,null),Fe=Be.exports,qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"72",height:"72",viewBox:"0 0 72 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"clip-rule":"evenodd",d:"M54.512 32.964a2 2 0 01.49-2.466l1.154-.961a2 2 0 00-.001-3.073l-1.153-.96a2 2 0 01-.491-2.466l.698-1.333a2 2 0 00-1.176-2.838l-1.435-.447a2 2 0 01-1.397-2.09l.136-1.499a2 2 0 00-2.173-2.172l-1.497.136a2 2 0 01-2.09-1.396l-.448-1.435A2 2 0 0042.29 8.79l-1.328.697a2 2 0 01-2.466-.49l-.96-1.152a2 2 0 00-3.072 0L33.5 8.998a2 2 0 01-2.465.491l-1.33-.698a2 2 0 00-2.84 1.177l-.445 1.432a2 2 0 01-2.092 1.397l-1.496-.136a2 2 0 00-2.174 2.172l.136 1.497a2 2 0 01-1.397 2.09l-1.433.447a2 2 0 00-1.177 2.838l.7 1.334a2 2 0 01-.492 2.465l-1.152.96a2 2 0 000 3.073l1.154.962a2 2 0 01.491 2.465l-.698 1.332a2 2 0 001.175 2.838l1.436.448a2 2 0 011.396 2.09l-.136 1.496a2 2 0 002.173 2.173l1.497-.136a2 2 0 012.09 1.397l.447 1.433a2 2 0 002.839 1.176l1.33-.698a2 2 0 012.466.491l.96 1.152a2 2 0 003.072 0l.962-1.154a2 2 0 012.466-.49l1.329.697a2 2 0 002.838-1.176l.448-1.435a2 2 0 012.09-1.396l1.497.136a2 2 0 002.173-2.172l-.135-1.497a2 2 0 011.396-2.09l1.435-.447a2 2 0 001.175-2.84l-.698-1.328z",stroke:"#52AE30","stroke-width":"2","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M56.386 43L65 58.17l-9.818-1.69L51.775 66 45 54.361",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".5",d:"M60 41.361l1.245 2.14m1.755 3l2.5 4.303",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M15.611 43L7 58.17l9.818-1.69L20.224 66 27 54.361",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".5",d:"M32.611 52l-3.69 6.5M25 65.5l1.231-2.17",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M58.003 32.499a2 2 0 00-.49 2.466l.698 1.328a2 2 0 01-1.175 2.84l-1.435.447a2 2 0 00-1.396 2.09l.135 1.497a2 2 0 01-2.173 2.172l-1.497-.136a2 2 0 00-2.09 1.396l-.448 1.435a2 2 0 01-2.838 1.175l-1.33-.697a2 2 0 00-2.465.49l-.962 1.155a2 2 0 01-3.073 0l-.96-1.152a2 2 0 00-2.465-.49l-1.33.697a2 2 0 01-2.839-1.176l-.446-1.434a2 2 0 00-2.09-1.397l-1.498.137a2 2 0 01-2.173-2.173l.136-1.496a2 2 0 00-1.396-2.09l-1.436-.448a2 2 0 01-1.175-2.838l.698-1.332a2 2 0 00-.49-2.466l-1.155-.962a2 2 0 010-3.073l1.152-.96a2 2 0 00.49-2.464l-.698-1.334a2 2 0 011.176-2.838l1.434-.447a2 2 0 001.397-2.09l-.136-1.497a2 2 0 012.174-2.173l1.496.137A2 2 0 0029.42 13.4l.447-1.433a2 2 0 012.838-1.176l1.331.698a2 2 0 002.465-.49l.962-1.155a2 2 0 013.073 0l.96 1.151a2 2 0 002.465.49l1.33-.696a2 2 0 012.838 1.175l.447 1.435a2 2 0 002.09 1.396l1.498-.136a2 2 0 012.172 2.172l-.135 1.5a2 2 0 001.397 2.089l1.435.447a2 2 0 011.176 2.838l-.699 1.333a2 2 0 00.492 2.465l1.153.96a2 2 0 010 3.074l-1.153.96zM47.79 22.617a1 1 0 00-1.576-1.232l-9.48 12.13-6.041-5.774a1 1 0 00-1.382 1.446l6.84 6.537a1 1 0 001.479-.107l10.16-13z",fill:"#52AE30"}}),n("path",{attrs:{d:"M45 22L34.84 35 28 28.463",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},Ue=[],Ge={name:"IconConstructor"},Ve=Ge,He=Object(M["a"])(Ve,qe,Ue,!1,null,null,null),We=He.exports,Ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"72",height:"72",viewBox:"0 0 72 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M31.313 63H13a6 6 0 01-6-6V12a6 6 0 016-6h23.938L51 19.81V34",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".5",d:"M3 36v-7.673m0-4.385V11a9 9 0 019-9h1",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round"}}),n("path",{attrs:{d:"M37 6v14h14",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M37.188 64.823A4 4 0 0134.354 66H16a6 6 0 01-6-6V13a4 4 0 014-4h22l16.746 15.816A4 4 0 0154 27.724V37c-11.5 4.5-19.5 15.5-14 25l-2.812 2.823zm-9.536-38.581a1 1 0 01.106 1.41l-6.875 8a1 1 0 01-1.516 0l-4.125-4.8a1 1 0 111.516-1.304l3.367 3.918 6.117-7.118a1 1 0 011.41-.106zm.106 12.41a1 1 0 10-1.516-1.304l-6.117 7.118-3.367-3.918a1 1 0 10-1.516 1.304l4.125 4.8a1 1 0 001.516 0l6.875-8zM31 31c0-.552.442-1 .988-1h11.024c.546 0 .988.448.988 1s-.442 1-.988 1H31.988A.994.994 0 0131 31zm1.056 10c-.583 0-1.056.448-1.056 1s.473 1 1.056 1h5.888c.583 0 1.056-.448 1.056-1s-.473-1-1.056-1h-5.888z",fill:"#52AE30"}}),n("path",{attrs:{d:"M31 30h11M31 41h6M26 26l-6.875 8L15 29.2M26 37l-6.875 8L15 40.2",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{"clip-rule":"evenodd",d:"M50.823 42.714C48.106 42.986 36.589 54.226 44 62c2.59 2.714 8.965 2.752 15.932-4.555C66.898 50.143 69.999 36 69.999 36s-6.95 1.014-13.218 3.898c0 0-.436 7.93-5.958 7.93v-5.114z",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M37 69l18-18",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},Ye=[],Ze={name:"IconCreditProducts"},Qe=Ze,Je=Object(M["a"])(Qe,Ke,Ye,!1,null,null,null),Xe=Je.exports,tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"72",height:"72",viewBox:"0 0 72 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"clip-rule":"evenodd",d:"M8 58a2 2 0 012-2h50a2 2 0 012 2v2a2 2 0 01-2 2H10a2 2 0 01-2-2v-2z",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 61a2 2 0 012-2h50a2 2 0 012 2v2a2 2 0 01-2 2H13a2 2 0 01-2-2v-2zM11 30.632a1 1 0 01.443-.83L38 12l26.557 17.801a1 1 0 01.443.83V32a4 4 0 01-4 4H11v-5.368z",fill:"#52AE30"}}),n("path",{attrs:{d:"M62 68H8M17 33v23",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{"clip-rule":"evenodd",d:"M11 33v23h6V33h-6zM25 33v23h6V33h-6zM39 33v23h6V33h-6zM53 33v23h6V33h-6zM8 27h54v4a2 2 0 01-2 2H10a2 2 0 01-2-2v-4z",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M8 27L33.89 9.74a2 2 0 012.22 0L62 27",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".5",d:"M29 8l4.36-2.907a2.982 2.982 0 013.292-.015C40.06 7.32 42.395 8.96 44 10M47 12l3 2",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},en=[],nn={name:"IconOrganizations"},rn=nn,an=Object(M["a"])(rn,tn,en,!1,null,null,null),on=an.exports,sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"72",height:"72",viewBox:"0 0 72 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"clip-rule":"evenodd",d:"M39.052 4.557a3.517 3.517 0 00-4.062-.003c-3.836 2.752-12.797 8.364-24.237 10.198-.997.16-1.755 1.03-1.736 2.04C9.8 57.258 37 66 37 66s26.192-8.737 27.938-49.165c.045-1.028-.719-1.926-1.735-2.09-11.412-1.84-20.329-7.438-24.15-10.188z",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".5",d:"M5 16c0 7.736.95 14.353 2.5 20m5.1 12.5a51.093 51.093 0 01-2.482-5",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M42.05 6.557a3.517 3.517 0 00-4.061-.003c-3.837 2.752-12.797 8.364-24.237 10.198-.997.16-1.756 1.03-1.736 2.04C12.799 59.258 39.999 68 39.999 68s26.192-8.737 27.938-49.165c.044-1.028-.72-1.926-1.735-2.09-11.412-1.84-20.329-7.438-24.151-10.188zm-.956 15.346a6.5 6.5 0 11-9.192 9.192 6.5 6.5 0 019.192-9.192zM25.852 42.109c6.903-9.166 17.266-7.872 23.146 2.89h-25a23.652 23.652 0 011.854-2.89z",fill:"#52AE30"}}),n("path",{attrs:{d:"M41.096 21.904a6.5 6.5 0 11-9.192 9.192 6.5 6.5 0 019.192-9.192",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{"clip-rule":"evenodd",d:"M49 45c-5.88-10.762-16.243-12.056-23.146-2.89A23.644 23.644 0 0024 45",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},cn=[],ln={name:"IconRequests"},un=ln,dn=Object(M["a"])(un,sn,cn,!1,null,null,null),pn=dn.exports,fn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"72",height:"72",viewBox:"0 0 72 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 31.351V62a4 4 0 004 4h41a6 6 0 006-6V28.773c-2.587 2.932-7.24 3.96-11.26.035-3.857 6.013-12.355 7.106-17.24 1.666-4.938 5.51-13.433 4.263-17.24-1.666-1.698 1.661-3.523 2.432-5.26 2.543zM17 39h21v16H17V39zm39 0H43v24h13V39z",fill:"#52AE30"}}),n("path",{attrs:{d:"M62 31v28a4 4 0 01-4 4H15a4 4 0 01-4-4V31",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",d:"M17 39h21v16H17z"}}),n("path",{attrs:{"clip-rule":"evenodd",d:"M43 39h13v24H43V39zm19.787-26.737A4 4 0 0059.184 10H13.816a4 4 0 00-3.603 2.263L6 21h61l-4.213-8.737zM67 23.603c0 5.991-7.32 11.004-13.26 5.205-3.857 6.013-12.355 7.106-17.24 1.666-4.938 5.51-13.433 4.263-17.24-1.666C13.39 34.55 6 29.66 6 23.603V21h61v2.603z",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M19.333 28.667v-8L22 10m14.667 20.39V10M54 28.667v-8L51.333 10",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M51.5 51a1.5 1.5 0 10.001 3.001A1.5 1.5 0 0051.5 51z",fill:"#52AE30"}}),n("path",{attrs:{opacity:".5",d:"M4 16l3.342-6.683A6 6 0 0112.708 6H37m3 0h4",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round"}})])},mn=[],hn={name:"IconShops"},vn=hn,gn=Object(M["a"])(vn,fn,mn,!1,null,null,null),bn=gn.exports,_n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"72",height:"72",viewBox:"0 0 72 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M19.657 46.343a8 8 0 11-11.314 0 8 8 0 0111.314 0",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M21.657 48.343a8 8 0 010 11.314 8 8 0 11-11.314-11.314 8 8 0 0111.314 0z",fill:"#52AE30"}}),n("path",{attrs:{d:"M25 68v0c-5.174-8.37-14.293-9.377-20.369-2.248A18.29 18.29 0 003 68",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M27 70c-5.174-8.37-14.293-9.377-20.369-2.248A18.29 18.29 0 005 70",fill:"#52AE30"}}),n("path",{attrs:{d:"M40.657 5.343a8 8 0 11-11.314 11.314A8 8 0 1140.657 5.343",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M42.657 7.343a8 8 0 11-11.314 11.314A8 8 0 1142.657 7.343z",fill:"#52AE30"}}),n("path",{attrs:{d:"M46 27v0c-5.174-8.37-14.294-9.377-20.369-2.248A18.288 18.288 0 0024 27",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M48 29c-5.174-8.37-14.294-9.377-20.369-2.248A18.288 18.288 0 0026 29",fill:"#52AE30"}}),n("path",{attrs:{d:"M61.657 46.343a8 8 0 010 11.314 8 8 0 01-11.314 0 8 8 0 010-11.314 8 8 0 0111.314 0",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M63.657 48.343a8 8 0 010 11.314 8 8 0 01-11.314 0 8 8 0 010-11.314 8 8 0 0111.314 0z",fill:"#52AE30"}}),n("path",{attrs:{d:"M67 68v0c-5.174-8.37-14.294-9.377-20.369-2.248A18.288 18.288 0 0045 68",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{opacity:".3","fill-rule":"evenodd","clip-rule":"evenodd",d:"M69 70c-5.174-8.37-14.294-9.377-20.369-2.248A18.288 18.288 0 0047 70",fill:"#52AE30"}}),n("path",{attrs:{opacity:".5",d:"M63 36c0 3.524-.65 6.895-1.839 10M18.5 13.377A27.897 27.897 0 0127 9.16m19 1.084c7.592 3.247 13.458 9.751 15.84 17.757M46.582 61.5a27.979 27.979 0 004.918-2.876M29 63.356a27.804 27.804 0 01-7-2.55M8.839 46.001A27.934 27.934 0 017 36a27.871 27.871 0 015.019-16",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round"}}),n("path",{attrs:{d:"M59 35.999a23.933 23.933 0 00-7.5-17.429m-9 40.234a23.978 23.978 0 01-7.5 1.195c-2.805 0-5.498-.481-8-1.366M18.059 19a23.926 23.926 0 00-7.059 17c0 .673.028 1.34.082 2",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round"}})])},kn=[],yn={name:"IconUsers"},wn=yn,On=Object(M["a"])(wn,_n,kn,!1,null,null,null),Cn=On.exports,xn={name:"MenuIcons",components:Object(De["a"])({},r),props:{icon:{type:String,required:!0}}},Sn=xn,Pn=Object(M["a"])(Sn,Ae,Ie,!1,null,null,null),jn=Pn.exports,En=[{icon:"organizations",caption:"Торговые организации",route:"organizations"},{icon:"shops",caption:"Торговые Точки",route:"shops"},{icon:"credit-products",caption:"Кредитные продукты",route:"creditProducts"},{icon:"additional-products",caption:"Доп.продукты",route:"additionalProducts"},{icon:"users",caption:"Пользователи",route:"users"},{icon:"requests",caption:"Заявки",route:"requests"},{icon:"constructor",caption:"Конструктор смарт-анкеты",route:"constructor"}],Rn={name:"MenuBlock",components:{MenuIcons:jn},data:function(){return{menu:En}},methods:{goTo:function(t){this.$router.push({name:t})}}},$n=Rn,Tn=n("0cce");function An(t){this["$style"]=Tn["default"].locals||Tn["default"]}var In=Object(M["a"])($n,$e,Te,!1,An,null,null),Dn=In.exports,zn={name:"Home",components:{MenuBlock:Dn,OtpHeading:Re}},Nn=zn,Mn=n("199b");function Ln(t){this["$style"]=Mn["default"].locals||Mn["default"]}var Bn=Object(M["a"])(Nn,ye,we,!1,Ln,null,null),Fn=Bn.exports,qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"organizations-page"},[n("page-wrapper",{attrs:{"is-loading":t.isLoading,"is-main":""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Торговые организации ")]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{on:{click:function(e){t.showModal=!0}}},[t._v(" Добавить ТО ")]),n("update-button",{attrs:{icon:"upload"}},[t._v(" Загрузить несколько ТО ")]),n("update-button",{attrs:{icon:"download"}},[t._v(" Скачать в xlsx ")])]},proxy:!0},{key:"default",fn:function(){return[n("organizations-table"),t.showModal?n("edit-organization",{on:{close:function(e){t.showModal=!1}}}):t._e()]},proxy:!0}])})],1)},Un=[],Gn=n("1da1"),Vn=(n("96cf"),n("2f62")),Hn=function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{class:[e.$style.root,e.isMain&&e.$style.main]},[e.isLoading?r("spinner"):[e.$slots["breadcrumbs"]?r("div",{class:e.$style.breadcrumbs},[e._t("breadcrumbs")],2):e._e(),e.withoutHeader?e._e():r("div",{class:(t={},t[e.$style.header]=!0,t[e.$style["with-border"]]=e.headerWithBorder,t)},[r("div",{class:e.$style.title},[e._t("title")],2),r("div",{class:e.$style.buttons},[e._t("buttons")],2)]),e.$slots["tabs"]?r("div",{class:e.$style.tabs},[e._t("tabs")],2):e._e(),e.$slots["filters"]?r("div",{class:e.$style.filters},[e._t("filters")],2):e._e(),r("div",{class:e.$style.body},[e._t("default")],2)]],2)},Wn=[],Kn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"spinner",class:["_size-"+t.size]})},Yn=[],Zn={name:"Spinner",props:{size:{size:String,default:"md",validator:function(t){return["sm","md","lg"].includes(t)}}}},Qn=Zn,Jn=(n("ef72"),Object(M["a"])(Qn,Kn,Yn,!1,null,null,null)),Xn=Jn.exports,tr={name:"PageWrapper",components:{Spinner:Xn},props:{isLoading:Boolean,headerWithBorder:Boolean,withoutHeader:Boolean,isMain:Boolean}},er=tr,nr=n("e354");function rr(t){this["$style"]=nr["default"].locals||nr["default"]}var ar,or,sr=Object(M["a"])(er,Hn,Wn,!1,rr,null,null),ir=sr.exports,cr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.tag,t._b({tag:"component",staticClass:"crm-update-button",on:{click:function(e){return t.$emit("click")}}},"component",t.$attrs,!1),[t.icon?n("div",{staticClass:"crm-update-button__icon"},[n(t.icon,{tag:"component",attrs:{width:t.iconWidth,height:t.iconHeight}})],1):t._e(),n("div",{staticClass:"crm-update-button__text",class:["_"+t.variant]},[t._t("default")],2)])},lr=[],ur=(n("d81d"),n("b64b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"crm-icon icon-cross",attrs:{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M4 20L20 4M20 20L4 4",stroke:"#6E6E6E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])}),dr=[],pr={name:"Cross"},fr=pr,mr=Object(M["a"])(fr,ur,dr,!1,null,null,null),hr=mr.exports,vr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M12 1.5l.002 14.081M7.5 11.25l4.5 4.5 4.5-4.5",stroke:"#52AE30","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M15.44 6h2.06c.73 0 1.429.278 1.945.773.515.495.805 1.167.805 1.867v11.22c0 .7-.29 1.372-.805 1.867a2.81 2.81 0 01-1.945.773h-11a2.81 2.81 0 01-1.945-.773 2.588 2.588 0 01-.805-1.867V8.64c0-.7.29-1.372.805-1.867A2.81 2.81 0 016.5 6h2.063",stroke:"#52AE30","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},gr=[],br={name:"Download"},_r=br,kr=Object(M["a"])(_r,vr,gr,!1,null,null,null),yr=kr.exports,wr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"crm-icon icon-edit",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"clip-rule":"evenodd",d:"M8.99 9.644L6.5 10l.355-2.49 6.402-6.401a1.51 1.51 0 012.134 2.134L8.99 9.644z",stroke:"#52AE30","stroke-width":"1.33","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M13.167 9.333v5a1 1 0 01-1 1h-10a1 1 0 01-1-1v-10a1 1 0 011-1h5",stroke:"#52AE30","stroke-width":"1.33","stroke-linecap":"round","stroke-linejoin":"round"}})])},Or=[],Cr={name:"Edit"},xr=Cr,Sr=Object(M["a"])(xr,wr,Or,!1,null,null,null),Pr=Sr.exports,jr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M4 12h16M12 20V4",stroke:"#52AE30","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},Er=[],Rr={name:"Plus"},$r=Rr,Tr=Object(M["a"])($r,jr,Er,!1,null,null,null),Ar=Tr.exports,Ir=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M12 22.5l-.002-14.081M16.5 12.75L12 8.25l-4.5 4.5",stroke:"#52AE30","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M8.56 18H6.5a2.81 2.81 0 01-1.945-.773 2.588 2.588 0 01-.805-1.867V4.14c0-.7.29-1.372.805-1.867A2.81 2.81 0 016.5 1.5h11c.73 0 1.429.278 1.945.773.515.495.805 1.167.805 1.867v11.22c0 .7-.29 1.372-.805 1.867A2.81 2.81 0 0117.5 18h-2.063",stroke:"#52AE30","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},Dr=[],zr={name:"Upload"},Nr=zr,Mr=Object(M["a"])(Nr,Ir,Dr,!1,null,null,null),Lr=Mr.exports,Br=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M18.111 18h.942a1.956 1.956 0 001.372-.549c.366-.354.572-.836.575-1.34V2.89a1.881 1.881 0 00-.575-1.34A1.956 1.956 0 0019.053 1H9.947a1.956 1.956 0 00-1.372.549A1.881 1.881 0 008 2.889",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{"clip-rule":"evenodd",d:"M14 6a1 1 0 011 1v15a1 1 0 01-1 1H4a1 1 0 01-1-1V7a1 1 0 011-1h10z",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},Fr=[],qr={name:"Copy"},Ur=qr,Gr=Object(M["a"])(Ur,Br,Fr,!1,null,null,null),Vr=Gr.exports,Hr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M13.9358 2.56399C13.1776 1.80937 11.9515 1.8124 11.1971 2.57076C11.1932 2.57471 11.1893 2.57868 11.1854 2.58266L3.47067 10.2975L2.5 14L6.20241 13.0296L13.9171 5.31469C14.6816 4.56775 14.696 3.34233 13.9492 2.57764C13.9448 2.57307 13.9403 2.56852 13.9358 2.56399Z",stroke:"#ABABAB","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M10.6816 3.0918L13.4089 5.81907",stroke:"#ABABAB","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M9.59082 4.18164L12.3181 6.90891",stroke:"#ABABAB","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M3.59082 10.1816L5.50087 10.9983L6.31809 12.9089",stroke:"#ABABAB","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},Wr=[],Kr={name:"Pencil"},Yr=Kr,Zr=Object(M["a"])(Yr,Hr,Wr,!1,null,null,null),Qr=Zr.exports,Jr=["primary","secondary"],Xr=Object.keys(a).map((function(t){return t.toLowerCase()})),ta={name:"UpdateButton",components:Object(De["a"])({},a),inheritAttrs:!1,props:{variant:{type:String,default:"primary",validator:function(t){return Jr.includes(t)}},icon:{type:String,default:"",validator:function(t){return!t||Xr.includes(t)}},iconWidth:{type:String,default:"24"},iconHeight:{type:String,default:"24"},tag:{type:String,default:"div",validator:function(t){return["a","div"].includes(t)}}}},ea=ta,na=(n("298b"),Object(M["a"])(ea,cr,lr,!1,null,null,null)),ra=na.exports,aa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"side-page"}},[n("side-page",{attrs:{size:"md","block-background":""},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.title)+" ")]},proxy:!0},{key:"default",fn:function(){return[n("div",{staticClass:"edit-organization-params"},[n("reg-center-and-kko-component",{attrs:{type:"select"},on:{select:function(e,n){var r=n.key,a=n.value;return t.setRegCenterAndKkoId({key:r,value:a})}},model:{value:t.fields,callback:function(e){t.fields=e},expression:"fields"}}),n("form-item",{attrs:{label:"Наименование Организации"}},[n("form-input-new",{attrs:{placeholder:"ООО Сыч",size:"md"},model:{value:t.fields.name,callback:function(e){t.$set(t.fields,"name",e)},expression:"fields.name"}})],1),n("form-item",{attrs:{label:"Код Организации"}},[n("form-input-new",{attrs:{placeholder:"123456789",size:"md"},model:{value:t.fields.code,callback:function(e){t.$set(t.fields,"code",e)},expression:"fields.code"}})],1),n("form-item",{staticClass:"crm-mb-24",attrs:{label:"Куратор сети"}},[n("crm-select",{attrs:{options:t.curatorsTo,label:"fio","model-field":"login",placeholder:"Выберите из списка",size:"md"},model:{value:t.selectedCuratorLogin,callback:function(e){t.selectedCuratorLogin=e},expression:"selectedCuratorLogin"}})],1),n("radio-list",{staticClass:"crm-mb-16",attrs:{options:t.types,name:"organization-types"},on:{input:t.setCommercialNet},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.option;return[t._v(" "+t._s(n.title)+" ")]}}]),model:{value:t.fields.type,callback:function(e){t.$set(t.fields,"type",e)},expression:"fields.type"}}),t.isIndependentCommercialNet?t._e():n("commercial-net-suggestions",{attrs:{placeholder:"Наименование торговой сети",size:"md"},on:{select:function(e){return t.setField({data:e,fieldFrom:"id",fieldTo:"commercialNetId"})}},model:{value:t.fields.commercialNet,callback:function(e){t.$set(t.fields,"commercialNet",e)},expression:"fields.commercialNet"}}),t.isNew?t._e():n("component-with-label",{staticClass:"crm-mt-32",attrs:{label:"Статус"}},[n("radio-list",{attrs:{options:t.statuses,name:"to-list"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.option;return[t._v(" "+t._s(n.title)+" ")]}}],null,!1,571049439),model:{value:t.fields.status,callback:function(e){t.$set(t.fields,"status",e)},expression:"fields.status"}})],1)],1)]},proxy:!0},{key:"buttons",fn:function(){return[t.isNew?t._e():n("crm-button",{attrs:{design:"outline"},on:{click:t.reset}},[t._v(" Сбросить ")]),n("crm-button",{on:{click:t.save}},[t._v(" Сохранить ")])]},proxy:!0},{key:"cancel-button",fn:function(){return[n("div",{on:{click:function(e){t.isNew?t.reset():t.close()}}},[t._v(" "+t._s(t.isNew?"Сбросить":"Закрыть")+" ")])]},proxy:!0}])})],1)},oa=[],sa=(n("7db0"),"".concat("/crm-poc/api/shopapi/broker/adm-test","/").concat("v1")),ia=[{value:"on",title:"Активна"},{value:"off",title:"Неактивна"}],ca={ADMIN:"ADMIN",REGISTRAR:"REGISTRAR",CALL_CENTER:"CALL_CENTER",CURATOR_NET:"CURATOR_NET",CURATOR_SHOP:"CURATOR_SHOP",ADMIN_TO:"ADMIN_TO",AGENT:"AGENT",AGENT_TO:"AGENT_TO",AGENT_TO_LIMITED:"AGENT_TO_LIMITED",AGENT_SHOP:"AGENT_SHOP",AGENT_SHOP_LIMITED:"AGENT_SHOP_LIMITED",AGENT_BANK:"AGENT_BANK"},la=(ar={},Object(vt["a"])(ar,ca.ADMIN,"Администратор"),Object(vt["a"])(ar,ca.REGISTRAR,"Регистратор"),Object(vt["a"])(ar,ca.CALL_CENTER,"Сотрудник колцентра"),Object(vt["a"])(ar,ca.CURATOR_NET,"Куратор сети"),Object(vt["a"])(ar,ca.CURATOR_SHOP,"Куратор ТТ"),Object(vt["a"])(ar,ca.ADMIN_TO,"Администратор ТО"),Object(vt["a"])(ar,ca.AGENT,"Агент (сотрудник Банка)"),Object(vt["a"])(ar,ca.AGENT_TO,"Агент ТО (полный доступ)"),Object(vt["a"])(ar,ca.AGENT_TO_LIMITED,"Агент ТО (ограниченный доступ)"),Object(vt["a"])(ar,ca.AGENT_SHOP,"Агент ТТ (полный доступ)"),Object(vt["a"])(ar,ca.AGENT_SHOP_LIMITED,"Агент ТТ (ограниченный доступ)"),ar),ua={OPTY_CREATED:"OPTY_CREATED",DECISION_PRE_APPROVAL:"DECISION_PRE_APPROVAL",DECISION_APPROVAL:"DECISION_APPROVAL",AGREEMENT_CREATED:"AGREEMENT_CREATED",AGREEMENT_CREATED_PAPERLESS:"AGREEMENT_CREATED_PAPERLESS",AGREEMENT_CREATED_PAPERLESS_ES:"AGREEMENT_CREATED_PAPERLESS_ES",AGREEMENT_CREATED_PAPER_TECH:"AGREEMENT_CREATED_PAPER_TECH",AGREEMENT_DOCS_SENT:"AGREEMENT_DOCS_SENT",AGREEMENT_SIGNED:"AGREEMENT_SIGNED",AGREEMENT_SIGN_FAILED:"AGREEMENT_SIGN_FAILED",AGREEMENT_AUTHORIZED:"AGREEMENT_AUTHORIZED",CANCEL_AUTHORIZATION:"CANCEL_AUTHORIZATION",ARCHIVE:"ARCHIVE",FAILED:"FAILED"},da=(or={},Object(vt["a"])(or,ua.OPTY_CREATED,"success"),Object(vt["a"])(or,ua.DECISION_APPROVAL,"success"),Object(vt["a"])(or,ua.AGREEMENT_CREATED_PAPERLESS,"purple"),Object(vt["a"])(or,ua.AGREEMENT_CREATED_PAPERLESS_ES,"purple"),Object(vt["a"])(or,ua.AGREEMENT_CREATED_PAPER_TECH,"purple"),Object(vt["a"])(or,ua.AGREEMENT_DOCS_SENT,"primary"),Object(vt["a"])(or,ua.AGREEMENT_SIGNED,"primary"),Object(vt["a"])(or,ua.AGREEMENT_SIGN_FAILED,"danger"),Object(vt["a"])(or,ua.AGREEMENT_AUTHORIZED,"primary"),Object(vt["a"])(or,ua.ARCHIVE,"dark"),Object(vt["a"])(or,ua.FAILED,"dark"),or),pa=[{value:"RGB_GOODS_CATEGORY_102",title:"Авто аудио-видео системы"},{value:"RGB_GOODS_CATEGORY_101",title:"Автозапчасти, шины, диски"},{value:"RGB_GOODS_CATEGORY_120",title:"Билеты и туры"},{value:"RGB_GOODS_CATEGORY_106",title:"Двери/Окна/ПВХ"},{value:"RGB_GOODS_CATEGORY_136",title:"Детские товары"},{value:"RGB_GOODS_CATEGORY_103",title:"Домашние аудио-видео системы"},{value:"RGB_GOODS_CATEGORY_121",title:"Игровые приставки"},{value:"RGB_GOODS_CATEGORY_104",title:"Компьютеры и комплектующие"},{value:"RGB_GOODS_CATEGORY_135",title:"Косметика"},{value:"RGB_GOODS_CATEGORY_107",title:"Мебель и комплектующие"},{value:"RGB_GOODS_CATEGORY_143",title:"Мед. Оборудование"},{value:"RGB_GOODS_CATEGORY_142",title:"Медицинские услуги"},{value:"RGB_GOODS_CATEGORY_122",title:"Мелкая бытовая техника"},{value:"RGB_GOODS_CATEGORY_141",title:"Меха/Дубленки/Кожаные куртки"},{value:"RGB_GOODS_CATEGORY_109",title:"Мототехника"},{value:"RGB_GOODS_CATEGORY_124",title:"Музыкальные инструменты"},{value:"RGB_GOODS_CATEGORY_125",title:"Ноутбуки"},{value:"RGB_GOODS_CATEGORY_138",title:"Образовательные услуги"},{value:"RGB_GOODS_CATEGORY_145",title:"Одежда/Обувь/Сумки"},{value:"RGB_GOODS_CATEGORY_119",title:"Охота и рыбалка"},{value:"RGB_GOODS_CATEGORY_111",title:"Принтеры/Факсы/Копиры/Сканеры"},{value:"RGB_GOODS_CATEGORY_134",title:"Пылесосы"},{value:"RGB_GOODS_CATEGORY_112",title:"Садовое оборуд. и инвентарь"},{value:"RGB_GOODS_CATEGORY_126",title:"Сантехника"},{value:"RGB_GOODS_CATEGORY_113",title:"Системы очистки/Кондиционеры"},{value:"RGB_GOODS_CATEGORY_127",title:"Спорт инвентарь"},{value:"RGB_GOODS_CATEGORY_140",title:"Спортивные услуги"},{value:"RGB_GOODS_CATEGORY_128",title:"Спутниковые тарелки/антенны"},{value:"RGB_GOODS_CATEGORY_114",title:"Стиральные/Посудомоечн. машины"},{value:"RGB_GOODS_CATEGORY_139",title:"Страховые полисы"},{value:"RGB_GOODS_CATEGORY_144",title:"Строительство домов/Зем.Уч."},{value:"RGB_GOODS_CATEGORY_115",title:"Стройматериалы/Инструменты"},{value:"RGB_GOODS_CATEGORY_118",title:"Текстиль и предметы интерьера"},{value:"RGB_GOODS_CATEGORY_129",title:"Телевизоры/плазменные панели"},{value:"RGB_GOODS_CATEGORY_105",title:"Телефоны/Гаджеты/Аксессуары"},{value:"RGB_GOODS_CATEGORY_137",title:"Тепло/Водо/Газ. Оборудование"},{value:"RGB_GOODS_CATEGORY_130",title:"Услуги"},{value:"RGB_GOODS_CATEGORY_116",title:"Фото/Видеокамеры/Комплектующие"},{value:"RGB_GOODS_CATEGORY_131",title:"Холодильники"},{value:"RGB_GOODS_CATEGORY_132",title:"Швейные машинки и оверлоки"},{value:"RGB_GOODS_CATEGORY_133",title:"Электр./газ. плиты"},{value:"RGB_GOODS_CATEGORY_117",title:"Ювелирные изделия, часы"}],fa=[{value:"1",title:"Кредит",subtitle:"Оплата частями"},{value:"2",title:"Рассрочка",subtitle:"Кредит без переплат"},{value:"0",title:"Рассрочка и кредит",subtitle:""}],ma=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],staticClass:"crm-select",class:t.classes},[n("div",{staticClass:"crm-select__activator",on:{click:t.open}},[t.isValueEmpty||t.search?t._e():n("div",{staticClass:"crm-select__selected"},[t._v(" "+t._s(t.selectedValue[t.label])+" ")]),n("form-input-new",{ref:"input",attrs:{size:t.size,placeholder:t.computedPlaceholder,"for-select":"","read-only":!t.filterable,"has-value":!!t.selectedValue[t.label],"dark-placeholder":t.darkPlaceholder},on:{focus:function(e){t.focused=!0},blur:function(e){t.focused=!1}},scopedSlots:t._u([{key:"suffix",fn:function(){return[n("chevron")]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t.show?n("div",{staticClass:"crm-select__options"},t._l(t.filteredOptions,(function(e,r){return n("div",{key:r,staticClass:"crm-select__option",class:{_selected:e[t.modelField]===t.selectedValue[t.modelField]},on:{click:function(n){return t.select(e)}}},[t._v(" "+t._s(e[t.label])+" "),e[t.modelField]===t.selectedValue[t.modelField]?n("check-big"):t._e()],1)})),0):t._e()])},ha=[],va=(n("ac1f"),n("841c"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"crm-icon icon-chevron",attrs:{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M11 1.5L6 6.5L1 1.5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}})])}),ga=[],ba={name:"Chevron"},_a=ba,ka=Object(M["a"])(_a,va,ga,!1,null,null,null),ya=ka.exports,wa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"crm-icon icon-check-big",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M1.333 4.714l4.849 4.953L14.667 1",stroke:"#52AE30","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},Oa=[],Ca={name:"CheckBig"},xa=Ca,Sa=Object(M["a"])(xa,wa,Oa,!1,null,null,null),Pa=Sa.exports,ja=(n("d3b7"),n("3ca3"),n("ddb0"),n("fb6a"),n("a15b"),n("4de4"),n("3835")),Ea=(n("25f0"),n("498a"),n("1276"),n("53ca")),Ra=function(t){return Object(Ea["a"])(t)},$a=function(t){return void 0===t},Ta=function(t){return null===t},Aa=function(t){return t instanceof Date},Ia=function(t){return"number"===Ra(t)},Da=function(t){return $a(t)||Ta(t)},za=function(t){return null!==t&&"object"===Object(Ea["a"])(t)},Na=function(t){return"[object Object]"===Object.prototype.toString.call(t)},Ma=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Da(t)?"":Array.isArray(t)||Na(t)&&t.toString===Object.prototype.toString?JSON.stringify(t,null,e):String(t)},La=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"===typeof t?t.toLowerCase():t},Ba=function(t){var e=t.lastname,n=t.firstname,r=t.middlename;return"".concat(e||""," ").concat(n," ").concat(r||"").trim()},Fa=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!t)return{};var e=t.trim().split(" "),n=Object(ja["a"])(e,3),r=n[0],a=n[1],o=n[2];return{lastname:r,firstname:a,middlename:o}},qa=function(t,e){if("string"===typeof e||1===e.length)return e;var n=Math.abs(t),r=n%10===1&&n%100!==11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2;return e[r]},Ua=function(){return Math.random().toString(36).substring(2,8)},Ga=n("cd3f"),Va=n.n(Ga),Ha=function(t){var e=t.options,n=t.field,r=t.search;return e.filter((function(t){return La(t[n]).includes(La(r))}))},Wa=function(t){var e=t.options,n=t.field,r=t.search;return e.find((function(t){return La(t[n])===La(r)}))},Ka=function(t,e){var n=Va()(t),r=n[e],a="rate1"===e?n.terms[0]:n.terms[1];return a.rate=r,n},Ya={name:"Select",components:{Chevron:ya,CheckBig:Pa,FormInputNew:At},model:{prop:"value",event:"select"},props:{value:{type:[String,Number],default:"",required:!0},options:{type:Array,required:!0},error:Boolean,disabled:Boolean,size:{type:String,default:"md",validator:function(t){return["sm","md","lg"].includes(t)}},placeholder:{type:String,default:""},label:{type:[String,Number],default:"name"},modelField:{type:[String,Number],default:"name"},filterable:Boolean,darkPlaceholder:Boolean},data:function(){return{show:!1,focused:!1,search:""}},computed:{defaultData:function(){var t;return t={id:""},Object(vt["a"])(t,this.modelField,""),Object(vt["a"])(t,this.label,""),t},isValueEmpty:function(){return null===this.value||void 0===this.value||""===this.value},selectedValue:function(){return this.isValueEmpty?this.defaultData:Wa({options:this.options,field:this.modelField,search:this.value})||this.defaultData},classes:function(){var t;return t={_opened:this.show,_disabled:this.disabled,"_has-error":this.error,"_has-value":!!this.value},Object(vt["a"])(t,"_size-".concat(this.size),this.size),Object(vt["a"])(t,"_focused",this.focused),t},filteredOptions:function(){var t=Object(H["a"])(this.options);return this.search?Ha({options:t,field:this.label,search:this.search}):t},computedPlaceholder:function(){return this.isValueEmpty?this.placeholder:""}},methods:{select:function(t){this.close(),this.updateValue(t)},open:function(){this.show=!0},close:function(){this.show=!1},updateValue:function(t){this.search="",this.$emit("select",t[this.modelField],t)},clear:function(){this.updateValue(this.defaultData)}}},Za=Ya,Qa=(n("6d3f"),Object(M["a"])(Za,ma,ha,!1,null,null,null)),Ja=Qa.exports,Xa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"otp-radio-list"},t._l(t.options,(function(e,r){return n("radio",{key:r,attrs:{name:t.name,value:e.value,selected:e.value===t.value,disabled:e.disabled,count:e.count},on:{change:function(n){return t.onChange(e.value)}}},[t._t("default",null,{option:e})],2)})),1)},to=[],eo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"otp-radio",class:t.classes},[n("span",{staticClass:"otp-radio__body"},[n("input",{staticClass:"otp-radio__input",attrs:{type:"radio",name:t.name,disabled:t.disabled},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)}}}),n("span",{staticClass:"otp-radio__controls"}),n("span",{staticClass:"otp-radio__content"},[t._t("default"),Number.isInteger(t.count)?n("span",{staticClass:"otp-radio__count"},[t._v(" ("+t._s(t.count)+") ")]):t._e()],2)])])},no=[],ro={name:"Radio",props:{name:{type:String,required:!0},value:{type:String,required:!0},disabled:Boolean,selected:Boolean,count:{type:Number,default:null}},computed:{classes:function(){return{_selected:this.selected,_disabled:this.disabled}}}},ao=ro,oo=(n("e1ea"),Object(M["a"])(ao,eo,no,!1,null,null,null)),so=oo.exports,io={name:"RadioList",components:{Radio:so},props:{value:{type:String,required:!0},options:{type:Array,required:!0},name:{type:String,required:!0}},methods:{onChange:function(t){this.$emit("input",t)}}},co=io,lo=(n("77ec"),Object(M["a"])(co,Xa,to,!1,null,null,null)),uo=lo.exports,po=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-with-label"},[n("div",{staticClass:"component-with-label__label"},[t._t("label",[t._v(" "+t._s(t.label)+" ")])],2),n("div",{staticClass:"component-with-label__component"},[t._t("default")],2)])},fo=[],mo={name:"ComponentWithLabel",props:{label:{type:String,default:""},caption:{type:String,default:""}}},ho=mo,vo=(n("6f5a"),Object(M["a"])(ho,po,fo,!1,null,null,null)),go=vo.exports,bo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],staticClass:"crm-commercial-net-suggestions",class:t.classes},[n("div",{staticClass:"crm-commercial-net-suggestions__activator",on:{click:t.open}},[n("form-input-new",{ref:"input",attrs:{value:t.value,size:t.size,placeholder:t.placeholder,"for-select":""},on:{focus:function(e){t.focused=!0},blur:function(e){t.focused=!1},input:t.onInput}})],1),t.show&&t.suggestions.length>0?n("div",{staticClass:"crm-commercial-net-suggestions__options"},t._l(t.suggestions,(function(e){return n("div",{key:e.id,staticClass:"crm-commercial-net-suggestions__option",on:{click:function(n){return t.select(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0):t._e()])},_o=[],ko=n("bc3aa"),yo=n.n(ko),wo={baseURL:"/crm-poc/","Content-Type":"application/json;charset=UTF-8"},Oo=function(){return{Authorization:"Bearer ".concat(_.getToken())}},Co=yo.a.create(wo);Co.interceptors.request.use((function(t){return t.headers=Oo(),t}));var xo="".concat(sa,"/regcenters"),So="".concat(sa,"/kkos"),Po="".concat(sa,"/commercialnet"),jo=1,Eo=300,Ro=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:xo,method:"GET",params:Object(De["a"])({},e?{kko:e}:{})});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$o=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:So,method:"GET",params:Object(De["a"])({},e&&{regcenter:e})});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),To=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,o,s,i,c,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{page:jo,size:Eo},n=e.page,r=e.size,a=e.code,o=e.likename,s=e.sort,t.next=3,Co({url:Po,method:"GET",params:Object(De["a"])(Object(De["a"])(Object(De["a"])({page:n,size:r},a&&{code:a}),o&&{likename:o}),s&&{sort:s})});case 3:return i=t.sent,c=i.data,t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ao={fetchRegcenters:Ro,fetchKkos:$o,fetchCommercialNets:To},Io={name:"CommercialNetSuggestions",components:{FormInputNew:At},props:{value:{type:[String,Number],default:""},size:{type:String,default:"md"},placeholder:{type:String,default:"Торговая сеть"}},data:function(){return{show:!1,suggestions:[]}},computed:{classes:function(){return Object(vt["a"])({_opened:this.show,_disabled:this.disabled,"_has-error":this.error,"_has-value":this.value},"_size-".concat(this.size),this.size)}},mounted:function(){var t=this;this.value&&this.onInput(this.value).then((function(){t.$emit("select",Wa({options:t.suggestions,field:"name",search:t.value}))}))},methods:{open:function(){this.show=!0},close:function(){this.show=!1},updateValue:function(t){this.$emit("input",t)},onInput:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.updateValue(e),!(e.length<3))return Ao.fetchCommercialNets({page:1,size:300,likename:e}).then((function(e){var n=e.commercialNets;t.suggestions=n}))},select:function(t){var e=this;this.close(),this.$nextTick((function(){e.setCaretPosition(e.$refs.input.$refs.input,e.value.length)})),this.updateValue(t.name),this.$emit("select",t)},setCaretPosition:function(t,e){t.focus(),t.setSelectionRange(e,e)}}},Do=Io,zo=(n("dcfb"),Object(M["a"])(Do,bo,_o,!1,null,null,null)),No=zo.exports,Mo=function(){var t,e,r=this,a=r.$createElement,o=r._self._c||a;return o("div",{staticClass:"otp-side-page",class:[r.$style.root,r.$style["size-"+r.size]]},[r.blockBackground?o("div",{class:r.$style.overlay}):r._e(),o("div",{class:r.$style.container},[o("div",{ref:"overflowContainer",class:r.$style["overflow-container"],on:{scroll:r.onContentScroll}},[o("div",{class:r.$style.inner},[o("div",{class:r.$style.header},[o("div",{ref:"header",class:r.$style["header-container"]},[o("div",{class:[r.$style["header-inner"],(t={},t[r.$style.fixed]=r.isFixed,t)],style:{right:r.scrollbarWidth+"px"}},[o("div",{class:r.$style.title},[r._t("title",[r._v(" "+r._s(r.title)+" ")])],2),o("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",theme:"crm-additional",distance:16,content:"скрыть панель"},expression:"{\n                  placement: 'left',\n                  theme: 'crm-additional',\n                  distance: 16,\n                  content: 'скрыть панель',\n                }"}],class:r.$style["icon-container"],on:{click:function(t){return r.$emit("close")}}},[o("img",{class:r.$style.close,attrs:{alt:"modal-close",src:n("2ad7"),width:"24",height:"24"}})])])])]),o("div",{class:r.$style.content},[r._t("default")],2),o("div",{class:r.$style["buttons-container"]},[o("div",{class:r.$style.buttons},[o("div",{class:[r.$style["buttons-inner"],(e={},e[r.$style["with-shadow"]]=r.withShadow,e)]},[r._t("buttons"),r.$slots["cancel-button"]?o("div",{class:r.$style["cancel-button"]},[r._t("cancel-button")],2):r._e()],2)])])])])])])},Lo=[],Bo=n("6dd8"),Fo={name:"SidePage",inheritAttrs:!1,props:{title:{type:String,default:""},size:{type:String,default:"sm",validator:function(t){return["sm","md","xl"].includes(t)}},blockBackground:{type:Boolean,default:!1}},data:function(){return{isFixed:!1,withShadow:!1,hasScrollBar:!1,scrollbarWidth:0}},mounted:function(){this.withShadow=!0,this.unwatch=this.$watch("blockBackground",(function(t){document.body.style.overflow=t?"hidden":""})),this.blockBackground&&(document.body.style.overflow="hidden"),this.observeComponent()},beforeDestroy:function(){this.unwatch(),document.body.style.overflow=""},methods:{onContentScroll:function(){var t=this.$refs,e=t.header,n=t.overflowContainer;this.isFixed=e.getBoundingClientRect().top<0,this.checkScrollbar(n)},observeComponent:function(){var t=this,e=this.$refs.overflowContainer;this.checkScrollbar(e);var n=new Bo["a"]((function(){t.checkScrollbar(e)}));n.observe(e)},checkScrollbar:function(t){var e=t.offsetWidth-t.clientWidth;this.scrollbarWidth=e,this.hasScrollBar=e>0}}},qo=Fo,Uo=n("9ecf");function Go(t){this["$style"]=Uo["default"].locals||Uo["default"]}var Vo=Object(M["a"])(qo,Mo,Lo,!1,Go,null,null),Ho=Vo.exports,Wo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:"filter"===t.type?"inline-view":"block-view"},[t.isLoading?n("spinner"):[n(t.currentComponent,{ref:"regCenterComponent",tag:"component",style:t.isComponentTypeFilter&&t.style,attrs:{value:t.computedValues.regCenter,options:t.regCenters,placeholder:t.isComponentTypeFilter?"РЦ":"Выберите РЦ"},on:{select:function(e,n){var r=n.id;return t.onSelect("regCenter",e,{key:"regCenterId",value:r})}}}),n(t.currentComponent,{ref:"kkoComponent",tag:"component",style:t.isComponentTypeFilter&&t.style,attrs:{value:t.computedValues.kko,options:t.kkos,placeholder:t.isComponentTypeFilter?"ККО":"Выберите ККО",filterable:""},on:{select:function(e,n){var r=n.id;return t.onSelect("kko",e,{key:"kkoId",value:r})}}})]],2)},Ko=[],Yo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],staticClass:"crm-filter",class:t.classes},[n("div",{staticClass:"crm-filter__activator",on:{click:t.open}},[n("form-input-new",{ref:"input",attrs:{size:t.size,placeholder:t.placeholder,"font-bold":!1,"for-filter":"","read-only":!t.filterable},on:{blur:t.onBlur},scopedSlots:t._u([{key:"suffix",fn:function(){return[t.search&&t.focused?n("div",{staticClass:"crm-filter__clear",on:{mousedown:function(e){return e.stopPropagation(),t.clear(e)}}},[n("cross",{attrs:{width:"16",height:"16"}})],1):n("chevron")]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t.show?n("div",{staticClass:"crm-filter__options"},t._l(t.filteredOptions,(function(e,r){return n("div",{key:r,staticClass:"crm-filter__option",class:{_selected:e[t.modelField]===t.selected},on:{click:function(n){return t.select(e)}}},[t._v(" "+t._s(e[t.label])+" ")])})),0):t._e()])},Zo=[],Qo={name:"CrmFilter",components:{Chevron:ya,Cross:jt,FormInputNew:At},model:{prop:"value",event:"select"},props:{value:{type:[String,Number],required:!0},options:{type:Array,required:!0},error:Boolean,disabled:Boolean,size:{type:String,default:"sm",validator:function(t){return["sm","md","lg"].includes(t)}},placeholder:{type:String,default:""},label:{type:[String,Number],default:"name"},modelField:{type:[String,Number],default:"name"},filterable:Boolean},data:function(){return{selected:"",show:!1,focused:!1,search:""}},computed:{defaultData:function(){var t;return t={id:""},Object(vt["a"])(t,this.modelField,""),Object(vt["a"])(t,this.label,""),t},selectedValue:function(){return this.value&&Wa({options:this.options,field:this.modelField,search:this.value})||this.defaultData},classes:function(){return Object(vt["a"])({_opened:this.show,_disabled:this.disabled,"_has-error":this.error,"_has-value":!!this.value},"_size-".concat(this.size),this.size)},filteredOptions:function(){var t=Object(H["a"])(this.options);return this.search?Ha({options:t,field:this.label,search:this.search}):t}},mounted:function(){this.value&&this.updateValue(this.selectedValue)},methods:{select:function(t){this.close(),this.updateValue(t)},open:function(){this.focused=!0,this.show=!0},close:function(){this.focused=!1,this.show=!1},updateValue:function(t){this.selected=t[this.modelField],this.search=t[this.label],this.$emit("select",t[this.modelField],t)},clear:function(){this.search="",this.updateValue(this.defaultData)},onBlur:function(){this.search||this.clear()}}},Jo=Qo,Xo=(n("6af9"),Object(M["a"])(Jo,Yo,Zo,!1,null,null,null)),ts=Xo.exports,es=function(){return{regCenter:"",kko:""}},ns={name:"RegCenterAndKkoComponent",components:{Spinner:Xn,CrmFilter:ts,CrmSelect:Ja},inheritAttrs:!1,model:{prop:"values",event:"select"},props:{values:{type:Object,required:!0},type:{type:String,required:!0,validator:function(t){return["filter","select"].includes(t)}},width:{type:String,default:"188px"}},data:function(){return{isLoading:!1,regCenters:[],kkos:[],kkoId:null,regCenterId:null}},computed:{currentComponent:function(){return"crm-".concat(this.type)},regCenter:function(){return this.values.regCenter},kko:function(){return this.values.kko},isComponentTypeSelect:function(){return"select"===this.type},isComponentTypeFilter:function(){return"filter"===this.type},style:function(){return{maxWidth:this.width}},computedValues:function(){return Object(De["a"])(Object(De["a"])({},es()),this.values)}},watch:{regCenterId:function(t,e){var n=this;return Object(Gn["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t!==e){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,n.fetchKkos(t);case 4:n.kkoId&&(a=n.kkos.find((function(t){return t.id===n.kkoId}))||null,a||n.$refs.kkoComponent.clear());case 5:case"end":return r.stop()}}),r)})))()},regCenter:function(t){!1===!!t&&this.isComponentTypeSelect&&(this.$refs.regCenterComponent.clear(),this.$refs.kkoComponent.clear())}},created:function(){var t=this;this.isLoading=!0,Promise.all([this.fetchRegcenters(),this.fetchKkos()]).finally((function(){t.isLoading=!1}))},methods:{onSelect:function(t,e,n){this.$emit("select",Object(De["a"])(Object(De["a"])({},this.values),{},Object(vt["a"])({},t,e)),n);var r=n.key,a=n.value;this[r]=a},fetchRegcenters:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=H["a"],e.next=3,Ao.fetchRegcenters();case 3:e.t1=e.sent,t.regCenters=(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()},fetchKkos:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.t0=H["a"],n.next=3,Ao.fetchKkos(t);case 3:n.t1=n.sent,e.kkos=(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})))()}}},rs=ns,as=(n("d0e2"),Object(M["a"])(rs,Wo,Ko,!1,null,"8e90b608",null)),os=as.exports,ss={COMMERCIAL_NET:{value:"commercialNet",title:"independent"},INDEPENDENT:{value:"independent",title:"Независимый торговец"}},is=[{value:"commercialNet",title:"Торговая сеть"},{value:"independent",title:"Независимый торговец"}],cs={regCenter:"",kko:"",kkoId:0,name:"",code:"",type:"commercialNet",commercialNet:"",commercialNetId:0,status:"on"},ls={name:"EditParams",components:{SidePage:Ho,CrmSelect:Ja,FormItem:it,FormInputNew:At,RadioList:uo,ComponentWithLabel:go,CrmButton:ie,CommercialNetSuggestions:No,RegCenterAndKkoComponent:os},props:{organization:{type:[Object,null],default:null}},data:function(){return{fields:Object(De["a"])({},cs),types:is,statuses:ia,selectedCuratorLogin:""}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("reference",["regcenters","kkos"])),Object(Vn["e"])("organization",["currentOrganization"])),Object(Vn["e"])("user",["curatorsTo"])),{},{isNew:function(){return!this.organization},title:function(){return this.isNew?"Заведение новой ТО":"Редактирование ТО"},selectedCurator:function(){var t=this;return this.curatorsTo.find((function(e){return e.login===t.selectedCuratorLogin}))},isIndependentCommercialNet:function(){return this.fields.type===ss.INDEPENDENT.value}}),created:function(){this.setDefaultParams()},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("organization",["addOrganization","updateOrganization"])),{},{close:function(){this.$emit("close")},setDefaultParams:function(){if(this.isNew)return this.fields=Object(De["a"])({},cs),void(this.selectedCuratorLogin="");this.fields=Object(De["a"])({},this.organization),this.selectedCuratorLogin=this.organization.curator||"",this.fields.commercialNetId=this.organization.commercialNetId||1},save:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=Object(De["a"])(Object(De["a"])({},t.fields),{},{curator:null===(n=t.selectedCurator)||void 0===n?void 0:n.login}),!t.isNew){e.next=6;break}return e.next=4,t.addOrganization(r);case 4:e.next=8;break;case 6:return e.next=8,t.updateOrganization(r);case 8:t.close();case 9:case"end":return e.stop()}}),e)})))()},reset:function(){this.setDefaultParams()},setCommercialNet:function(t){t===ss.INDEPENDENT.value?(this.fields.commercialNet=ss.INDEPENDENT.title,this.fields.commercialNetId=1):this.fields.commercialNet=""},setField:function(t){var e=t.data,n=t.fieldFrom,r=t.fieldTo;this.fields[r]=e[n]},setRegCenterAndKkoId:function(t){var e=t.key,n=t.value;this.fields[e]=n}})},us=ls,ds=Object(M["a"])(us,aa,oa,!1,null,null,null),ps=ds.exports,fs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{class:t.$style.filters},[n("div",{class:[t.$style.filter,t.$style.search]},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск"},on:{input:t.debouncedSearch},model:{value:t.filterName,callback:function(e){t.filterName=e},expression:"filterName"}})],1),n("div",{class:t.$style.filter},[n("commercial-net-suggestions",{attrs:{size:"sm"},on:{input:t.onFilterCommercialNetNameChange,select:t.onFilterCommercialNetNameSelect},model:{value:t.filterCommercialNetName,callback:function(e){t.filterCommercialNetName=e},expression:"filterCommercialNetName"}})],1),n("div",{class:t.$style.filter},[n("crm-filter",{attrs:{value:t.filterRegCenterId,"model-field":"id",options:t.regCenters,placeholder:"РЦ",size:"sm"},on:{select:t.onSelectRegCenter}})],1),n("div",{class:t.$style.filter},[n("crm-filter",{attrs:{value:t.filterKkoId,"model-field":"id",options:t.kkos,placeholder:"ККО",size:"sm"},on:{select:t.onSelectKko}})],1)]),n("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,data:t.tableItems,fields:t.fields,"no-data-template":"Нет данных","sort-order":t.defaultSort},scopedSlots:t._u([{key:"name",fn:function(e){return[n("crm-link",{attrs:{to:{name:"organization",params:{id:e.rowData.id}}}},[n("status",{attrs:{variant:e.rowData.status}},[t._v(" "+t._s(e.rowData.name)+" ")])],1)]}}])}),n("pagination",{attrs:{"per-page":t.perPage,total:t.total,"current-page":t.currentPage},on:{onChangePage:t.onChangePage,onPerPageChange:t.onPerPageChange}})],1)},ms=[],hs=n("c3d0"),vs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"status",class:t.classes},[n("div",{staticClass:"status__circle"}),t.hasDefaultSlot?n("div",{staticClass:"status__body"},[t._t("default")],2):t._e()])},gs=[],bs={name:"Status",props:{variant:{type:String,default:"on",validator:function(t){return["on","off"].includes(t)}}},computed:{classes:function(){var t;return t={},Object(vt["a"])(t,"_status-".concat(this.variant),this.variant),Object(vt["a"])(t,"_has-slot",this.hasDefaultSlot),t},hasDefaultSlot:function(){return!!this.$slots.default}}},_s=bs,ks=(n("dd1b"),Object(M["a"])(_s,vs,gs,!1,null,null,null)),ys=ks.exports,ws=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pagination-wrap"},[r("div",{staticClass:"pagination-info"},[t._v(" Показано "+t._s(t.firstItemIndex)+"-"+t._s(t.lastItemIndex)+" из "+t._s(t.total)+" записей ")]),r("div",{staticClass:"pagination-menu"},[r("a",{class:["item",t.isOnFirstPage?"disabled":""],on:{click:function(e){return t.onChangePage(1)}}},[r("img",{attrs:{src:n("eecd"),alt:"first"}})]),r("a",{class:["item",t.isOnFirstPage?"disabled":""],on:{click:function(e){return t.onChangePage("prev")}}},[r("img",{attrs:{src:n("d0fe"),alt:"prev"}})]),t.notEnoughPages?[t._l(t.lastPage,(function(e,n){return[r("a",{key:n,class:["item",t.isCurrentPage(n+1)?"active":""],on:{click:function(e){return t.onChangePage(n+1)}}},[r("span",[t._v(t._s(e))])])]}))]:[t._l(t.windowSize,(function(e,n){return[r("a",{key:n,class:["item icon",t.isCurrentPage(t.windowStart+n)?"active":""],on:{click:function(e){return t.onChangePage(t.windowStart+n)}}},[r("span",[t._v(t._s(t.windowStart+e-1))])])]}))],r("a",{class:["item",t.isOnLastPage?"disabled":""],on:{click:function(e){return t.onChangePage("next")}}},[r("img",{attrs:{src:n("88ee"),alt:"next"}})]),r("a",{class:["item",t.isOnLastPage?"disabled":""],on:{click:function(e){return t.onChangePage(t.lastPage)}}},[r("img",{attrs:{src:n("2a9a"),alt:"last"}})])],2),r("div",{staticClass:"per-page-wrap"},[r("div",[t._v("На странице")]),r("div",{staticClass:"per-page-selector"},[r("crm-select",{attrs:{value:t.perPage,options:t.options,label:"value","model-field":"value",size:"sm"},on:{select:t.onSelect}})],1),r("div",[t._v("записей")])])])},Os=[],Cs={components:{CrmSelect:Ja},props:{total:{type:Number,required:!0},currentPage:{type:Number,required:!0},perPage:{type:Number,required:!0},onEachSide:{type:Number,default:2}},data:function(){return{options:[{value:5},{value:10},{value:15},{value:20}]}},computed:{firstItemIndex:function(){return(this.currentPage-1)*this.perPage+1},lastItemIndex:function(){var t=this.firstItemIndex+this.perPage-1;return Math.min(this.total,t)},lastPage:function(){return Math.ceil(this.total/this.perPage)},isOnFirstPage:function(){return 1===this.currentPage},isOnLastPage:function(){return this.currentPage===this.lastPage},notEnoughPages:function(){return this.lastPage<2*this.onEachSide+4},windowSize:function(){return 2*this.onEachSide+1},windowStart:function(){return this.currentPage<=this.onEachSide?1:this.currentPage>=this.lastPage-this.onEachSide?this.lastPage-2*this.onEachSide:this.currentPage-this.onEachSide}},methods:{onChangePage:function(t){var e=t;if(!("prev"===t&&(e=this.currentPage-1,e<=0))){if("next"===t){e=this.currentPage+1;var n=Math.ceil(this.total/this.perPage);if(e>n)return}this.$emit("onChangePage",e)}},onSelect:function(t){this.$emit("onPerPageChange",t)},isCurrentPage:function(t){return t===this.currentPage}}},xs=Cs,Ss=(n("41c7"),Object(M["a"])(xs,ws,Os,!1,null,"7f7e1491",null)),Ps=Ss.exports,js=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{class:t.classes,attrs:{to:t.to,tag:t.tag}},[t._t("default")],2)},Es=[],Rs=(n("9911"),{name:"Link",props:{type:{type:String,default:"black"},to:{type:[String,Object],default:""},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var t;return t={},Object(vt["a"])(t,this.$style.link,!0),Object(vt["a"])(t,this.$style[this.type],!0),Object(vt["a"])(t,this.$style.disabled,this.disabled),t},tag:function(){return this.to?"a":"span"}}}),$s=Rs,Ts=n("ddd9");function As(t){this["$style"]=Ts["default"].locals||Ts["default"]}var Is=Object(M["a"])($s,js,Es,!1,As,null,null),Ds=Is.exports,zs="".concat(sa,"/tos"),Ns=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:e?"".concat(zs,"/attr"):zs,method:"GET",params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Ms=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:zs,method:"POST",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ls=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:"".concat(zs,"/").concat(e),method:"GET"});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Bs=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:zs,method:"PUT",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Fs=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({method:"GET",url:"".concat(zs,"/").concat(e,"/creditproduct"),params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),qs={fetchOrganizations:Ns,addOrganization:Ms,fetchOrganizationById:Ls,updateOrganization:Bs,fetchOrganizationCreditProducts:Fs},Us=n("f7fe"),Gs=n.n(Us),Vs={name:"OrganizationsTable",components:{Vuetable:hs["a"],Status:ys,FormInputNew:At,CrmFilter:ts,CommercialNetSuggestions:No,Pagination:Ps,CrmLink:Ds},data:function(){return{fields:[{name:"name",sortField:"name",title:"Наименование ТО",width:"30%"},{name:"regCenter",sortField:"regCenter",title:"РЦ",width:"15%"},{name:"kko",sortField:"kko",label:"ККО",width:"15%"},{name:"code",sortField:"code",title:"Код ТО",width:"10%"},{name:"commercialNet",sortField:"commercialNet",title:"Торговая сеть",width:"15%"}],filterName:"",filterCommercialNetName:"",filterKkoId:"",filterRegCenterId:"",sortField:"",sortDirection:"",regCenters:[],kkos:[],currentPage:1,perPage:10,total:0,tableItems:[],debouncedSearch:function(){},defaultSort:[{direction:"asc",field:"name",sortField:"name"}]}},computed:{lastPage:function(){return Math.ceil(this.total/this.perPage)}},created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ao.fetchRegcenters();case 2:return t.regCenters=e.sent,e.next=5,t.getKkos();case 5:return t.kkos=e.sent,e.next=8,t.fetchData();case 8:t.debouncedSearch=Gs()((function(){t.currentPage=1,t.fetchData()}),500);case 9:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;this.$unwatch=this.$watch("$refs.vuetable.sortOrder",(function(e){if(!e||!e[0])return t.sortField="",void(t.sortDirection="");t.sortField=e[0].field,t.sortDirection=e[0].direction,t.fetchData()}))},beforeDestroy:function(){this.$unwatch()},methods:{fetchData:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({page:t.currentPage,size:t.perPage},t.sortField&&{sort:"".concat(t.sortField,",").concat(t.sortDirection)}),t.filterName&&{likename:t.filterName}),t.filterCommercialNetName&&{commercialnet:t.filterCommercialNetName}),t.filterRegCenterId&&{regcenter:t.filterRegCenterId}),t.filterKkoId&&{kko:t.filterKkoId}),e.next=3,qs.fetchOrganizations(!1,n);case 3:r=e.sent,t.tableItems=r.organizations,t.total=r.totalItems;case 6:case"end":return e.stop()}}),e)})))()},onChangePage:function(t){this.currentPage=t,this.fetchData()},onPerPageChange:function(t){this.perPage!==t&&(this.perPage=t,this.currentPage=1,this.fetchData())},onFilterCommercialNetNameSelect:function(){this.fetchData()},onFilterCommercialNetNameChange:function(t){t||this.fetchData()},onSelectRegCenter:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.filterRegCenterId=t,n.next=3,e.getKkos(t);case 3:return e.kkos=n.sent,r=e.kkos.find((function(t){return t.id===e.filterKkoId})),r||(e.filterKkoId=""),n.next=8,e.fetchData();case 8:case"end":return n.stop()}}),n)})))()},getKkos:function(){var t=arguments;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:null,e.abrupt("return",Ao.fetchKkos(n));case 2:case"end":return e.stop()}}),e)})))()},onSelectKko:function(t){this.filterKkoId=t,this.fetchData()}}},Hs=Vs,Ws=n("c826");function Ks(t){this["$style"]=Ws["default"].locals||Ws["default"]}var Ys=Object(M["a"])(Hs,fs,ms,!1,Ks,null,null),Zs=Ys.exports,Qs={name:"Organizations",components:{PageWrapper:ir,CrmButton:ie,UpdateButton:ra,EditOrganization:ps,OrganizationsTable:Zs},data:function(){return{showModal:!1,isLoading:!1}},created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.fetchCuratorsTo();case 3:t.isLoading=!1;case 4:case"end":return e.stop()}}),e)})))()},methods:Object(De["a"])({},Object(Vn["b"])("user",["fetchCuratorsTo"]))},Js=Qs,Xs=Object(M["a"])(Js,qn,Un,!1,null,null,null),ti=Xs.exports,ei=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"organization-page"},[n("page-wrapper",{attrs:{"is-loading":t.isLoading},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.currentOrganization.name)+" ")]},proxy:!0},{key:"breadcrumbs",fn:function(){return[n("breadcrumbs")]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{on:{click:function(e){t.showModal=!0}}},[t._v(" Добавить ТТ ")]),n("update-button",{attrs:{icon:"upload"}},[t._v(" Загрузить несколько ТО ")]),n("update-button",{attrs:{icon:"download"}},[t._v(" Скачать в xlsx ")])]},proxy:!0},{key:"tabs",fn:function(){return[n("tabs",{attrs:{tabs:t.tabs,"use-query":""},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}})]},proxy:!0},{key:"default",fn:function(){return[n(t.currentTab,{tag:"component",attrs:{organization:t.currentOrganization,"organization-id":t.organizationId},on:{save:t.fetchOrganization}})]},proxy:!0}])}),t.showModal?n("edit-shop",{on:{close:function(e){t.showModal=!1}}}):t._e()],1)},ni=[],ri=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"otp-tabs"},t._l(t.tabs,(function(e,r){return n("div",{key:r,staticClass:"otp-tabs__tab",class:t.setClasses(e.value),on:{click:function(n){return t.onTabSelect(e.value)}}},[t._v(" "+t._s(e.title)+" ")])})),0)},ai=[],oi=(n("5319"),{name:"Tabs",props:{tabs:{type:Array,required:!0},value:{type:String,required:!0},status:{type:String,default:""},useQuery:Boolean},data:function(){return{currentTab:this.value}},created:function(){var t=this.getQuery();t&&this.onTabSelect(t)},methods:{setClasses:function(t){var e=[ua.AGREEMENT_CREATED_PAPERLESS,ua.AGREEMENT_CREATED_PAPERLESS_ES,ua.AGREEMENT_CREATED_PAPER_TECH,ua.AGREEMENT_SIGN_FAILED].includes(this.status),n=da[this.status];return Object(vt["a"])({_selected:this.isSelected(t),"_with-circle":"documents"===t&&e},"_".concat(n),"documents"===t&&e)},isSelected:function(t){return this.currentTab===t},onTabSelect:function(t){this.currentTab!==t&&(this.setQuery(t),this.currentTab=t,this.$emit("input",t))},setQuery:function(t){if(this.useQuery&&this.getQuery()!==t){var e=Object(De["a"])(Object(De["a"])({},this.$route.query),{},{tab:t});this.$router.replace({query:e})}},getQuery:function(){return this.$route.query.tab||""}}}),si=oi,ii=(n("6f10"),Object(M["a"])(si,ri,ai,!1,null,null,null)),ci=ii.exports,li=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("ul",t._l(t.breadcrumbs,(function(e,r){var a;return n("li",{key:r,class:(a={},a[t.$style.link]=!!e.name,a),on:{click:function(e){return t.routeTo(r)}}},[t._v(" "+t._s(e.caption)+" ")])})),0)])},ui=[],di={name:"Breadcrumbs",computed:{breadcrumbs:function(){return this.$route.meta.breadcrumb}},methods:{routeTo:function(t){var e=this.breadcrumbs[t];e.name&&this.$router.push(Object(De["a"])({name:e.name},e.id?{params:{id:this.$route.params.id}}:{}))}}},pi=di,fi=n("7871");function mi(t){this["$style"]=fi["default"].locals||fi["default"]}var hi=Object(M["a"])(pi,li,ui,!1,mi,null,null),vi=hi.exports,gi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"side-page"}},[n("side-page",{attrs:{size:"md","block-background":!0},on:{close:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.title)+" ")]},proxy:!0},{key:"default",fn:function(){return[n("div",{staticClass:"edit-shop"},[n("reg-center-and-kko-component",{attrs:{type:"select"},on:{select:function(e,n){var r=n.key,a=n.value;return t.setRegCenterAndKkoId({key:r,value:a})}},model:{value:t.fields,callback:function(e){t.fields=e},expression:"fields"}}),n("form-item",{attrs:{label:"Код Точки"}},[n("form-input-new",{attrs:{placeholder:"123456789",size:"md"},model:{value:t.fields.code,callback:function(e){t.$set(t.fields,"code",e)},expression:"fields.code"}})],1),n("form-item",{attrs:{label:"Наименование Точки"}},[n("form-input-new",{attrs:{placeholder:"ООО Сыч",size:"md"},model:{value:t.fields.name,callback:function(e){t.$set(t.fields,"name",e)},expression:"fields.name"}})],1),n("form-item",{attrs:{label:"Адрес ТТ"}},[n("form-input-new",{attrs:{placeholder:"г. Тула, ул.Севастьянова, 9а",size:"md"},model:{value:t.fields.address,callback:function(e){t.$set(t.fields,"address",e)},expression:"fields.address"}})],1),n("form-item",{staticClass:"crm-mb-24",attrs:{label:"Куратор Торговой Точки"}},[n("crm-select",{attrs:{options:t.curatorsTt,placeholder:"Выберите из списка",size:"md",label:"fio","model-field":"login"},on:{select:function(e,n){return t.setCuratorLogin(n)}},model:{value:t.fields.curator,callback:function(e){t.$set(t.fields,"curator",e)},expression:"fields.curator"}})],1),n("form-item",[n("checkbox",{attrs:{title:"Интернет магазин"},model:{value:t.isOnlineStore,callback:function(e){t.isOnlineStore=e},expression:"isOnlineStore"}})],1),t.isOnlineStore?n("form-item",[n("form-input-new",{attrs:{placeholder:"https://domennoeimya.ru",size:"md"},model:{value:t.fields.url,callback:function(e){t.$set(t.fields,"url",e)},expression:"fields.url"}})],1):t._e(),n("form-item",[n("checkbox",{attrs:{title:"Телефонная технология"},model:{value:t.fields.useTel,callback:function(e){t.$set(t.fields,"useTel",e)},expression:"fields.useTel"}})],1),n("form-item",{staticClass:"crm-mb-32"},[n("checkbox",{attrs:{title:"Верификация партнером"},model:{value:t.fields.useVerification,callback:function(e){t.$set(t.fields,"useVerification",e)},expression:"fields.useVerification"}})],1)],1)]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{attrs:{design:"outline"},on:{click:function(e){t.isNew?t.saveAndReset():t.reset()}}},[t._v(" "+t._s(t.isNew?"Добавить еще ТТ":"Сбросить")+" ")]),n("crm-button",{on:{click:t.saveAndClose}},[t._v(" Сохранить ")])]},proxy:!0},{key:"cancel-button",fn:function(){return[t.isNew?n("div",{on:{click:t.close}},[t._v(" Закрыть ")]):t._e()]},proxy:!0}])})],1)},bi=[],_i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"otp-checkbox",class:t.classes},[n("input",{staticClass:"otp-checkbox__control",attrs:{type:"checkbox",disabled:t.disabled},domProps:{checked:t.checked},on:{change:t.onChange,"v-on:keydown":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.onChange(e)}}}),n("div",{staticClass:"otp-checkbox__inner"},[n("div",{staticClass:"otp-checkbox__box"},[n(t.icon,{tag:"component",staticClass:"otp-checkbox__check"})],1),n("div",{staticClass:"otp-checkbox__content"},[n("div",{staticClass:"otp-checkbox__title"},[t._t("title",[t._v(" "+t._s(t.title)+" ")])],2),t.hasCaption?n("div",{staticClass:"otp-checkbox__caption"},[t._t("caption",[t._v(" "+t._s(t.caption)+" ")])],2):t._e()])])])},ki=[],yi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"12",height:"9",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.56 3.44A1.5 1.5 0 10.44 5.56l3 3a1.5 1.5 0 002.12 0l6-6A1.5 1.5 0 009.44.44L4.5 5.378l-1.94-1.94z",fill:"currentColor"}})])},wi=[],Oi={name:"IconCheck"},Ci=Oi,xi=Object(M["a"])(Ci,yi,wi,!1,null,null,null),Si=xi.exports,Pi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"8",height:"6",viewBox:"0 0 8 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.70711 2.95989C1.31658 2.56936 0.683418 2.56936 0.292893 2.95989C-0.0976311 3.35041 -0.0976311 3.98357 0.292893 4.3741L2.29289 6.3741C2.68342 6.76462 3.31658 6.76462 3.70711 6.3741L7.70711 2.3741C8.09763 1.98357 8.09763 1.35041 7.70711 0.959885C7.31658 0.569361 6.68342 0.569361 6.29289 0.959885L3 4.25278L1.70711 2.95989Z",fill:"white"}})])},ji=[],Ei={name:"IconCheckSmall"},Ri=Ei,$i=Object(M["a"])(Ri,Pi,ji,!1,null,"302b55ef",null),Ti=$i.exports,Ai=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"8",height:"3",viewBox:"0 0 8 3",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("rect",{attrs:{y:"0.666992",width:"8",height:"2",rx:"1",fill:"white"}})])},Ii=[],Di={name:"Minus"},zi=Di,Ni=Object(M["a"])(zi,Ai,Ii,!1,null,"f4d0cd58",null),Mi=Ni.exports,Li={name:"Checkbox",components:{IconCheck:Si,IconCheckSmall:Ti,Minus:Mi},inheritAttrs:!1,model:{prop:"checked",event:"change"},props:{checked:Boolean,error:Boolean,disabled:Boolean,title:{type:String,default:""},caption:{type:String,default:""},size:{type:String,default:"md",validator:function(t){return["sm","md"].includes(t)}},icon:{type:String,default:"iconCheck",validator:function(t){return["iconCheck","minus","iconCheckSmall"].includes(t)}}},computed:{classes:function(){return Object(vt["a"])({_checked:this.checked,_disabled:this.disabled,_error:this.error,"_has-content":this.hasContent,"_has-caption":this.hasCaption},"_size-".concat(this.size),this.size)},hasTitle:function(){return this.title||this.$slots.title},hasCaption:function(){return this.caption||this.$slots.caption},hasContent:function(){return this.hasTitle||this.hasCaption}},methods:{onChange:function(t){this.$emit("change",t.target.checked)}}},Bi=Li,Fi=(n("9dfb"),Object(M["a"])(Bi,_i,ki,!1,null,null,null)),qi=Fi.exports,Ui={RETAIL:"RETAIL",INTERNET:"INTERNET"},Gi={regCenter:"",kko:"",kkoId:0,code:"",name:"",address:"",curator:"",curatorFio:"",url:"",useTel:!1,useVerification:!1,status:"on"},Vi={name:"EditShop",components:{SidePage:Ho,CrmSelect:Ja,FormItem:it,FormInputNew:At,Checkbox:qi,CrmButton:ie,RegCenterAndKkoComponent:os},props:{shopId:{type:Number,default:void 0},organizationId:{type:[Object,Number],default:null}},data:function(){return{fields:Object(De["a"])({},Gi),isOnlineStore:!1}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("reference",["regcenters","kkos"])),Object(Vn["e"])("user",["curatorsTt"])),Object(Vn["c"])("shop",["getShopById"])),{},{title:function(){return this.isNew?"Добавление ТТ":"Редактирование ТТ"},isNew:function(){return void 0===this.shopId},currentShop:function(){return this.getShopById(this.shopId)},shopType:function(){return this.isOnlineStore?Ui.INTERNET:Ui.RETAIL},orgId:function(){return+this.$route.params.id||this.currentShop.orgId}}),watch:{isOnlineStore:function(t){t&&this.fields.url||(this.fields.url=t?"":null)}},mounted:function(){this.fetchCuratorsTt(),this.isNew||this.setValues(this.currentShop)},methods:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("shop",["addShop","updateShop","fetchShops"])),Object(Vn["b"])("user",["fetchCuratorsTt"])),{},{setValues:function(t){this.fields=Object(De["a"])(Object(De["a"])({},t),{},{curator:t.curator||"",curatorFio:t.curatorFio||""}),this.isOnlineStore=t.type===Ui.INTERNET},setCuratorLogin:function(t){var e=t.login;this.fields.curator=e},reset:function(){this.organizationId?this.fields=Object(De["a"])({},Gi):this.setValues(this.currentShop)},save:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(De["a"])(Object(De["a"])({},t.fields),{},{orgId:t.orgId,type:t.shopType}),""===n.curator&&delete n.curator,!t.isNew){e.next=7;break}return e.next=5,t.addShop(n);case 5:e.next=9;break;case 7:return e.next=9,t.updateShop(n);case 9:if(!t.organizationId){e.next=12;break}return e.next=12,t.fetchShops({to:"".concat(t.organizationId)});case 12:t.$emit("save");case 13:case"end":return e.stop()}}),e)})))()},close:function(){this.$emit("close")},saveAndClose:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.save();case 2:t.close();case 3:case"end":return e.stop()}}),e)})))()},saveAndReset:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.save();case 2:t.reset();case 3:case"end":return e.stop()}}),e)})))()},setRegCenterAndKkoId:function(t){var e=t.key,n=t.value;this.fields[e]=n}})},Hi=Vi,Wi=(n("93fb"),Object(M["a"])(Hi,gi,bi,!1,null,null,null)),Ki=Wi.exports,Yi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style.list},[n("detail-item",{attrs:{title:"Региональный центр"}},[t._v(" "+t._s(t.organization.regCenter)+" ")]),n("detail-item",{attrs:{title:"Торговая сеть"}},[t._v(" "+t._s(t.organization.commercialNet)+" ")]),n("detail-item",{attrs:{title:"Кредитно кассовый офис"}},[t._v(" "+t._s(t.organization.kko)+" ")]),n("detail-item",{attrs:{title:"Наименование Организации"}},[t._v(" "+t._s(t.organization.name)+" ")]),n("detail-item",{attrs:{title:"Код Организации","no-margin-bottom":""}},[t._v(" "+t._s(t.organization.code)+" ")]),n("detail-item",{attrs:{title:"Статус ТО","no-margin-bottom":""}},[n("status",{attrs:{variant:t.organization.status}},[t._v(" "+t._s("on"===t.organization.status?"Активна":"Неактивна")+" ")])],1)],1),n("update-button",{attrs:{icon:"edit","icon-height":"16","icon-width":"16"},on:{click:function(e){t.showModal=!0}}},[t._v(" Редактировать параметры ")]),t.showModal?n("edit-organization",{attrs:{organization:t.organization},on:{close:function(e){t.showModal=!1},save:function(e){return t.$emit("save")}}}):t._e()],1)},Zi=[],Qi=function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{class:(t={},t[e.$style.root]=!0,t[e.$style["no-mb"]]=e.noMarginBottom,t)},[r("div",{class:e.$style.label},[e._v(" "+e._s(e.title)+" ")]),r("div",{class:e.$style.value},[e._t("default")],2)])},Ji=[],Xi={name:"DetailItem",props:{title:{type:String,default:""},noMarginBottom:Boolean}},tc=Xi,ec=n("f0e5");function nc(t){this["$style"]=ec["default"].locals||ec["default"]}var rc=Object(M["a"])(tc,Qi,Ji,!1,nc,null,null),ac=rc.exports,oc={name:"Params",components:{UpdateButton:ra,EditOrganization:ps,Status:ys,DetailItem:ac},inheritAttrs:!1,props:{organization:{type:Object,default:function(){return{}}}},data:function(){return{showModal:!1}}},sc=oc,ic=n("bfaf");function cc(t){this["$style"]=ic["default"].locals||ic["default"]}var lc=Object(M["a"])(sc,Yi,Zi,!1,cc,null,null),uc=lc.exports,dc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shops-table-block"},[n("div",{staticClass:"shops-page__filters"},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("crm-filter",{attrs:{options:t.kkos,placeholder:"ККО",filterable:""},model:{value:t.kko,callback:function(e){t.kko=e},expression:"kko"}}),n("crm-filter",{attrs:{options:t.curatorsTt,placeholder:"Куратор",label:"fio","model-field":"fio"},model:{value:t.curator,callback:function(e){t.curator=e},expression:"curator"}})],1),t.isLoading?n("spinner"):n("shops-table",{attrs:{items:t.shops,filter:t.search,curator:t.curator,kko:t.kko},on:{"on-name-click":t.onShopClick}}),t.isModalDetails?n("shop-details",{attrs:{"shop-id":t.shopId},on:{edit:t.onShopEdit,close:t.onCloseModal}}):t._e(),t.isModalEdit?n("edit-shop",{attrs:{"shop-id":t.shopId,"organization-id":t.organizationId},on:{close:t.onCloseModal}}):t._e()],1)},pc=[],fc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("vuetable",{attrs:{"api-mode":!1,data:t.filteredShops,fields:t.headers,"no-data-template":"Нет данных",css:{tableBodyClass:"organization-shops-table"}},scopedSlots:t._u([{key:"code",fn:function(e){var r=e.rowData;return[n("status",{attrs:{variant:r.status}},[t._v(" "+t._s(r.code)+" ")])]}},{key:"name",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"crm-link-black",on:{click:function(e){return t.$emit("on-name-click",r.id)}}},[t._v(" "+t._s(r.name)+" ")])]}},{key:"type",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"text-align-right"},[t._v(" "+t._s("INTERNET"===r.type?"Да":"Нет")+" ")])]}}])})],1)},mc=[],hc=[{name:"code",title:"Код ТТ"},{name:"name",title:"Наименование ТТ"},{name:"regCenter",title:"РЦ"},{name:"kko",title:"ККО"},{name:"curatorFio",title:"Куратор ТТ"},{name:"type",title:"Интернет<br> - магазин"}],vc={name:"ShopsTable",components:{Status:ys,Vuetable:hs["a"]},inheritAttrs:!1,props:{items:{type:Array,default:function(){return[]}},curator:{type:String,default:""},kko:{type:String,default:""},filter:{type:String,default:""}},data:function(){return{headers:hc}},computed:{filteredShops:function(){return this.items.filter(this.filterByName).filter(this.filterByKko).filter(this.filterByCurator)}},methods:{filterByName:function(t){return!this.filter||t.name.toLowerCase().includes(this.filter.toLowerCase())},filterByKko:function(t){return!this.kko||t.kko===this.kko},filterByCurator:function(t){return!this.curator||t.curatorFio===this.curator}}},gc=vc,bc=(n("7436"),Object(M["a"])(gc,fc,mc,!1,null,null,null)),_c=bc.exports,kc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"side-page",disabled:!0}},[n("side-page",{attrs:{size:"sm"},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{class:t.$style["title-wrap"]},[t._v(" Параметры ТТ "),n("div",{class:[t.$style["status-wrap"],"on"===t.currentShop.status?t.$style.active:t.$style.inactive]},[n("status",{attrs:{variant:t.currentShop.status}},[t._v(" "+t._s("on"===t.currentShop.status?"Активна":"Неактивна")+" ")])],1)])]},proxy:!0},{key:"default",fn:function(){return[n("detail-item",{attrs:{title:"Код ТТ"}},[n("copyable-element",{attrs:{content:t.currentShop.code}},[t._v(" "+t._s(t.currentShop.code)+" ")])],1),n("detail-item",{attrs:{title:"Наименование Точки"}},[t._v(" "+t._s(t.currentShop.name)+" ")]),"shops"===t.$route.name?n("detail-item",{attrs:{title:"Наименование ТО"}},[n("crm-link",{attrs:{to:{name:"organization",params:{id:t.currentShop.orgId}}}},[t._v(" "+t._s(t.currentShop.orgName)+" ")])],1):t._e(),n("detail-item",{attrs:{title:"Региональный центр"}},[t._v(" "+t._s(t.currentShop.regCenter)+" ")]),n("detail-item",{attrs:{title:"Кредитно кассовый офис"}},[t._v(" "+t._s(t.currentShop.kko)+" ")]),n("detail-item",{attrs:{title:"Адрес ТТ"}},[n("copyable-element",{attrs:{content:t.currentShop.address}},[t._v(" "+t._s(t.currentShop.address)+" ")])],1),n("detail-item",{attrs:{title:"Куратор ТТ"}},[t._v(" "+t._s(t.currentShop.curator)+" ")]),t.currentShop.url?n("detail-item",{attrs:{title:"Интернет магазин"}},[n("copyable-element",{attrs:{content:t.currentShop.url}},[n("otp-simple-link",{attrs:{target:"_blank",href:t.currentShop.url}},[t._v(" "+t._s(t.currentShop.url)+" ")])],1)],1):t._e()]},proxy:!0},{key:"buttons",fn:function(){return[t.editable?n("crm-button",{attrs:{design:"outline"},on:{click:t.edit}},[t._v(" Редактировать ")]):t._e()]},proxy:!0},{key:"cancel-button",fn:function(){return[n("div",{on:{click:t.close}},[t._v(" Закрыть ")])]},proxy:!0}])})],1)},yc=[],wc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[t.content?[t._t("default"),t.disabled?t._e():n("otp-icon-holder",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right",theme:"crm-additional",content:"копировать"},expression:"{\n        placement: 'right',\n        theme: 'crm-additional',\n        content: 'копировать',\n      }"}],on:{click:t.copy}},[n("copy")],1),t.disabled?n("span",{class:t.$style.message},[t._v(" скопировано ")]):t._e()]:n("div",[t._v(" — ")])],2)},Oc=[],Cc=n("f904"),xc=n.n(Cc),Sc=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return xc.a&&xc()(t)},Pc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("rect",{attrs:{width:"16",height:"16",rx:"4"}}),n("path",{attrs:{"clip-rule":"evenodd",d:"M10.75 14.071c0 .516-.41.934-.917.934H3.417a.925.925 0 01-.917-.934V5.668c0-.515.41-.933.917-.933h4.662c.243 0 .476.098.648.273l1.755 1.787a.942.942 0 01.268.66v6.616z",stroke:"currentColor","stroke-width":"1.33","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M5.25 4.735V1.934c0-.516.41-.934.917-.934h4.662c.243 0 .476.098.648.273l1.755 1.788a.942.942 0 01.268.66v6.615c0 .516-.41.934-.917.934H10.75",stroke:"currentColor","stroke-width":"1.33","stroke-linecap":"round","stroke-linejoin":"round"}})])},jc=[],Ec={name:"Copy"},Rc=Ec,$c=Object(M["a"])(Rc,Pc,jc,!1,null,"01d3fe8e",null),Tc=$c.exports,Ac=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.$style.root,t.hasText&&t.$style["has-text"]],style:t.styles,on:{click:function(e){return t.$emit("click",e)}}},[n("div",{class:t.$style.inner},[t._t("default"),t.hasText?n("div",{class:t.$style.text},[t._v(" "+t._s(t.text)+" ")]):t._e()],2)])},Ic=[],Dc={name:"OtpIconHolder",props:{width:{type:Number,default:24},height:{type:Number,default:24},text:{type:String,default:""}},computed:{styles:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}},hasText:function(){return this.text.length>0}}},zc=Dc,Nc=n("169e");function Mc(t){this["$style"]=Nc["default"].locals||Nc["default"]}var Lc=Object(M["a"])(zc,Ac,Ic,!1,Mc,null,null),Bc=Lc.exports,Fc={name:"CopyableElement",components:{Copy:Tc,OtpIconHolder:Bc},props:{content:{type:String,default:""}},data:function(){return{disabled:!1}},methods:{copy:function(){Sc(this.content),this.showMessage()},showMessage:function(){var t=this;this.disabled=!0,setTimeout((function(){t.disabled=!1}),800)}}},qc=Fc,Uc=n("e20b");function Gc(t){this["$style"]=Uc["default"].locals||Uc["default"]}var Vc=Object(M["a"])(qc,wc,Oc,!1,Gc,null,null),Hc=Vc.exports,Wc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("a",t._b({class:[t.$style.link,t.$style[t.type]],attrs:{href:t.href}},"a",t.$attrs,!1),[t._t("default")],2),t.hasIcon?n("otp-icon-holder",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right",theme:"crm-additional",content:"ссылка откроется <br> в новом окне"},expression:"{\n      placement: 'right',\n      theme: 'crm-additional',\n      content: 'ссылка откроется <br> в новом окне',\n    }"}],class:t.$style.icon},[n("external-link")],1):t._e()],1)},Kc=[],Yc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"}},[n("path",{attrs:{stroke:"#222","stroke-linecap":"round",d:"M6 2H4a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-2M7 9l7-7M9 2h5v5"}})])},Zc=[],Qc={name:"ExternalLink"},Jc=Qc,Xc=Object(M["a"])(Jc,Yc,Zc,!1,null,null,null),tl=Xc.exports,el={name:"OtpSimpleLink",components:{ExternalLink:tl,OtpIconHolder:Bc},inheritAttrs:!1,props:{href:{type:String,default:""},type:{type:String,default:"black",validator:function(t){return["black","green"].includes(t)}},hasIcon:Boolean}},nl=el,rl=n("ccd8");function al(t){this["$style"]=rl["default"].locals||rl["default"]}var ol=Object(M["a"])(nl,Wc,Kc,!1,al,null,null),sl=ol.exports,il={name:"ShopDetails",components:{SidePage:Ho,CrmButton:ie,DetailItem:ac,Status:ys,CopyableElement:Hc,OtpSimpleLink:sl,CrmLink:Ds},props:{shopId:{type:Number,default:null},shop:{type:Object,default:null},editable:Boolean},computed:Object(De["a"])(Object(De["a"])({},Object(Vn["c"])("shop",["getShopById"])),{},{currentShop:function(){return this.shop?this.shop:this.getShopById(this.shopId)}}),methods:{edit:function(){this.$emit("edit")},close:function(){this.$emit("close")}}},cl=il,ll=n("4516");function ul(t){this["$style"]=ll["default"].locals||ll["default"]}var dl=Object(M["a"])(cl,kc,yc,!1,ul,null,null),pl=dl.exports,fl={name:"Shops",components:{ShopsTable:_c,FormInputNew:At,CrmFilter:ts,EditShop:Ki,ShopDetails:pl,Spinner:Xn},inheritAttrs:!1,props:{organizationId:{type:Number,required:!0}},data:function(){return{search:"",kko:"",curator:"",shopId:"",modal:"",isLoading:!1}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("shop",["shops"])),Object(Vn["e"])("reference",["kkos"])),Object(Vn["e"])("user",["curatorsTt"])),{},{isModalDetails:function(){return"details"===this.modal},isModalEdit:function(){return"edit"===this.modal}}),created:function(){var t=this;this.isLoading=!0,Promise.all([this.fetchCuratorsTt({}),this.fetchShops({to:"".concat(this.organizationId)}),this.fetchKkos()]).finally((function(){t.isLoading=!1}))},methods:Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("user",["fetchCuratorsTt"])),Object(Vn["b"])("shop",["fetchShops"])),Object(Vn["b"])("reference",["fetchKkos"])),{},{onShopClick:function(t){this.shopId=t,this.modal="details"},onShopEdit:function(){this.modal="edit"},onCloseModal:function(){this.modal=""}})},ml=fl,hl=(n("8b6f"),Object(M["a"])(ml,dc,pc,!1,null,null,null)),vl=hl.exports,gl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"organization-history"},[n("div",{staticClass:"history-filter"},[n("datepicker",{staticStyle:{width:"232px"},attrs:{editable:!1,range:"",placeholder:"25.01.2020 - 28.01.2020"},on:{input:t.setDateRange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t.isLoading?n("spinner"):n("div",{staticClass:"history-content"},[t.hasHistory?n("div",{staticClass:"history-steps"},t._l(t.organizationHistory,(function(e,r){return n("expansion-panel",{key:r,scopedSlots:t._u([{key:"title",fn:function(){return[n("history-panel-header",{attrs:{stage:e}})]},proxy:!0}],null,!0)},t._l(e.changes,(function(t,e){return n("history",{key:e,attrs:{item:t,"for-organization":""}})})),1)})),1):n("div",{staticClass:"empty-history"},[t._v(" История отсутствует ")])])],1)},bl=[],_l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"crm-datepicker"},[n("date-picker",t._b({attrs:{range:t.range,format:"DD.MM.YYYY","title-format":"DD.MM.YYYY","value-type":"format",value:t.value},on:{input:function(e){return t.$emit("input",e)}},scopedSlots:t._u([{key:"input",fn:function(){return[n("form-input-new",t._b({attrs:{value:t.currentValue},on:{input:function(e){return t.$emit("input",e)}}},"form-input-new",t.$attrs,!1))]},proxy:!0},{key:"icon-calendar",fn:function(){return[t.range?n("calendar-small"):n("calendar")]},proxy:!0},{key:"icon-clear",fn:function(){return[t.range?n("cross",{attrs:{width:"16",height:"16"}}):n("cross")]},proxy:!0}])},"date-picker",t.$attrs,!1))],1)},kl=[],yl=n("ec45"),wl=(n("107a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("g",{attrs:{"clip-path":"url(#clip0)",stroke:"#6E6E6E","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}},[n("path",{attrs:{d:"M2.178 22c-.835 0-1.511-.62-1.511-1.385V5.385C.667 4.62 1.343 4 2.177 4h19.645c.835 0 1.511.62 1.511 1.385v15.23c0 .765-.676 1.385-1.51 1.385H2.177zM.667 10h22.666M6.667 6V2M17.333 6V2"}})]),n("defs",[n("clipPath",{attrs:{id:"clip0"}},[n("path",{attrs:{fill:"#fff",d:"M0 0h24v24H0z"}})])])])}),Ol=[],Cl={name:"Calendar"},xl=Cl,Sl=Object(M["a"])(xl,wl,Ol,!1,null,"2d75f2f7",null),Pl=Sl.exports,jl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("g",{attrs:{"clip-path":"url(#clip0)"}},[n("path",{attrs:{d:"M1.64379 14.6667C1.10379 14.6667 0.666016 14.2535 0.666016 13.7437V3.58983C0.666016 3.08003 1.10379 2.66675 1.64379 2.66675H14.3549C14.8949 2.66675 15.3327 3.08003 15.3327 3.58983V13.7437C15.3327 14.2535 14.8949 14.6667 14.3549 14.6667H1.64379Z",stroke:"#6E6E6E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M0.5 6.66675H15.3333",stroke:"#6E6E6E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M4.66602 3.99992V1.33325",stroke:"#6E6E6E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M11.334 3.99992V1.33325",stroke:"#6E6E6E","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]),n("defs",[n("clipPath",{attrs:{id:"clip0"}},[n("rect",{attrs:{width:"16",height:"16",fill:"white"}})])])])},El=[],Rl={name:"CalendarSmall"},$l=Rl,Tl=Object(M["a"])($l,jl,El,!1,null,"1b308d88",null),Al=Tl.exports,Il={name:"Datepicker",components:{DatePicker:yl["default"],FormInputNew:At,Cross:jt,Calendar:Pl,CalendarSmall:Al},props:{value:{type:[String,Object,Array],default:""},range:Boolean},computed:{currentValue:function(){var t=Array.isArray(this.value);return t&&!this.value.includes(null)?this.value.join(" - "):this.range?"":this.value}}},Dl=Il,zl=(n("f578"),Object(M["a"])(Dl,_l,kl,!1,null,null,null)),Nl=zl.exports,Ml=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.classes},[n("div",{class:t.$style.activator,on:{click:function(e){return t.toggle()}}},[n("div",{class:t.$style.header},[n("div",{class:t.$style.title},[t._t("title",[t._v(" "+t._s(t.title)+" ")])],2),n("div",{class:t.$style.icon},[n("chevron")],1)])]),n("div",{class:t.$style.body,style:[t.isExpanded&&t.styles]},[n("div",{ref:"inner",class:t.$style.inner},[t._t("default")],2)])])},Ll=[],Bl={name:"OtpExpansionPanel",components:{Chevron:ya},props:{expanded:Boolean,isDocuments:Boolean,title:{type:String,default:""}},data:function(){return{panelInnerHeight:0,isExpanded:this.expanded}},computed:{styles:function(){return{height:"".concat(this.panelInnerHeight,"px")}},classes:function(){var t;return t={},Object(vt["a"])(t,this.$style.root,!0),Object(vt["a"])(t,this.$style.expanded,this.isExpanded),Object(vt["a"])(t,this.$style["for-documents"],this.isDocuments),t}},mounted:function(){this.observePanel()},methods:{toggle:function(){this.isExpanded=!this.isExpanded,this.$emit("change")},observePanel:function(){var t=this,e=this.$refs.inner;this.updatePanelHeight(e.offsetHeight);var n=new Bo["a"]((function(){t.updatePanelHeight(e.offsetHeight)}));n.observe(e)},updatePanelHeight:function(t){this.panelInnerHeight=t}}},Fl=Bl,ql=n("f591");function Ul(t){this["$style"]=ql["default"].locals||ql["default"]}var Gl=Object(M["a"])(Fl,Ml,Ll,!1,Ul,null,null),Vl=Gl.exports,Hl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"history-item",class:t.classes},[n("div",{staticClass:"date-wrapper"},[n("span",{staticClass:"date"},[t._v(t._s(t.date))]),t.time?n("span",{staticClass:"time"},[t._v(" "+t._s(t.time)+" ")]):t._e()]),n("div",{staticClass:"circle"}),n("div",{staticClass:"content"},[n("div",{staticClass:"title"},[t._v(" "+t._s(t.item.statusDescription)+" ")]),t.item.message?n("div",{staticClass:"description"},[t._v(" "+t._s(t.item.message)+" ")]):n("div",{staticClass:"empty-box"})]),t.item.user?n("div",{staticClass:"employee"},[t._v(" "+t._s(t.item.user)+" ")]):t._e()])},Wl=[],Kl={name:"HistoryItem",props:{item:{type:Object,default:function(){}},forOrganization:Boolean},computed:{classes:function(){var t,e=this.item.status,n=da[e]?da[e]:"grey";return t={},Object(vt["a"])(t,n,n),Object(vt["a"])(t,"for-organization",this.forOrganization),t},date:function(){return this.item.date.split(" ",3).join(" ")},time:function(){return this.item.date.split(this.date).join(" ").trim()}}},Yl=Kl,Zl=(n("c570"),Object(M["a"])(Yl,Hl,Wl,!1,null,"d7a0261a",null)),Ql=Zl.exports,Jl=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co.get("./organizationHistory.json");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Xl={fetchOrganizationHistory:Jl},tu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"history-panel"},[n("div",{staticClass:"date-wrapper"},[n("span",{staticClass:"date"},[t._v(t._s(t.stage.date))]),t.stage.time?n("span",{staticClass:"time"},[t._v(" "+t._s(t.stage.time)+" ")]):t._e()]),n("div",{staticClass:"content"},[n("div",{staticClass:"title"},[t._v(" "+t._s(t.stage.name)+" ")]),t.stage.info?n("div",{staticClass:"info"},t._l(t.stage.info,(function(e,r){return n("p",{key:r,staticClass:"text"},[t._v(" "+t._s(e)+" ")])})),0):n("div",{staticClass:"empty-box"}),n("div",{staticClass:"prev-info"},[t._v(" "+t._s(t.stage.prevChange)+" ")])]),n("div",{staticClass:"employee"},[t._v(" "+t._s(t.stage.employee)+" ")])])},eu=[],nu={name:"HistoryPanelHeader",props:{stage:{type:Object,default:function(){}}}},ru=nu,au=(n("d478"),Object(M["a"])(ru,tu,eu,!1,null,"becd89e4",null)),ou=au.exports,su={name:"OrganizationHistory",components:{HistoryPanelHeader:ou,Datepicker:Nl,Spinner:Xn,ExpansionPanel:Vl,History:Ql},inheritAttrs:!1,data:function(){return{organizationHistory:[],dateRange:"",dateFrom:"",dateTo:"",isLoading:!1}},computed:{hasHistory:function(){return this.organizationHistory.length>0}},created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,Xl.fetchOrganizationHistory();case 3:t.organizationHistory=e.sent,t.isLoading=!1;case 5:case"end":return e.stop()}}),e)})))()},methods:{setDateRange:function(){var t=Object(ja["a"])(this.dateRange,2),e=t[0],n=t[1];this.dateFrom=e,this.dateTo=n}}},iu=su,cu=(n("64a9"),Object(M["a"])(iu,gl,bl,!1,null,"569e32a4",null)),lu=cu.exports,uu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isLoading?n("spinner"):t.isLoading||t.hasProducts?n("connect-credit-products-table",{attrs:{products:t.creditProducts,"organization-id":t.organizationId},on:{"on-select":t.selectProduct}}):n("otp-empty-products",{attrs:{title:"У торговой организации не подключено ни одного продукта","button-text":"Подключить кредитные продукты"},on:{click:t.editOrganizationCreditProducts}}),t.isShowProductDetails?n("credit-product-details",{attrs:{product:t.selectedProduct,"is-loading":t.isLoadingProduct},on:{close:t.onCloseProductDetails}}):t._e()],1)},du=[],pu=n("c832"),fu=n.n(pu),mu="".concat(sa,"/creditproduct"),hu=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:e?"".concat(mu,"/attr"):mu,method:"GET",params:n});case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),vu=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:"".concat(mu,"/").concat(e),method:"GET"});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),gu=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:mu,method:"POST",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),bu=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:mu,method:"PUT",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_u=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e,n){var r,a,o,s,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n.page,a=n.size,o=n.status,s=n.like,i=n.sort,t.next=3,Co({url:"".concat(mu,"/").concat(e,"/tos"),method:"GET",params:Object(De["a"])(Object(De["a"])(Object(De["a"])({page:r,size:a},o&&{status:o}),s&&{like:s}),i&&{sort:i})});case 3:return c=t.sent,l=c.data,t.abrupt("return",l);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ku=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.cpId,r=e.orgId,t.next=3,Co({url:"".concat(mu,"/").concat(n,"/tos/").concat(r),method:"POST"});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),yu=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.cpId,r=e.orgId,t.next=3,Co({url:"".concat(mu,"/").concat(n,"/tos/").concat(r),method:"DELETE"});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),wu=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.cpId,r=e.orgId,a=e.data,t.next=3,Co({url:"".concat(mu,"/").concat(n,"/tos/").concat(r||""),method:"PUT",data:a});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ou={fetchProducts:hu,fetchCreditProductById:vu,addCreditProduct:gu,editCreditProduct:bu,fetchConnectedOrganizations:_u,addOrganizationToCreditProduct:ku,deleteOrganizationFromCreditProduct:yu,editOrganizationFromCreditProduct:wu},Cu=function(t){return t.map((function(t){var e=t.terms,n=fu()(e[0],"rate",null),r=fu()(e[1],"rate",null);return t.rate1=n,t.rate2=r,t}))},xu=1,Su=300,Pu={namespaced:!0,state:function(){return{currentCreditProduct:{},connectedCreditProductOrganizations:[]}},mutations:{setCreditProduct:function(t,e){t.currentCreditProduct=e},setConnectedOrganizations:function(t,e){t.connectedCreditProductOrganizations=e}},actions:{fetchCreditProductById:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,n.prev=1,n.next=4,Ou.fetchCreditProductById(e);case 4:a=n.sent,r("setCreditProduct",a),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},addCreditProduct:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ou.addCreditProduct(e);case 2:case"end":return t.stop()}}),t)})))()},updateCreditProduct:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.dispatch,n.next=3,Ou.editCreditProduct(e);case 3:return n.next=5,r("fetchCreditProductById",e.id);case 5:case"end":return n.stop()}}),n)})))()},fetchConnectedCreditProductOrganizations:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=e.cpId,o=e.params,s=Object(De["a"])({page:xu,size:Su},o),n.next=5,Ou.fetchConnectedOrganizations(a,s);case 5:i=n.sent,c=i.creditProductOrganizations,r("setConnectedOrganizations",Cu(c));case 8:case"end":return n.stop()}}),n)})))()},toggleOrganizationToCreditProduct:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.flag,r=e.cpId,a=e.orgId,!n){t.next=6;break}return t.next=4,Ou.addOrganizationToCreditProduct({cpId:r,orgId:a});case 4:t.next=8;break;case 6:return t.next=8,Ou.deleteOrganizationFromCreditProduct({cpId:r,orgId:a});case 8:case"end":return t.stop()}}),t)})))()}}},ju=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style.title},[t._v(" "+t._s(t.title)+" ")]),n("otp-button",{attrs:{size:"md"},on:{click:function(e){return t.$emit("click")}}},[t._v(" "+t._s(t.buttonText)+" ")])],1)},Eu=[],Ru={name:"OtpEmptyProducts",components:{OtpButton:ie},props:{title:{type:String,required:!0},buttonText:{type:String,required:!0}}},$u=Ru,Tu=n("cd16");function Au(t){this["$style"]=Tu["default"].locals||Tu["default"]}var Iu=Object(M["a"])($u,ju,Eu,!1,Au,null,null),Du=Iu.exports,zu=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("side-page",{attrs:{size:"sm"},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[r("div",[t._v("Параметры продукта")])]},proxy:!0},{key:"default",fn:function(){return[t.isLoading?r("spinner"):[r("detail-item",{attrs:{title:"Наименование Продукта"}},[t._v(" "+t._s(t.product.name)+" ")]),r("detail-item",{attrs:{title:"Код Продукта"}},[r("copyable-element",{attrs:{content:t.product.code}},[t._v(" "+t._s(t.product.code)+" ")])],1),r("detail-item",{attrs:{title:"Первоначальный взнос"}},[t._v(" "+t._s(t.product.initialFeeMin)+" - "+t._s(t.product.initialFeeMax)+"% ")]),r("detail-item",{attrs:{title:"Ставка 1"}},[r("div",{staticClass:"product-terms"},[r("div",[t._v(" "+t._s(t.productTerms[0].termMin)+" - "+t._s(t.productTerms[0].termMax)+" мес. ")]),r("div",[t._v(" "+t._s(t.productTerms[0].rate)+"% ")])])]),t.productTerms[1]?r("detail-item",{attrs:{title:"Ставка 2"}},[r("div",{staticClass:"product-terms"},[r("div",[t._v(" "+t._s(t.productTerms[1].termMin)+" - "+t._s(t.productTerms[1].termMax)+" мес. ")]),r("div",[t._v(" "+t._s(t.productTerms[1].rate)+"% ")])])]):t._e(),t.product.description?r("detail-item",{attrs:{title:"Краткое описание продукта"}},[r("copyable-element",{attrs:{content:t.product.description}},[t._v(" "+t._s(t.product.description)+" ")])],1):t._e(),r("div",{staticClass:"links"},[r("router-link",{staticClass:"link",attrs:{to:"/products/"+t.product.id+"?tab=ConnectedTo",target:"_blank"}},[r("span",{staticClass:"link-title"},[t._v("Подключенные ТО")]),r("img",{attrs:{src:n("b64a"),alt:"link"}})])],1)]]},proxy:!0},{key:"cancel-button",fn:function(){return[r("div",{on:{click:t.close}},[t._v(" Закрыть ")])]},proxy:!0}])})},Nu=[],Mu={name:"CreditProductDetails",components:{DetailItem:ac,SidePage:Ho,CopyableElement:Hc,Spinner:Xn},props:{product:{type:[Object,null],default:null},isLoading:Boolean},computed:{productTerms:function(){return this.product.terms}},methods:{close:function(){this.$emit("close")}}},Lu=Mu,Bu=(n("e1631"),Object(M["a"])(Lu,zu,Nu,!1,null,"1850820b",null)),Fu=Bu.exports,qu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style["search-row"]},[n("div",{class:t.$style.search},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск по названию или коду продукта"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n("update-button",{on:{click:t.editOrganizationCreditProducts}},[t._v(" Редактировать cписок ")])],1),n("vuetable",{attrs:{"api-mode":!1,fields:t.headers,data:t.filteredCreditProducts},scopedSlots:t._u([{key:"creditProductName",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"crm-link-black",on:{click:function(e){return t.$emit("on-select",r)}}},[n("status",{attrs:{variant:r.status}},[t._v(" "+t._s(r.creditProductName)+" ")])],1)]}},{key:"rate1",fn:function(e){var r=e.rowData;return[n("form-input-new",{staticStyle:{width:"124px"},on:{blur:function(e){return t.onTermChange(r,"rate1")}},scopedSlots:t._u([{key:"suffix-with-line",fn:function(){return[t._v(" % ")]},proxy:!0}],null,!0),model:{value:r.rate1,callback:function(e){t.$set(r,"rate1",t._n(e))},expression:"rowData.rate1"}})]}},{key:"rate2",fn:function(e){var r=e.rowData;return[null!==r.rate2?n("form-input-new",{staticStyle:{width:"124px"},on:{blur:function(e){return t.onTermChange(r,"rate2")}},scopedSlots:t._u([{key:"suffix-with-line",fn:function(){return[t._v(" % ")]},proxy:!0}],null,!0),model:{value:r.rate2,callback:function(e){t.$set(r,"rate2",t._n(e))},expression:"rowData.rate2"}}):t._e()]}},{key:"discount",fn:function(e){var r=e.rowData;return[n("form-input-new",{staticStyle:{width:"175px"},on:{blur:function(e){return t.onDiscountChange(r)}},scopedSlots:t._u([{key:"suffix-with-line",fn:function(){return[t._v(" % ")]},proxy:!0}],null,!0),model:{value:r.discount,callback:function(e){t.$set(r,"discount",t._n(e))},expression:"rowData.discount"}})]}}])})],1)},Uu=[],Gu=n("af52"),Vu=n.n(Gu),Hu=[{name:"creditProductName",title:"Название продукта",width:"20%"},{name:"creditProductCode",title:"Код продукта",width:"15%"},{name:"rate1",title:"Ставка 1",width:"15%"},{name:"rate2",title:"Ставка 2",width:"20%"},{name:"discount",title:"Скидка для рассрочки"}],Wu={name:"ConnectCreditProductsTable",components:{FormInputNew:At,UpdateButton:ra,Status:ys,Vuetable:Vu.a},props:{products:{type:Array,default:function(){return[]}},organizationId:{type:Number,required:!0}},data:function(){return{headers:Hu,search:""}},computed:{filteredCreditProducts:function(){return this.products.filter(this.filterByNameOrCode)}},methods:{editOrganizationCreditProducts:function(){this.$router.push({name:"organizationEditCreditProducts",params:{id:this.organizationId}})},filterByNameOrCode:function(t){if(!this.search)return!0;var e=this.search.toLowerCase(),n=t.creditProductName.toLowerCase().includes(e),r=t.creditProductCode.toLowerCase().includes(e);return n||r},onTermChange:function(t,e){var n=this;return Object(Gn["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t[e],!(""===a||a<0||a>99)){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,n.updateLinkedOrganization(Ka(t,e));case 5:case"end":return r.stop()}}),r)})))()},onDiscountChange:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.updateLinkedOrganization(t);case 2:case"end":return n.stop()}}),n)})))()},updateLinkedOrganization:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={creditProductId:t.creditProductId,organizationId:e.organizationId,terms:t.terms,status:t.status,discount:t.discount},n.next=3,Ou.editOrganizationFromCreditProduct({cpId:t.creditProductId,orgId:e.organizationId,data:r});case 3:case"end":return n.stop()}}),n)})))()}}},Ku=Wu,Yu=n("2611");function Zu(t){this["$style"]=Yu["default"].locals||Yu["default"]}var Qu=Object(M["a"])(Ku,qu,Uu,!1,Zu,null,null),Ju=Qu.exports,Xu={name:"OrganizationCreditProducts",components:{CreditProductDetails:Fu,ConnectCreditProductsTable:Ju,Spinner:Xn,OtpEmptyProducts:Du},inheritAttrs:!1,props:{organizationId:{type:Number,required:!0}},data:function(){return{selectedProduct:null,creditProducts:[],isLoading:!1,isLoadingProduct:!1,isShowProductDetails:!1}},computed:{hasProducts:function(){return this.creditProducts.length>0}},created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,qs.fetchOrganizationCreditProducts(t.organizationId,{page:1,size:100});case 3:n=e.sent,r=n.creditProductOrganizations,t.creditProducts=Cu(r),t.isLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},methods:{editOrganizationCreditProducts:function(){this.$router.push({name:"organizationEditCreditProducts",params:{id:this.organizationId}})},selectProduct:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.isLoadingProduct=!0,e.isShowProductDetails=!0,n.next=4,Ou.fetchCreditProductById(t.creditProductId);case 4:e.selectedProduct=n.sent,e.isLoadingProduct=!1;case 6:case"end":return n.stop()}}),n)})))()},onCloseProductDetails:function(){this.selectedProduct=null,this.isShowProductDetails=!1}}},td=Xu,ed=Object(M["a"])(td,uu,du,!1,null,null,null),nd=ed.exports,rd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isLoading?n("spinner"):t.isLoading||t.hasProducts?n("products-table",{attrs:{items:t.additionalProducts},on:{"on-select":t.selectProduct}}):n("otp-empty-products",{attrs:{title:"У торговой организации не подключено ни одного доп.продукта","button-text":"Подключить доп. продукты"},on:{click:t.editAdditionalProducts}}),t.selectedProduct?n("additional-product-details",{attrs:{product:t.selectedProduct},on:{close:function(e){t.selectedProduct=null}}}):t._e()],1)},ad=[],od=n("4328"),sd=n.n(od),id=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,o,s,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},n=Object(De["a"])({page:1,size:10},e),r=e.attr?"/attr":"",a="".concat(sa,"/additionalproduct").concat(r,"?").concat(sd.a.stringify(n)),t.next=6,Co.get(a);case 6:return o=t.sent,s=o.data.additionalProducts,t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),cd=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(sa,"/additionalproduct/").concat(e),t.next=3,Co.get(n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ld=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="".concat(sa,"/additionalproduct/producttypes"),t.next=3,Co.get(e);case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ud=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="".concat(sa,"/additionalproduct/servicetypes"),t.next=3,Co.get(e);case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),dd=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="".concat(sa,"/additionalproduct/paymenttypes"),t.next=3,Co.get(e);case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),pd=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(sa,"/additionalproduct"),t.next=3,Co.post(n,e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fd=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(sa,"/additionalproduct"),t.next=3,Co.put(n,e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),md=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(sa,"/additionalproduct/").concat(e,"/tos?page=1&size=10"),t.next=3,Co.get(n);case 3:return r=t.sent,a=r.data,t.abrupt("return",null===a||void 0===a?void 0:a.additionalProductOrganizations);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),hd=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.organizationId,r=e.additionalProductId,a="".concat(sa,"/additionalproduct/").concat(r,"/tos/").concat(n),t.next=4,Co.put(a,e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),vd=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.organizationId,r=e.additionalProductId,a="".concat(sa,"/additionalproduct/").concat(r,"/tos/").concat(n),t.next=4,Co.post(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),gd=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.organizationId,r=e.additionalProductId,a="".concat(sa,"/additionalproduct/").concat(r,"/tos/").concat(n),t.next=4,Co.delete(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),bd={fetchAdditionalProducts:id,fetchAdditionalProductById:cd,fetchProductTypes:ld,fetchServiceTypes:ud,fetchPaymentTypes:dd,saveAdditionalProduct:pd,updateAdditionalProduct:fd,fetchLinkedTos:md,updateLinkedTo:hd,addLinkedTo:vd,removeLinkedTo:gd},_d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("side-page",{attrs:{size:"sm"},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[r("div",[t._v("Параметры доп.продукта")])]},proxy:!0},{key:"default",fn:function(){return[r("detail-item",{attrs:{title:"Наименование доп.продукта"}},[t._v(" "+t._s(t.product.name)+" ")]),r("detail-item",{attrs:{title:"Программа услуг"}},[r("copyable-element",{attrs:{content:t.product.serviceTypeCode}},[t._v(" "+t._s(t.product.serviceTypeCode)+" ")])],1),r("detail-item",{attrs:{title:"Тип доп.продукта"}},[t._v(" "+t._s(t.product.productType)+" ")]),r("detail-item",{attrs:{title:"Тип расчёта"}},[t._v(" "+t._s(t.product.paymentType)+" ")]),r("detail-item",{attrs:{title:"Тариф"}},[t.product.payment?r("span",[t._v(t._s(t.product.payment)+" ₽")]):t._e(),t.product.rate?r("span",[t._v(t._s(t.product.rate)+" %")]):t._e()]),t.product.description?r("detail-item",{attrs:{title:"Краткое описание продукта"}},[r("copyable-element",{attrs:{content:t.product.description}},[t._v(" "+t._s(t.product.description)+" ")])],1):t._e(),r("div",{staticClass:"links"},[r("router-link",{staticClass:"link",attrs:{to:"/additional-products/"+t.product.id+"?tab=AdditionalProductConnectedTo",target:"_blank"}},[r("span",{staticClass:"link-title"},[t._v("Подключенные ТО")]),r("img",{attrs:{src:n("b64a"),alt:"link"}})])],1)]},proxy:!0},{key:"cancel-button",fn:function(){return[r("div",{on:{click:t.close}},[t._v(" Закрыть ")])]},proxy:!0}])})},kd=[],yd={name:"AdditionalProductDetails",components:{DetailItem:ac,SidePage:Ho,CopyableElement:Hc},props:{product:{type:Object,required:!0}},methods:{close:function(){this.$emit("close")}}},wd=yd,Od=(n("c340"),Object(M["a"])(wd,_d,kd,!1,null,"3c60b0e6",null)),Cd=Od.exports,xd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"products-row"},[n("div",{staticClass:"products-search"},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск по названию доп.продукта"},model:{value:t.filterName,callback:function(e){t.filterName=e},expression:"filterName"}})],1),n("update-button",[n("router-link",{staticClass:"edit-additional-products",attrs:{to:"/organizations/"+t.$route.params.id+"/edit-additional-products"}},[t._v(" Редактировать список ")])],1)],1),n("vuetable",{attrs:{"api-mode":!1,data:t.tableItems,"data-manager":t.dataManager,"data-path":"data",fields:t.fields,"no-data-template":"Нет данных"},scopedSlots:t._u([{key:"name",fn:function(e){return[n("div",{staticClass:"crm-link-black",on:{click:function(n){return t.$emit("on-select",e.rowData)}}},[n("status",{attrs:{variant:e.rowData.status}},[t._v(" "+t._s(e.rowData.name)+" ")])],1)]}},{key:"tariff",fn:function(e){return[e.rowData.payment?n("div",[t._v(" "+t._s(e.rowData.payment)+" ₽ ")]):t._e(),e.rowData.rate?n("div",[t._v(" "+t._s(e.rowData.rate)+" % ")]):t._e()]}}])})],1)},Sd=[],Pd=n("48f9"),jd=n.n(Pd),Ed={name:"ProductsTable",components:{FormInputNew:At,Status:ys,UpdateButton:ra,Vuetable:Vu.a},props:{items:{type:Array,required:!0}},data:function(){return{filterName:"",sortName:"",sortDirection:"",fields:[{name:"name",sortField:"name",title:"Название доп. продукта"},{name:"serviceTypeCode",sortField:"serviceTypeCode",title:"Программа услуг"},{name:"tariff",sortField:"payment",title:"Тариф"},{name:"productType",sortField:"productType",title:"Тип доп. продукта"}]}},computed:{tableItems:function(){var t=this.items.filter(this.filterByName),e=this.sortName?jd()(t,this.sortName,this.sortDirection):t;return{data:e}}},methods:{filterByName:function(t){return!this.filterName||t.name.toLowerCase().includes(this.filterName.toLowerCase())},dataManager:function(t){return t.length>0&&(this.sortName=t[0].sortField,this.sortDirection=t[0].direction),this.tableItems}}},Rd=Ed,$d=(n("717a"),Object(M["a"])(Rd,xd,Sd,!1,null,"0c6a2a4a",null)),Td=$d.exports,Ad={name:"OrganizationAdditionalProducts",components:{ProductsTable:Td,AdditionalProductDetails:Cd,Spinner:Xn,OtpEmptyProducts:Du},inheritAttrs:!1,data:function(){return{additionalProducts:[],selectedProduct:null,isLoading:!1}},computed:{hasProducts:function(){return this.additionalProducts.length>0}},created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,bd.fetchAdditionalProducts({organization:t.$route.params.id});case 3:t.additionalProducts=e.sent,t.isLoading=!1;case 5:case"end":return e.stop()}}),e)})))()},methods:{selectProduct:function(t){this.selectedProduct=t},editAdditionalProducts:function(){this.$router.push({name:"organizationEditAdditionalProducts",params:{id:this.$route.params.id}})}}},Id=Ad,Dd=Object(M["a"])(Id,rd,ad,!1,null,null,null),zd=Dd.exports,Nd=[{title:"Параметры",value:"params"},{title:"Торговые Точки",value:"shops"},{title:"Кредитные продукты",value:"organization-credit-products"},{title:"Доп.продукты",value:"additional-products"},{title:"История",value:"History"}],Md={name:"Organization",components:{Tabs:ci,PageWrapper:ir,CrmButton:ie,Breadcrumbs:vi,Shops:vl,History:lu,Params:uc,OrganizationCreditProducts:nd,AdditionalProducts:zd,UpdateButton:ra,EditShop:Ki},data:function(){return{isLoading:!1,showModal:!1,currentTab:"params",tabs:Nd}},computed:Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("organization",["currentOrganization"])),{},{organizationId:function(){return+this.$route.params.id}}),created:function(){var t=this;this.isLoading=!0,this.fetchOrganization().finally((function(){t.isLoading=!1}))},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("organization",["fetchOrganizationById"])),{},{fetchOrganization:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchOrganizationById(t.organizationId);case 2:case"end":return e.stop()}}),e)})))()}})},Ld=Md,Bd=Object(M["a"])(Ld,ei,ni,!1,null,null,null),Fd=Bd.exports,qd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-wrapper",{scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[n("nav-back",{attrs:{path:"/organizations/"+t.organizationId+"?tab=organization-credit-products"}})]},proxy:!0},{key:"title",fn:function(){return[t._v(" Подключение продуктов к ТО ")]},proxy:!0},{key:"filters",fn:function(){return[n("div",{staticClass:"add-products__filters"},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск по названию или коду продукта"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("radio-list",{attrs:{options:t.statuses,name:"to-list"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.option;return[t._v(" "+t._s(n.title)+" ")]}}]),model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)]},proxy:!0},{key:"default",fn:function(){return[t.isLoading?n("spinner"):n("vuetable",{attrs:{"api-mode":!1,fields:t.headers,data:t.filteredCreditProducts,css:{tableClass:"organization-edit-credit-product-table"}},scopedSlots:t._u([{key:"name",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"crm-link-black",on:{click:function(e){return t.selectProduct(r)}}},[n("status",{attrs:{variant:r.status}},[t._v(" "+t._s(r.name)+" ")])],1)]}},{key:"rate1",fn:function(e){var n=e.rowData;return[t._v(" "+t._s(n.rate1)+"% ")]}},{key:"rate2",fn:function(e){var r=e.rowData;return[r.rate2?n("div",[t._v(" "+t._s(r.rate2)+"% ")]):t._e()]}},{key:"mark",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"text-align-right"},[n("otp-switcher",{attrs:{checked:r.attr.organization},on:{change:function(e){return t.toggleCreditProduct(e,r)}}})],1)]}}])}),t.selectedProduct?n("credit-product-details",{attrs:{product:t.selectedProduct},on:{close:function(e){t.selectedProduct=null}}}):t._e()]},proxy:!0}])})},Ud=[],Gd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.$style.root,t.$style[t.textPosition]]},[n("label",{class:t.classes},[n("input",{class:t.$style.input,attrs:{type:"checkbox"},domProps:{value:t.checked},on:{change:t.onChange,click:t.onClick}}),n("div",{class:t.$style.slider},[n("div",{class:t.$style.icon},[t.checked?n("check"):n("cross-small")],1)])]),t.$slots.default?n("div",{class:t.$style.text},[t._t("default")],2):t._e()])},Vd=[],Hd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"crm-icon icon-check",attrs:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M2.667 5.857L5.09 8.333 9.333 4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},Wd=[],Kd={name:"Check"},Yd=Kd,Zd=Object(M["a"])(Yd,Hd,Wd,!1,null,null,null),Qd=Zd.exports,Jd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"crm-icon icon-cross-small",attrs:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("g",{attrs:{"clip-path":"url(#clip0)",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("path",{attrs:{d:"M3.333 8.667l5.334-5.334M8.667 8.667L3.334 3.333"}})])])},Xd=[],tp={name:"CrossSmall"},ep=tp,np=Object(M["a"])(ep,Jd,Xd,!1,null,null,null),rp=np.exports,ap={name:"OtpSwitcher",components:{Check:Qd,CrossSmall:rp},inheritAttrs:!1,model:{prop:"checked",event:"change"},props:{checked:Boolean,textPosition:{type:String,default:"right",validator:function(t){return["right","left"].includes(t)}},theme:{type:String,default:"success",validator:function(t){return["success","primary"].includes(t)}}},computed:{classes:function(){var t;return t={},Object(vt["a"])(t,this.$style.control,!0),Object(vt["a"])(t,this.$style.checked,this.checked),Object(vt["a"])(t,this.$style.disabled,this.disabled),Object(vt["a"])(t,this.$style["theme-".concat(this.theme)],!!this.theme),t}},methods:{onChange:function(){this.$emit("change",!this.checked)},onClick:function(t){this.$emit("click",t.target.checked)}}},op=ap,sp=n("c697");function ip(t){this["$style"]=sp["default"].locals||sp["default"]}var cp=Object(M["a"])(op,Gd,Vd,!1,ip,null,null),lp=cp.exports,up=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(t.component,{tag:"component",staticClass:"nav-back",attrs:{to:t.path},on:{click:function(e){return t.$emit("click")}}},[r("img",{staticClass:"back-icon",attrs:{src:n("7338"),alt:"back"}}),r("span",[t._v("назад")])])},dp=[],pp={props:{path:{type:String,default:""}},computed:{component:function(){return this.path?"router-link":"div"}}},fp=pp,mp=(n("13e0"),Object(M["a"])(fp,up,dp,!1,null,"59ef0693",null)),hp=mp.exports,vp=[{name:"name",title:"Название продукта"},{name:"code",title:"Код продукта"},{name:"rate1",title:"Ставка 1"},{name:"rate2",title:"Ставка 2"},{name:"discount",title:"Скидка для рассрочки"},{name:"mark",title:"вкл/выкл",width:70}],gp={name:"OrganizationEditCreditProducts",components:{Spinner:Xn,FormInputNew:At,RadioList:uo,PageWrapper:ir,Status:ys,OtpSwitcher:lp,Vuetable:Vu.a,CreditProductDetails:Fu,NavBack:hp},data:function(){return{search:"",status:"all",isLoading:!1,selectedProduct:null,creditProducts:[],headers:vp}},computed:{organizationId:function(){return+this.$route.params.id},statuses:function(){var t=this.creditProducts.length,e=this.creditProducts.filter((function(t){var e=t.attr;return e.organization})).length,n=t-e;return[{value:"all",title:"Все",count:t},{value:"on",title:"Включенные",count:e},{value:"off",title:"Выключенные",count:n}]},filteredCreditProducts:function(){return this.creditProducts.filter(this.filterByNameOrCode).filter(this.filterByStatus)}},created:function(){var t=this;this.isLoading=!0,Ou.fetchProducts(!0,{page:1,size:300,organization:this.organizationId}).then((function(e){var n=e.creditProducts;t.creditProducts=Cu(n).filter((function(t){return"on"===t.status})).sort((function(t,e){return Number(e.attr.organization)-Number(t.attr.organization)}))})).finally((function(){t.isLoading=!1}))},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("creditProduct",["toggleOrganizationToCreditProduct"])),{},{toggleCreditProduct:function(t,e){var n=this;return Object(Gn["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.toggleOrganizationToCreditProduct({flag:t,orgId:n.organizationId,cpId:e.id});case 2:e.attr.organization=!e.attr.organization;case 3:case"end":return r.stop()}}),r)})))()},selectProduct:function(t){this.selectedProduct=t},filterByNameOrCode:function(t){if(!this.search)return!0;var e=this.search.toLowerCase(),n=t.name.toLowerCase().includes(e),r=t.code.toLowerCase().includes(e);return n||r},filterByStatus:function(t){if("all"===this.status)return!0;var e="on"===this.status&&t.attr.organization,n="off"===this.status&&!t.attr.organization;return e||n}})},bp=gp,_p=(n("0c4a"),Object(M["a"])(bp,qd,Ud,!1,null,null,null)),kp=_p.exports,yp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-wrapper",{scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[n("nav-back",{attrs:{path:t.pathBack}})]},proxy:!0},{key:"title",fn:function(){return[t._v(" Подключение доп.продуктов к ТО ")]},proxy:!0},{key:"buttons",fn:function(){return[n("span",{staticClass:"hint"},[t._v("Включите или выключите продукты, вернитесь "),n("router-link",{staticClass:"hint-link",attrs:{to:t.pathBack}},[t._v("назад")])],1)]},proxy:!0},{key:"default",fn:function(){return[t.isLoading?n("spinner"):t._e(),t.isLoading?t._e():n("div",[n("connect-products-table",{attrs:{items:t.items},on:{"on-select":t.selectProduct,"on-switch":t.onSwitch}}),t.selectedProduct?n("additional-product-details",{attrs:{product:t.selectedProduct},on:{close:function(e){t.selectedProduct=null}}}):t._e()],1)]},proxy:!0}])})},wp=[],Op=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"filters-wrap"},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск по названию"},model:{value:t.filterName,callback:function(e){t.filterName=e},expression:"filterName"}})],1),n("vuetable",{attrs:{"api-mode":!1,data:t.tableItems,"data-manager":t.dataManager,"data-path":"data",fields:t.fields,"no-data-template":"Нет данных",css:{tableClass:"organization-edit-additional-product-table"}},scopedSlots:t._u([{key:"name",fn:function(e){return[n("div",{staticClass:"crm-link-black",on:{click:function(n){return t.$emit("on-select",e.rowData)}}},[n("status",{attrs:{variant:e.rowData.status}},[t._v(" "+t._s(e.rowData.name)+" ")])],1)]}},{key:"tariff",fn:function(e){return[e.rowData.payment?n("div",[t._v(" "+t._s(e.rowData.payment)+" ₽ ")]):t._e(),e.rowData.rate?n("div",[t._v(" "+t._s(e.rowData.rate)+" % ")]):t._e()]}},{key:"switch",fn:function(e){return[n("div",{staticClass:"text-align-right"},[n("otp-switcher",{attrs:{checked:e.rowData.attr.organization},on:{change:function(n){return t.$emit("on-switch",n,e.rowData)}}})],1)]}}])})],1)},Cp=[],xp={name:"ConnectProductsTable",components:{FormInputNew:At,Status:ys,OtpSwitcher:lp,Vuetable:Vu.a},props:{items:{type:Array,required:!0}},data:function(){return{filterName:"",sortName:"",sortDirection:"",fields:[{name:"name",sortField:"name",title:"Название доп. продукта"},{name:"serviceTypeCode",sortField:"serviceTypeCode",title:"Программа услуг"},{name:"tariff",sortField:"payment",title:"Тариф"},{name:"productType",sortField:"productType",title:"Тип доп. продукта"},{name:"switch",sortField:"attr.organization",title:"вкл/выкл"}]}},computed:{tableItems:function(){var t=this.items.filter(this.filterByName),e=this.sortName?jd()(t,this.sortName,this.sortDirection):t;return{data:e}}},methods:{filterByName:function(t){return!this.filterName||t.name.toLowerCase().includes(this.filterName.toLowerCase())},dataManager:function(t){return t.length>0&&(this.sortName=t[0].sortField,this.sortDirection=t[0].direction),this.tableItems}}},Sp=xp,Pp=(n("c4bc"),n("ea81"),Object(M["a"])(Sp,Op,Cp,!1,null,"14e3a558",null)),jp=Pp.exports,Ep={name:"EditAdditionalProducts",components:{ConnectProductsTable:jp,PageWrapper:ir,Spinner:Xn,AdditionalProductDetails:Cd,NavBack:hp},props:{id:{type:String,required:!0}},data:function(){return{status:"all",items:[],isLoading:!1,selectedProduct:null}},computed:{pathBack:function(){return"/organizations/".concat(this.id,"?tab=additional-products")}},created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,bd.fetchAdditionalProducts({organization:t.id,attr:!0});case 3:t.items=e.sent,t.isLoading=!1;case 5:case"end":return e.stop()}}),e)})))()},methods:{onSwitch:function(t,e){var n=this;return Object(Gn["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a={organizationId:n.id,additionalProductId:e.id},!t){r.next=6;break}return r.next=4,bd.addLinkedTo(a);case 4:r.next=8;break;case 6:return r.next=8,bd.removeLinkedTo(a);case 8:e.attr.organization=t;case 9:case"end":return r.stop()}}),r)})))()},selectProduct:function(t){this.selectedProduct=t}}},Rp=Ep,$p=(n("99a1"),Object(M["a"])(Rp,yp,wp,!1,null,"06cd483f",null)),Tp=$p.exports,Ap=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("page-wrapper",{attrs:{"is-main":""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Кредитные продукты ")]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{on:{click:function(e){t.showModal=!0}}},[t._v(" Добавить продукт ")]),n("update-button",{attrs:{icon:"upload"}},[t._v(" Загрузить несколько ТО ")]),n("update-button",{attrs:{icon:"download"}},[t._v(" Скачать в xlsx ")])]},proxy:!0},{key:"filters",fn:function(){return[n("div",{class:t.$style.filters},[n("form-input-new",{class:t.$style.input,attrs:{type:"search",placeholder:"Поиск по названию или коду продукта"},on:{input:t.debouncedSearch},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("radio-list",{attrs:{options:t.statuses,name:"to-list"},on:{input:t.fetchData},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.option;return[t._v(" "+t._s(n.title)+" ")]}}]),model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)]},proxy:!0},{key:"default",fn:function(){return[t.isLoading?n("spinner",{attrs:{size:"md"}}):n("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,fields:t.headers,data:t.creditProducts,"no-data-template":"Нет данных","sort-order":t.defaultSort,css:{tableBodyClass:t.$style.table}},scopedSlots:t._u([{key:"name",fn:function(e){var r=e.rowData;return[n("status",{attrs:{variant:r.status}},[n("router-link",{attrs:{to:{name:"creditProduct",params:{id:r.id}}}},[t._v(" "+t._s(r.name)+" ")])],1)]}},{key:"rate1",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"text-align-right"},[t._v(" "+t._s(r.rate1)+"% ")])]}},{key:"rate2",fn:function(e){var r=e.rowData;return[r.rate2?n("div",{staticClass:"text-align-right"},[t._v(" "+t._s(r.rate2)+"% ")]):t._e()]}},{key:"totalOrganizations",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"text-align-right"},[n("router-link",{attrs:{to:{name:"creditProduct",params:{id:r.id},query:{tab:"ConnectedTo"}}}},[t._v(" "+t._s(r.totalOrganizations)+" ")])],1)]}}])}),n("pagination",{attrs:{"per-page":t.perPage,total:t.total,"current-page":t.currentPage,"pagination-data":t.paginationData},on:{onChangePage:t.onChangePage,onPerPageChange:t.onPerPageChange}}),t.showModal?n("credit-product-side-page",{on:{close:function(e){t.showModal=!1},save:t.fetchData}}):t._e()]},proxy:!0}])})],1)},Ip=[],Dp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"modal"}},[n("side-page",{attrs:{size:"md","block-background":""},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.title)+" ")]},proxy:!0},{key:"default",fn:function(){return[n("div",{staticClass:"add-product"},[n("form-item",{attrs:{label:"Наименование продукта"}},[n("form-input-new",{attrs:{placeholder:"Ласковая осень",size:"md"},model:{value:t.fields.name,callback:function(e){t.$set(t.fields,"name",e)},expression:"fields.name"}})],1),n("form-item",{attrs:{label:"Код продукта"}},[n("form-input-new",{attrs:{placeholder:"123456789",size:"md"},model:{value:t.fields.code,callback:function(e){t.$set(t.fields,"code",e)},expression:"fields.code"}})],1),n("form-items",{attrs:{label:"Диапазон кредита, ₽"}},[n("div",{staticClass:"crm-row gap-8"},[n("div",{staticClass:"crm-col gap-8"},[n("form-item",[n("form-input-new",{attrs:{placeholder:"от 2 000",size:"md"},model:{value:t.fields.amountMin,callback:function(e){t.$set(t.fields,"amountMin",t._n(e))},expression:"fields.amountMin"}})],1)],1),n("div",{staticClass:"crm-col gap-8"},[n("form-item",[n("form-input-new",{attrs:{placeholder:"до 300 000",size:"md"},model:{value:t.fields.amountMax,callback:function(e){t.$set(t.fields,"amountMax",t._n(e))},expression:"fields.amountMax"}})],1)],1)])]),n("form-items",{staticClass:"crm-mb-24",attrs:{label:"Первоначальный взнос, %"}},[n("div",{staticClass:"crm-row gap-8"},[n("div",{staticClass:"crm-col gap-8"},[n("form-item",[n("form-input-new",{attrs:{placeholder:"от 0",size:"md"},model:{value:t.fields.initialFeeMin,callback:function(e){t.$set(t.fields,"initialFeeMin",t._n(e))},expression:"fields.initialFeeMin"}})],1)],1),n("div",{staticClass:"crm-col gap-8"},[n("form-item",[n("form-input-new",{attrs:{placeholder:"до 90",size:"md"},model:{value:t.fields.initialFeeMax,callback:function(e){t.$set(t.fields,"initialFeeMax",t._n(e))},expression:"fields.initialFeeMax"}})],1)],1)])]),n("form-item",{staticClass:"crm-mb-32"},[n("product-terms",{attrs:{terms:t.fields.terms}})],1),n("form-item",[n("component-with-label",{attrs:{label:"Статус"}},[n("radio-list",{attrs:{options:t.statuses,name:"to-list"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.option;return[t._v(" "+t._s(n.title)+" ")]}}]),model:{value:t.fields.status,callback:function(e){t.$set(t.fields,"status",e)},expression:"fields.status"}})],1)],1),n("form-item",{attrs:{label:"Краткое описание продукта"}},[n("textarea-resizeable",{attrs:{placeholder:"Текст будет показан клиенту",size:"md"},model:{value:t.fields.description,callback:function(e){t.$set(t.fields,"description",e)},expression:"fields.description"}})],1)],1)]},proxy:!0},{key:"buttons",fn:function(){return[t.isNew?t._e():n("crm-button",{attrs:{design:"outline"},on:{click:t.reset}},[t._v(" Сбросить ")]),n("crm-button",{on:{click:t.saveAndClose}},[t._v(" Cохранить ")])]},proxy:!0},t.isNew?{key:"cancel-button",fn:function(){return[n("div",{on:{click:t.reset}},[t._v(" Сбросить ")])]},proxy:!0}:null],null,!0)})],1)},zp=[],Np=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"element",staticClass:"crm-textarea-resizeable",class:t.classes,attrs:{contenteditable:"true","data-placeholder":t.placeholder},on:{input:t.update,blur:t.update,paste:t.onPaste}})},Mp=[],Lp={name:"TextareaResizeable",props:{value:{type:String,default:""},size:{type:String,default:"sm",validator:function(t){return["sm","md","lg"].includes(t)}},error:Boolean,valid:Boolean,disabled:Boolean,readOnly:Boolean,fontBold:{type:Boolean,default:!0},forSelect:Boolean,forFilter:Boolean,placeholder:{type:String,default:""}},computed:{classes:function(){var t;return t={_disabled:this.disabled,_error:this.error,_valid:this.valid,"_has-value":0===this.value||!!this.value,"_read-only":this.readOnly},Object(vt["a"])(t,"_size-".concat(this.size),this.size),Object(vt["a"])(t,"_font-bold",this.fontBold),t}},watch:{value:function(t){t!==this.getCurrentContent()&&this.updateContent(t)}},mounted:function(){this.updateContent(this.value)},methods:{getCurrentContent:function(){return this.$refs.element.innerHTML},updateContent:function(t){this.$refs.element.innerHTML=t},update:function(){this.$emit("input",this.getCurrentContent())},onPaste:function(t){t.preventDefault();var e=(t.originalEvent||t).clipboardData.getData("text/plain");window.document.execCommand("insertText",!1,e)}}},Bp=Lp,Fp=(n("23ea"),Object(M["a"])(Bp,Np,Mp,!1,null,"d8f23786",null)),qp=Fp.exports,Up=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"product-terms",class:{"_offset-left":t.isMultiple}},t._l(t.terms,(function(e,r){return n("product-term",{key:r,attrs:{index:r+1,params:e,"is-multiple":t.isMultiple},on:{add:t.addTerm,delete:t.deleteTerm}})})),1)},Gp=[],Vp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"product-term"},[t.showLabels?n("div",{staticClass:"product-term__row"},[n("div",{staticClass:"product-term__col"},[n("form-item",{attrs:{label:"Ставка"}})],1),n("div",[n("form-item",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" Срок кредита, "),n("span",{staticClass:"crm-fw-600"},[t._v("в месяцах")])]},proxy:!0}],null,!1,3944758087)})],1)]):t._e(),n("div",{staticClass:"product-term__row"},[t.isMultiple?n("div",{staticClass:"product-term__index"},[t._v(" "+t._s(t.index)+". ")]):t._e(),n("div",{staticClass:"product-term__col"},[n("form-input-new",{attrs:{placeholder:"100",size:"md",type:"number"},scopedSlots:t._u([{key:"suffix-with-line",fn:function(){return[t._v(" % ")]},proxy:!0}]),model:{value:t.params.rate,callback:function(e){t.$set(t.params,"rate",t._n(e))},expression:"params.rate"}})],1),n("div",{staticClass:"crm-row gap-8"},[n("div",{staticClass:"crm-col gap-8"},[n("form-input-new",{staticStyle:{width:"132px"},attrs:{placeholder:"от 3",size:"md"},model:{value:t.params.termMin,callback:function(e){t.$set(t.params,"termMin",t._n(e))},expression:"params.termMin"}})],1),n("div",{staticClass:"crm-col gap-8"},[n("form-input-new",{staticStyle:{width:"132px"},attrs:{placeholder:"до 36",size:"md"},model:{value:t.params.termMax,callback:function(e){t.$set(t.params,"termMax",t._n(e))},expression:"params.termMax"}})],1)]),[t.isMultiple?t._e():n("update-button",{staticClass:"crm-ml-16",on:{click:function(e){return t.$emit("add")}}},[t._v(" добавить"),n("br"),t._v(" ставку ")]),t.showDeleteButton?n("update-button",{staticClass:"crm-ml-16",attrs:{icon:"cross",variant:"secondary","icon-width":"16","icon-height":"16"},on:{click:function(e){return t.$emit("delete")}}},[t._v(" удалить ")]):t._e()]],2)])},Hp=[],Wp={name:"ProductTerm",components:{FormItem:it,FormInputNew:At,UpdateButton:ra},props:{params:{type:Object,default:function(){return{termMin:"",termMax:"",rate:""}}},index:{type:Number,default:1},isMultiple:Boolean},computed:{showLabels:function(){return this.index<=1},showDeleteButton:function(){return this.index>1}}},Kp=Wp,Yp=(n("2cdf"),Object(M["a"])(Kp,Vp,Hp,!1,null,null,null)),Zp=Yp.exports,Qp={name:"ProductTerms",components:{ProductTerm:Zp},props:{terms:{type:Array,default:function(){return[]}}},computed:{isMultiple:function(){return this.terms.length>1}},methods:{addTerm:function(){this.terms.push({termMin:"",termMax:"",rate:""})},deleteTerm:function(){this.terms.pop()}}},Jp=Qp,Xp=(n("0b6a"),Object(M["a"])(Jp,Up,Gp,!1,null,null,null)),tf=Xp.exports,ef={id:null,code:"",name:"",amountMin:"",amountMax:"",initialFeeMin:"",initialFeeMax:"",discount:null,status:"on",description:"",terms:[{termMin:"",termMax:"",rate:""}]},nf={name:"CreditProductSidePage",components:{FormItems:et,FormItem:it,FormInputNew:At,RadioList:uo,ComponentWithLabel:go,SidePage:Ho,CrmButton:ie,TextareaResizeable:qp,ProductTerms:tf},props:{creditProduct:{type:[Object,void 0],default:void 0}},data:function(){return{fields:Va()(ef),statuses:ia}},computed:{isNew:function(){return!this.creditProduct},title:function(){return this.isNew?"Создание продукта":"Редактирование продукта"}},created:function(){this.setParams(this.creditProduct)},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("creditProduct",["addCreditProduct","updateCreditProduct"])),{},{setParams:function(t){this.isNew||(this.fields=Va()(t),this.fields.terms=t.terms.length>0?Va()(t.terms):Va()(ef.terms))},saveChanges:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isNew){e.next=5;break}return e.next=3,t.addCreditProduct(t.fields);case 3:e.next=7;break;case 5:return e.next=7,t.updateCreditProduct(t.fields);case 7:t.$emit("save");case 8:case"end":return e.stop()}}),e)})))()},saveAndClose:function(){this.saveChanges().then(this.close)},reset:function(){this.isNew?this.fields=Va()(ef):this.setParams(this.creditProduct)},close:function(){this.$emit("close")}})},rf=nf,af=Object(M["a"])(rf,Dp,zp,!1,null,null,null),of=af.exports,sf=[{name:"name",title:"Название продукта",sortField:"name",width:"25%"},{name:"code",title:"Код продукта",sortField:"code",width:"20%"},{name:"rate1",title:"Ставка 1",width:"10%"},{name:"rate2",title:"Ставка 2",width:"13%"},{name:"totalOrganizations",title:"Подключено ТО"},{name:"empty",title:"",width:"15%"}],cf=[{value:"all",title:"Все"},{value:"on",title:"Активные"},{value:"off",title:"Неактивные"}],lf={name:"CreditProducts",components:{Status:ys,PageWrapper:ir,CrmButton:ie,FormInputNew:At,Spinner:Xn,RadioList:uo,UpdateButton:ra,CreditProductSidePage:of,Vuetable:hs["a"],Pagination:Ps},data:function(){return{search:"",showModal:!1,status:"all",sortField:"",sortDirection:"",statuses:cf,isLoading:!1,headers:sf,currentPage:1,perPage:5,total:0,creditProducts:[],debouncedSearch:function(){},defaultSort:[{direction:"asc",field:"name",sortField:"name"}]}},computed:{lastPage:function(){return Math.ceil(this.total/this.perPage)},paginationData:function(){return{data:this.creditProducts,total:this.total,per_page:this.perPage,current_page:this.currentPage,last_page:this.lastPage,from:1,to:this.perPage}}},created:function(){var t=this;this.fetchData(),this.debouncedSearch=Gs()((function(){t.currentPage=1,t.fetchData()}),500)},mounted:function(){var t=this;this.$unwatch=this.$watch("$refs.vuetable.sortOrder",(function(e){if(!e||!e[0])return t.sortField="",void(t.sortDirection="");t.sortField=e[0].field,t.sortDirection=e[0].direction,t.fetchData()}))},beforeDestroy:function(){this.$unwatch()},methods:{fetchData:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,n=Object(De["a"])(Object(De["a"])({page:t.currentPage,size:t.perPage,status:t.status},t.sortField&&{sort:"".concat(t.sortField,",").concat(t.sortDirection)}),t.search&&{like:t.search}),e.next=4,Ou.fetchProducts(!1,n);case 4:r=e.sent,a=r.totalItems,o=r.creditProducts,t.creditProducts=Cu(o),t.total=a,t.isLoading=!1;case 10:case"end":return e.stop()}}),e)})))()},onChangePage:function(t){this.currentPage=t,this.fetchData()},onPerPageChange:function(t){this.perPage!==t&&(this.perPage=t,this.currentPage=1,this.fetchData())}}},uf=lf,df=n("dee4");function pf(t){this["$style"]=df["default"].locals||df["default"]}var ff=Object(M["a"])(uf,Ap,Ip,!1,pf,null,null),mf=ff.exports,hf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"organization-page"},[n("page-wrapper",{attrs:{"is-loading":t.isLoading},scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[n("breadcrumbs")]},proxy:!0},{key:"title",fn:function(){return[t._v(" "+t._s(t.currentCreditProduct.name)+" ")]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{on:{click:t.editCreditProductConnectedTo}},[t._v(" Подключить / отключить ТО ")])]},proxy:!0},{key:"tabs",fn:function(){return[n("tabs",{attrs:{tabs:t.tabs,"use-query":""},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}})]},proxy:!0},{key:"default",fn:function(){return["CreditProductParams"===t.currentTab?n("credit-product-params",{attrs:{product:t.currentCreditProduct}}):n("credit-product-connected-to",{attrs:{"product-id":t.productId,"connected-organizations":t.connectedCreditProductOrganizations}})]},proxy:!0}])})],1)},vf=[],gf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"product-params"},[n("div",{staticClass:"product-params__wrapper"},[n("div",{staticClass:"product-params__param"},[n("div",{staticClass:"product-params__label"},[t._v(" Наименование Продукта ")]),n("div",{staticClass:"product-params__value"},[t._v(" "+t._s(t.product.name)+" ")])]),n("div",{staticClass:"product-params__param"},[n("div",{staticClass:"organization-params__label"},[t._v(" Диапазон кредита ")]),n("div",{staticClass:"product-params__value"},[t._v(" "+t._s(t.product.amountMin)+" - "+t._s(t.product.amountMax)+"₽ ")])]),n("div",{staticClass:"product-params__param"},[n("div",{staticClass:"product-params__label"},[t._v(" Код Продукта ")]),n("div",{staticClass:"product-params__value"},[n("copyable-element",{attrs:{content:t.product.code}},[t._v(" "+t._s(t.product.code)+" ")])],1)]),n("div",{staticClass:"product-params__param"},[n("div",{staticClass:"product-params__label"},[t._v(" Первоначальный взнос ")]),n("div",{staticClass:"product-params__value"},[t._v(" "+t._s(t.product.initialFeeMin)+" - "+t._s(t.product.initialFeeMax)+"% ")])]),n("div",{staticClass:"product-params__param"},[t._m(0),n("div",{staticClass:"product-params__value _description"},[n("copyable-element",{attrs:{content:t.product.description}},[t._v(" "+t._s(t.product.description)+" ")])],1)]),t.productTerms[0]?n("div",{staticClass:"product-params__param"},[n("div",{staticClass:"product-params__label"},[t._v(" Ставка 1 ")]),n("div",{staticClass:"product-params__value"},[n("div",{staticClass:"product-params__value-term"},[t._v(" "+t._s(t.productTerms[0].termMin)+" - "+t._s(t.productTerms[0].termMax)+" мес. ")]),n("div",{staticClass:"product-params__value-rate"},[t._v(" "+t._s(t.productTerms[0].rate)+" % ")])])]):t._e(),n("div",{staticClass:"product-params__param"},[n("div",{staticClass:"product-params__label"},[t._v(" Статус ТО ")]),n("div",{staticClass:"product-params__value"},[n("status",{attrs:{variant:t.product.status}},[t._v(" "+t._s("on"===t.product.status?"Активен":"Неактивен")+" ")])],1)]),n("div",{staticClass:"product-params__param"},[n("div",{staticClass:"product-params__label"},[t._v(" Ставка 2 ")]),n("div",{staticClass:"product-params__value"},[t.productTerms[1]?[n("div",{staticClass:"product-params__value-term"},[t._v(" "+t._s(t.productTerms[1].termMin)+" - "+t._s(t.productTerms[1].termMax)+" мес. ")]),n("div",{staticClass:"product-params__value-rate"},[t._v(" "+t._s(t.productTerms[1].rate)+" % ")])]:n("span",[t._v(" — ")])],2)])]),n("update-button",{attrs:{icon:"edit","icon-height":"16","icon-width":"16"},on:{click:function(e){t.showModal=!0}}},[t._v(" Редактировать параметры ")]),t.showModal?n("credit-product-side-page",{attrs:{"credit-product":t.product},on:{close:function(e){t.showModal=!1}}}):t._e()],1)},bf=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"product-params__label-container"},[n("div",{staticClass:"product-params__label"},[t._v(" Краткое описание продукта ")])])}],_f={name:"CreditProductParams",components:{UpdateButton:ra,Status:ys,CopyableElement:Hc,CreditProductSidePage:of},inheritAttrs:!1,props:{product:{type:Object,default:function(){}}},data:function(){return{showModal:!1}},computed:{productTerms:function(){return this.product.terms}}},kf=_f,yf=(n("59b2"),Object(M["a"])(kf,gf,bf,!1,null,null,null)),wf=yf.exports,Of=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form-input-new",{class:t.$style.input,attrs:{type:"search",placeholder:"Поиск по названию или коду продукта"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("vuetable",{attrs:{"api-mode":!1,fields:t.headers,data:t.filteredOrganizations},scopedSlots:t._u([{key:"organizationName",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"crm-link-black",on:{click:function(e){return t.onSelectOrganization(r.organizationId)}}},[t._v(" "+t._s(r.organizationName)+" ")])]}},{key:"rate1",fn:function(e){var r=e.rowData;return[n("form-input-new",{staticStyle:{width:"124px"},on:{blur:function(e){return t.onTermChange(r,"rate1")}},scopedSlots:t._u([{key:"suffix-with-line",fn:function(){return[t._v(" % ")]},proxy:!0}],null,!0),model:{value:r.rate1,callback:function(e){t.$set(r,"rate1",t._n(e))},expression:"rowData.rate1"}})]}},{key:"rate2",fn:function(e){var r=e.rowData;return[null!==r.rate2?n("form-input-new",{staticStyle:{width:"124px"},on:{blur:function(e){return t.onTermChange(r,"rate2")}},scopedSlots:t._u([{key:"suffix-with-line",fn:function(){return[t._v(" % ")]},proxy:!0}],null,!0),model:{value:r.rate2,callback:function(e){t.$set(r,"rate2",t._n(e))},expression:"rowData.rate2"}}):t._e()]}},{key:"discount",fn:function(e){var r=e.rowData;return[n("form-input-new",{staticStyle:{width:"175px"},on:{blur:function(e){return t.onDiscountChange(r)}},scopedSlots:t._u([{key:"suffix-with-line",fn:function(){return[t._v(" % ")]},proxy:!0}],null,!0),model:{value:r.discount,callback:function(e){t.$set(r,"discount",t._n(e))},expression:"rowData.discount"}})]}}])}),t.isShowOrganizationDetails?n("organization-details",{attrs:{organization:t.selectedOrganization,"is-loading":t.isLoadingOrganization},on:{close:t.onCloseOrganizationDetails}}):t._e()],1)},Cf=[],xf=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("side-page",{attrs:{size:"sm"},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[r("div",{staticClass:"title-wrap"},[r("div",[t._v("Параметры ТО")]),t.organization?r("div",{class:["status-wrap","on"===t.organization.status?"active":"inactive"]},[r("status",{attrs:{variant:t.organization.status}},[t._v(" "+t._s("on"===t.organization.status?"Активна":"Неактивна")+" ")])],1):t._e()])]},proxy:!0},{key:"default",fn:function(){return[t.isLoading?r("spinner"):[r("detail-item",{attrs:{title:"Региональный центр"}},[t._v(" "+t._s(t.organization.regCenter)+" ")]),r("detail-item",{attrs:{title:"Кредитно кассовый офис"}},[t._v(" "+t._s(t.organization.kko)+" ")]),r("detail-item",{attrs:{title:"Наименование организации"}},[t._v(" "+t._s(t.organization.name)+" ")]),r("detail-item",{attrs:{title:"Код организации"}},[r("copyable-element",{attrs:{content:t.organization.code}},[t._v(" "+t._s(t.organization.code)+" ")])],1),r("detail-item",{attrs:{title:"Торговая сеть"}},[t._v(" "+t._s(t.organization.commercialNet)+" ")]),t.organization.curatorFio?r("detail-item",{attrs:{title:"Куратор сети"}},[t._v(" "+t._s(t.organization.curatorFio)+" ")]):t._e(),r("div",{staticClass:"links"},[r("router-link",{staticClass:"link",attrs:{to:"/organizations/"+t.organization.id+"?tab=shops",target:"_blank"}},[r("span",{directives:[{name:"tippy",rawName:"v-tippy",value:t.tooltipConfig,expression:"tooltipConfig"}],staticClass:"link-title"},[t._v(" Торговые точки ")]),r("img",{attrs:{src:n("b64a"),alt:"link"}})]),r("router-link",{staticClass:"link",attrs:{to:"/organizations/"+t.organization.id+"?tab=organization-credit-products",target:"_blank"}},[r("span",{directives:[{name:"tippy",rawName:"v-tippy",value:t.tooltipConfig,expression:"tooltipConfig"}],staticClass:"link-title"},[t._v(" Кредитные продукты ")]),r("img",{attrs:{src:n("b64a"),alt:"link"}})])],1)]]},proxy:!0},{key:"cancel-button",fn:function(){return[r("div",{on:{click:t.close}},[t._v(" Закрыть ")])]},proxy:!0}])})},Sf=[],Pf={name:"OrganizationDetails",components:{SidePage:Ho,DetailItem:ac,CopyableElement:Hc,Status:ys,Spinner:Xn},props:{organization:{type:[Object,null],default:null},isLoading:Boolean},data:function(){return{tooltipConfig:{placement:"right",theme:"crm-additional",content:"ссылка откроется <br> в новом окне"}}},methods:{close:function(){this.$emit("close")}}},jf=Pf,Ef=(n("b089"),Object(M["a"])(jf,xf,Sf,!1,null,"4749b7ac",null)),Rf=Ef.exports,$f=[{name:"organizationName",title:"Наименование ТО",width:"382px"},{name:"organizationCode",title:"Код ТО",width:"141px"},{name:"rate1",title:"Ставка 1",width:"148px"},{name:"rate2",title:"Ставка 2",width:"200px"},{name:"discount",title:"Скидка по продукту"}],Tf={name:"CreditProductConnectedTo",components:{FormInputNew:At,Vuetable:hs["a"],OrganizationDetails:Rf},inheritAttrs:!1,props:{connectedOrganizations:{type:Array,required:!0},productId:{type:Number,required:!0}},data:function(){return{search:"",headers:$f,selectedOrganization:null,isLoadingOrganization:!1,isShowOrganizationDetails:!1}},computed:{filteredOrganizations:function(){return this.connectedOrganizations.filter(this.filterByNameOrCode)}},methods:{onTermChange:function(t,e){var n=this;return Object(Gn["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t[e],!(""===a||a<0||a>99)){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,n.updateLinkedOrganization(Ka(t,e));case 5:case"end":return r.stop()}}),r)})))()},onDiscountChange:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.updateLinkedOrganization(t);case 2:case"end":return n.stop()}}),n)})))()},updateLinkedOrganization:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Ou.editOrganizationFromCreditProduct({cpId:e.productId,orgId:t.organizationId,data:t});case 2:case"end":return n.stop()}}),n)})))()},filterByNameOrCode:function(t){if(!this.search)return!0;var e=this.search.toLowerCase(),n=t.organizationName.toLowerCase().includes(e),r=t.organizationCode.toLowerCase().includes(e);return n||r},onSelectOrganization:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.isLoadingOrganization=!0,e.isShowOrganizationDetails=!0,n.next=4,qs.fetchOrganizationById(t);case 4:e.selectedOrganization=n.sent,e.isLoadingOrganization=!1;case 6:case"end":return n.stop()}}),n)})))()},onCloseOrganizationDetails:function(){this.selectedOrganization=null,this.isShowOrganizationDetails=!1}}},Af=Tf,If=n("1637");function Df(t){this["$style"]=If["default"].locals||If["default"]}var zf=Object(M["a"])(Af,Of,Cf,!1,Df,null,null),Nf=zf.exports,Mf=[{title:"Параметры",value:"CreditProductParams"},{title:"Подключенные ТО",value:"ConnectedTo"}],Lf={name:"CreditProduct",components:{CreditProductParams:wf,PageWrapper:ir,Tabs:ci,CreditProductConnectedTo:Nf,Breadcrumbs:vi,CrmButton:ie},data:function(){return{showModal:!1,currentTab:"CreditProductParams",tabs:Mf,isLoading:!1}},computed:Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("creditProduct",["currentCreditProduct","connectedCreditProductOrganizations"])),{},{productId:function(){return+this.$route.params.id}}),created:function(){var t=this;this.isLoading=!0,Promise.all([this.fetchCreditProductById(this.productId),this.fetchConnectedCreditProductOrganizations({cpId:this.productId})]).then((function(){t.isLoading=!1}))},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("creditProduct",["fetchCreditProductById","fetchConnectedCreditProductOrganizations"])),{},{editCreditProductConnectedTo:function(){var t=this.$route.params.id;this.$router.push({name:"creditProductAddTo",params:{id:t}})}})},Bf=Lf,Ff=Object(M["a"])(Bf,hf,vf,!1,null,null,null),qf=Ff.exports,Uf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-wrapper",{attrs:{"is-loading":t.isLoading},scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[n("nav-back",{attrs:{path:"/products/"+t.creditProductId}})]},proxy:!0},{key:"title",fn:function(){return[t._v(" Подключение ТО к продукту ")]},proxy:!0},{key:"filters",fn:function(){return[n("div",{staticClass:"add-to__filters"},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск по названию или коду TO"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("radio-list",{attrs:{options:t.statuses,name:"to-list"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.option;return[t._v(" "+t._s(n.title)+" ")]}}]),model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)]},proxy:!0},{key:"buttons",fn:function(){return[n("update-button",{attrs:{icon:"upload"}},[t._v(" Загрузить несколько ТО ")]),n("update-button",{attrs:{icon:"download"}},[t._v(" Скачать в xlsx ")])]},proxy:!0},{key:"default",fn:function(){return[t.isLoading?n("spinner",{attrs:{size:"md"}}):n("vuetable",{attrs:{"api-mode":!1,fields:t.headers,data:t.filteredOrganizations,css:{tableClass:"credit-product-add-to-table"}},scopedSlots:t._u([{key:"name",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"crm-link-black",on:{click:function(e){return t.selectOrganization(r)}}},[t._v(" "+t._s(r.name)+" ")])]}},{key:"mark",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"text-align-right"},[n("otp-switcher",{attrs:{checked:r.attr.creditproduct},on:{change:function(e){return t.toggleOrganization(e,r)}}})],1)]}}])}),t.selectedOrganization?n("organization-details",{attrs:{organization:t.selectedOrganization},on:{close:function(e){t.selectedOrganization=null}}}):t._e()]},proxy:!0}])})},Gf=[],Vf=[{name:"name",title:"Наименование ТО",width:289},{name:"code",title:"Код ТО",width:112},{name:"regCenter",title:"РЦ",width:170},{name:"kko",title:"ККО",width:165},{name:"commercialNet",title:"Торговая сеть",sortable:!0},{name:"curatorFio",title:"Куратор",width:183},{name:"mark",title:"вкл/выкл",width:70}],Hf={name:"CreditProductAddTo",components:{FormInputNew:At,RadioList:uo,OtpSwitcher:lp,Spinner:Xn,PageWrapper:ir,Vuetable:Vu.a,OrganizationDetails:Rf,NavBack:hp,UpdateButton:ra},data:function(){return{localOrganizations:null,search:"",status:"all",isLoading:!1,selectedOrganization:null,headers:Vf}},computed:{filteredOrganizations:function(){return this.localOrganizations.filter(this.filterByNameOrCode).filter(this.filterByStatus)},creditProductId:function(){return+this.$route.params.id},statuses:function(){var t=this.localOrganizations.length,e=this.localOrganizations.filter((function(t){var e=t.attr;return e.creditproduct})).length,n=t-e;return[{value:"all",title:"Все",count:t},{value:"on",title:"Включенные",count:e},{value:"off",title:"Выключенные",count:n}]}},created:function(){var t=this;this.isLoading=!0,this.fetchOrganizations({hasAttr:!0,creditproduct:this.creditProductId}).then((function(e){t.localOrganizations=e.filter((function(t){return"on"===t.status})).sort((function(t,e){return Number(e.attr.creditproduct)-Number(t.attr.creditproduct)}))})).finally((function(){t.isLoading=!1}))},methods:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("organization",["fetchOrganizations"])),Object(Vn["b"])("creditProduct",["toggleOrganizationToCreditProduct"])),{},{toggleOrganization:function(t,e){var n=this;return Object(Gn["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.toggleOrganizationToCreditProduct({flag:t,cpId:n.creditProductId,orgId:e.id});case 2:e.attr.creditproduct=!e.attr.creditproduct;case 3:case"end":return r.stop()}}),r)})))()},filterByNameOrCode:function(t){if(!this.search)return!0;var e=this.search.toLowerCase(),n=t.name.toLowerCase().includes(e),r=t.code.toLowerCase().includes(e);return n||r},filterByStatus:function(t){if("all"===this.status)return!0;var e="on"===this.status&&t.attr.creditproduct,n="off"===this.status&&!t.attr.creditproduct;return e||n},selectOrganization:function(t){this.selectedOrganization=t}})},Wf=Hf,Kf=(n("b1ed"),Object(M["a"])(Wf,Uf,Gf,!1,null,null,null)),Yf=Kf.exports,Zf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-wrapper",{attrs:{"is-main":""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Доп. продукты и услуги ")]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{on:{click:function(e){t.showModal=!0}}},[t._v(" Создать доп.продукт ")])]},proxy:!0},{key:"default",fn:function(){return[t.isLoading?n("spinner"):n("products-table",{attrs:{items:t.additionalProducts}}),t.showModal?n("edit-additional-product",{on:{close:function(e){t.showModal=!1}}}):t._e()]},proxy:!0}])})},Qf=[],Jf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"side-page"}},[n("side-page",{attrs:{size:"md","block-background":""},on:{close:t.onClose},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" "+t._s(t.title)+" ")]},proxy:!0},{key:"default",fn:function(){return[n("form-item",{attrs:{label:"Наименование доп.продукта"}},[n("form-input-new",{attrs:{size:"md",placeholder:"Мультиуслуга"},model:{value:t.fields.name,callback:function(e){t.$set(t.fields,"name",e)},expression:"fields.name"}})],1),n("form-item",{attrs:{label:"Программа услуг"}},[n("crm-select",{attrs:{options:t.serviceTypes,size:"md",placeholder:"Выберите из списка",label:"code","model-field":"id"},model:{value:t.fields.serviceTypeId,callback:function(e){t.$set(t.fields,"serviceTypeId",e)},expression:"fields.serviceTypeId"}})],1),n("form-item",{attrs:{label:"Тип доп. продукта"}},[n("crm-select",{attrs:{options:t.productTypes,size:"md",placeholder:"Выберите из списка",label:"name","model-field":"name"},model:{value:t.fields.productType,callback:function(e){t.$set(t.fields,"productType",e)},expression:"fields.productType"}})],1),n("form-item",{attrs:{label:"Тип расчета"}},[n("crm-select",{attrs:{options:t.paymentTypes,size:"md",placeholder:"Выберите из списка",label:"name","model-field":"name"},model:{value:t.fields.paymentType,callback:function(e){t.$set(t.fields,"paymentType",e)},expression:"fields.paymentType"}})],1),n("form-item",{staticClass:"crm-mb-32",attrs:{label:"Тариф"}},[n("form-input-new",{attrs:{size:"md",placeholder:"1 200"},scopedSlots:t._u([{key:"suffix-with-line",fn:function(){return[t._v(" "+t._s(t.getPaymentSign)+" ")]},proxy:!0}]),model:{value:t.fields.paymentValue,callback:function(e){t.$set(t.fields,"paymentValue",e)},expression:"fields.paymentValue"}})],1),t.additionalProduct?n("component-with-label",{staticClass:"crm-mb-24",attrs:{label:"Статус"}},[n("radio-list",{attrs:{options:t.statuses,name:"to-list"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.option;return[t._v(" "+t._s(n.title)+" ")]}}],null,!1,571049439),model:{value:t.fields.status,callback:function(e){t.$set(t.fields,"status",e)},expression:"fields.status"}})],1):t._e(),n("form-item",{attrs:{label:"Краткое описание доп.продукта","no-margin-bottom":""}},[n("textarea-resizeable",{attrs:{size:"md",placeholder:"Текст будет показан клиенту"},model:{value:t.fields.description,callback:function(e){t.$set(t.fields,"description",e)},expression:"fields.description"}})],1),t.error?n("badge",{staticClass:"crm-mt-24",attrs:{variant:"danger"}},[t._v(" "+t._s(t.error)+" ")]):t._e()]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{attrs:{disabled:t.isLoading},on:{click:t.onSave}},[t._v(" Сохранить ")])]},proxy:!0},{key:"cancel-button",fn:function(){return[n("div",{on:{click:t.onReset}},[t._v(" Сбросить ")])]},proxy:!0}])})],1)},Xf=[],tm=(n("a4d3"),n("e01a"),{id:null,name:"",serviceTypeId:"",productType:"",paymentType:"",paymentValue:"",status:"on",description:""}),em={name:"EditAdditionalProduct",components:{Badge:ve,FormItem:it,FormInputNew:At,CrmSelect:Ja,ComponentWithLabel:go,RadioList:uo,TextareaResizeable:qp,CrmButton:ie,SidePage:Ho},props:{additionalProduct:{type:[Object,void 0],default:void 0}},data:function(){return{fields:Object(De["a"])({},tm),statuses:[{value:"on",title:"Активен"},{value:"off",title:"Неактивен"}],error:null,isLoading:!1}},computed:Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("additionalProduct",["productTypes","paymentTypes","serviceTypes"])),{},{title:function(){return this.additionalProduct?"Редактирование доп. продукта":"Создание доп. продукта"},getPaymentSign:function(){return"Классический"===this.fields.productType?"%":"Руб"}}),mounted:function(){this.additionalProduct&&(this.fields=Object(De["a"])({},this.additionalProduct),this.fields.paymentValue=this.fields.payment?this.fields.payment:this.fields.rate)},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("additionalProduct",["saveAdditionalProduct","updateAdditionalProduct"])),{},{onSave:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.error=null,t.isLoading=!0,n={id:t.additionalProduct?t.additionalProduct.id:tm.id,name:t.fields.name,productType:t.fields.productType,paymentType:t.fields.paymentType,serviceTypeId:t.fields.serviceTypeId,status:t.fields.status,description:t.fields.description},"%"===t.getPaymentSign?n.rate=t.fields.paymentValue:n.payment=t.fields.paymentValue,e.prev=4,!t.additionalProduct){e.next=10;break}return e.next=8,t.updateAdditionalProduct(n);case 8:e.next=12;break;case 10:return e.next=12,t.saveAdditionalProduct(n);case 12:t.onClose(),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](4),a=null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.data,t.error=a||e.t0.message;case 19:t.isLoading=!1;case 20:case"end":return e.stop()}}),e,null,[[4,15]])})))()},onReset:function(){this.additionalProduct?(this.fields=Object(De["a"])({},this.additionalProduct),this.fields.paymentValue=this.fields.payment?this.fields.payment:this.fields.rate):this.fields=Object(De["a"])({},tm)},onClose:function(){this.$emit("close")}})},nm=em,rm=Object(M["a"])(nm,Jf,Xf,!1,null,null,null),am=rm.exports,om=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style.filters},[n("div",{class:t.$style.input},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск по названию продукта"},model:{value:t.filterName,callback:function(e){t.filterName=e},expression:"filterName"}})],1),n("radio-list",{attrs:{options:t.statuses,name:"to-list"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.option;return[t._v(" "+t._s(n.title)+" ")]}}]),model:{value:t.filterStatus,callback:function(e){t.filterStatus=e},expression:"filterStatus"}})],1),n("vuetable",{attrs:{"api-mode":!1,data:t.tableItems,"data-manager":t.dataManager,"data-path":"data",fields:t.fields,"no-data-template":"Нет данных","sort-order":t.defaultSort},scopedSlots:t._u([{key:"name",fn:function(e){return[n("router-link",{staticClass:"crm-link-black",attrs:{to:{name:"additionalProduct",params:{id:e.rowData.id}}}},[n("status",{attrs:{variant:e.rowData.status}},[t._v(" "+t._s(e.rowData.name)+" ")])],1)]}},{key:"tariff",fn:function(e){return[t._v(" "+t._s(t.getTariff(e.rowData))+" ")]}},{key:"connected",fn:function(e){return[n("div",{staticClass:"text-align-right"},[n("router-link",{attrs:{to:"additional-products/"+e.rowData.id+"?tab=AdditionalProductConnectedTo"}},[t._v(" "+t._s(e.rowData.totalOrganizations)+" ")])],1)]}}])})],1)},sm=[],im={name:"ProductsTable",components:{FormInputNew:At,RadioList:uo,Status:ys,Vuetable:hs["a"]},props:{items:{type:Array,required:!0}},data:function(){return{filterName:"",filterStatus:"all",sortName:"",sortDirection:"",statuses:[{value:"on",title:"Активные"},{value:"off",title:"Неактивные"},{value:"all",title:"Все"}],fields:[{name:"name",sortField:"name",title:"Название доп. продукта"},{name:"serviceTypeCode",sortField:"serviceTypeCode",title:"Программа услуг"},{name:"tariff",sortField:"payment",title:"Тариф"},{name:"productType",sortField:"productType",title:"Тип доп. продукта"},{name:"connected",title:"Подключено ТО"},{name:"empty",title:"",width:"15%"}],defaultSort:[{direction:"asc",field:"name",sortField:"name"}]}},computed:{tableItems:function(){var t=this.items.filter(this.filterByName).filter(this.filterByStatus),e=this.sortName?jd()(t,this.sortName,this.sortDirection):t;return{data:e}}},methods:{getTariff:function(t){return null!==t.payment?"".concat(t.payment,"₽"):"".concat(t.rate,"%")},filterByName:function(t){return!this.filterName||t.name.toLowerCase().includes(this.filterName.toLowerCase())},filterByStatus:function(t){if("all"===this.filterStatus)return!0;var e="on"===this.filterStatus&&"on"===t.status,n="off"===this.filterStatus&&"off"===t.status;return e||n},dataManager:function(t){return t.length>0&&(this.sortName=t[0].sortField,this.sortDirection=t[0].direction),this.tableItems}}},cm=im,lm=n("b546");function um(t){this["$style"]=lm["default"].locals||lm["default"]}var dm=Object(M["a"])(cm,om,sm,!1,um,null,null),pm=dm.exports,fm={name:"AdditionalProducts",components:{PageWrapper:ir,CrmButton:ie,EditAdditionalProduct:am,Spinner:Xn,ProductsTable:pm},data:function(){return{isLoading:!1,showModal:!1}},computed:Object(De["a"])({},Object(Vn["e"])("additionalProduct",["additionalProducts","productTypes","serviceTypes","paymentTypes"])),created:function(){var t=this;this.isLoading=!0,Promise.all([this.fetchAdditionalProducts(),this.fetchServiceTypes()]).then((function(){t.isLoading=!1}))},methods:Object(De["a"])({},Object(Vn["b"])("additionalProduct",["fetchAdditionalProducts","fetchServiceTypes"]))},mm=fm,hm=Object(M["a"])(mm,Zf,Qf,!1,null,null,null),vm=hm.exports,gm=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-wrapper",{attrs:{"is-loading":t.isLoading},scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[n("breadcrumbs")]},proxy:!0},{key:"title",fn:function(){return[t._v(" "+t._s(t.title)+" ")]},proxy:!0},t.currentAdditionalProduct?{key:"buttons",fn:function(){return[n("crm-button",{on:{click:t.editAdditionalProductConnectedTo}},[t._v(" Подключить / отключить ТО ")])]},proxy:!0}:null,t.currentAdditionalProduct?{key:"tabs",fn:function(){return[n("tabs",{attrs:{tabs:t.tabs,"use-query":""},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}})]},proxy:!0}:null,t.currentAdditionalProduct?{key:"default",fn:function(){return[n(t.currentTab,{tag:"component",attrs:{"additional-product":t.currentAdditionalProduct}})]},proxy:!0}:null],null,!0)})},bm=[],_m=(n("9129"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"wrapper"},[n("detail-item",{attrs:{title:"Наименование доп.продукта"}},[t._v(" "+t._s(t.additionalProduct.name)+" ")]),n("detail-item",{attrs:{title:"Тип доп.продукта"}},[t._v(" "+t._s(t.additionalProduct.productType)+" ")]),n("detail-item",{attrs:{title:"Программа услуг"}},[n("copyable-element",{attrs:{content:t.additionalProduct.serviceTypeCode}},[t._v(" "+t._s(t.additionalProduct.serviceTypeCode)+" ")])],1),n("detail-item",{attrs:{title:"Тип расчёта"}},[t._v(" "+t._s(t.additionalProduct.paymentType)+" ")]),n("detail-item",{attrs:{title:"Краткое описание доп.продукта"}},[n("copyable-element",{attrs:{content:t.additionalProduct.description}},[t._v(" "+t._s(t.additionalProduct.description)+" ")])],1),n("detail-item",{attrs:{title:"Тариф"}},[t.additionalProduct.payment||t.additionalProduct.rate?[t.additionalProduct.payment?n("span",[t._v(" "+t._s(t.formatPrice(t.additionalProduct.payment))+"₽ ")]):t._e(),t.additionalProduct.rate?n("span",[t._v(t._s(t.additionalProduct.rate)+"%")]):t._e()]:n("span",[t._v(" — ")])],2),n("detail-item",{attrs:{title:"Статус продукта"}},[n("status",{attrs:{variant:t.additionalProduct.status}},[t._v(" "+t._s("on"===t.additionalProduct.status?"Активен":"Неактивен")+" ")])],1)],1),n("update-button",{attrs:{icon:"edit","icon-height":"16","icon-width":"16"},on:{click:function(e){t.showModal=!0}}},[t._v(" Редактировать параметры ")]),t.showModal?n("edit-additional-product",{attrs:{"additional-product":t.additionalProduct},on:{close:function(e){t.showModal=!1}}}):t._e()],1)}),km=[],ym=function(t){return new Intl.NumberFormat("ru-RU").format(t)},wm=function(t){return+t.replace(/[^0-9,]/g,"").replace(/,/g,".")},Om={name:"AdditionalProductParams",components:{Status:ys,CopyableElement:Hc,UpdateButton:ra,EditAdditionalProduct:am,DetailItem:ac},props:{additionalProduct:{type:Object,required:!0}},data:function(){return{showModal:!1}},methods:{formatPrice:function(t){return ym(t)}}},Cm=Om,xm=(n("d27f"),Object(M["a"])(Cm,_m,km,!1,null,"f159fbfc",null)),Sm=xm.exports,Pm=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isLoading?n("spinner"):t._e(),t.isLoading?t._e():n("div",[n("connected-companies-table",{attrs:{items:t.organizations},on:{"on-select":t.selectOrganization}}),t.selectedOrganization?n("organization-details",{attrs:{organization:t.selectedOrganization},on:{close:function(e){t.selectedOrganization=null}}}):t._e()],1)],1)},jm=[],Em=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("portal",{attrs:{to:"side-page"}},[r("side-page",{attrs:{size:"sm"},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[r("div",{staticClass:"title-wrap"},[r("div",[t._v("Параметры ТО")]),r("div",{class:["status-wrap","on"===t.organization.status?"active":"inactive"]},[r("status",{attrs:{variant:t.organization.status}},["on"===t.organization.status?r("span",[t._v("Активна")]):t._e(),"off"===t.organization.status?r("span",[t._v("Неактивна")]):t._e()])],1)])]},proxy:!0},{key:"default",fn:function(){return[r("detail-item",{attrs:{title:"Региональный центр"}},[t._v(" "+t._s(t.organization.regCenter)+" ")]),r("detail-item",{attrs:{title:"Кредитно кассовый офис"}},[t._v(" "+t._s(t.organization.kko)+" ")]),r("detail-item",{attrs:{title:"Наименование организации"}},[t._v(" "+t._s(t.organization.name)+" ")]),r("detail-item",{attrs:{title:"Код организации"}},[r("copyable-element",{attrs:{content:t.organization.code}},[t._v(" "+t._s(t.organization.code)+" ")])],1),r("detail-item",{attrs:{title:"Торговая сеть"}},[t._v(" "+t._s(t.organization.commercialNet)+" ")]),t.organization.curatorFio?r("detail-item",{attrs:{title:"Куратор сети"}},[t._v(" "+t._s(t.organization.curatorFio)+" ")]):t._e(),r("div",{staticClass:"links"},[r("router-link",{staticClass:"link",attrs:{to:"/organizations/"+t.organization.id+"?tab=shops",target:"_blank"}},[r("div",{directives:[{name:"tippy",rawName:"v-tippy",value:t.tooltipConfig,expression:"tooltipConfig"}],staticClass:"link-title"},[t._v(" Торговые точки ")]),r("img",{attrs:{src:n("b64a"),alt:"link"}})]),r("router-link",{staticClass:"link",attrs:{to:"/organizations/"+t.organization.id+"?tab=organization-credit-products",target:"_blank"}},[r("div",{directives:[{name:"tippy",rawName:"v-tippy",value:t.tooltipConfig,expression:"tooltipConfig"}],staticClass:"link-title"},[t._v(" Кредитные продукты ")]),r("img",{attrs:{src:n("b64a"),alt:"link"}})]),t.showAddProductsLink?r("router-link",{staticClass:"link",attrs:{to:"/organizations/"+t.organization.id+"?tab=additional-products",target:"_blank"}},[r("div",{directives:[{name:"tippy",rawName:"v-tippy",value:t.tooltipConfig,expression:"tooltipConfig"}],staticClass:"link-title"},[t._v(" Доп.продукты ")]),r("img",{attrs:{src:n("b64a"),alt:"link"}})]):t._e()],1)]},proxy:!0},{key:"cancel-button",fn:function(){return[r("div",{on:{click:t.close}},[t._v(" Закрыть ")])]},proxy:!0}])})],1)},Rm=[],$m={name:"OrganizationDetails",components:{SidePage:Ho,DetailItem:ac,CopyableElement:Hc,Status:ys},props:{organization:{type:Object,required:!0},showAddProductsLink:Boolean},data:function(){return{tooltipConfig:{placement:"right",theme:"crm-additional",content:"ссылка откроется <br> в новом окне"}}},methods:{close:function(){this.$emit("close")}}},Tm=$m,Am=(n("b275"),Object(M["a"])(Tm,Em,Rm,!1,null,"953092d4",null)),Im=Am.exports,Dm=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"filter-wrap"},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск по названию или коду ТО"},model:{value:t.filterName,callback:function(e){t.filterName=e},expression:"filterName"}})],1),n("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,data:t.tableItems,"data-path":"data","data-manager":t.dataManager,fields:t.fields,"no-data-template":"Нет данных"},scopedSlots:t._u([{key:"name",fn:function(e){return[n("div",{staticClass:"crm-link-black",on:{click:function(n){return t.$emit("on-select",e.rowData)}}},[t._v(" "+t._s(e.rowData.name)+" ")])]}}])})],1)},zm=[],Nm={name:"ConnectedCompaniesTable",components:{FormInputNew:At,Vuetable:hs["a"]},props:{items:{type:Array,required:!0}},data:function(){return{filterName:"",sortName:"",sortDirection:"",fields:[{name:"name",sortField:"name",title:"Наименование ТО"},{name:"code",sortField:"code",title:"Код ТО"}]}},computed:{tableItems:function(){var t=this.items.filter(this.filterByName),e=this.sortName?jd()(t,this.sortName,this.sortDirection):t;return{data:e}}},methods:{filterByName:function(t){if(!this.filterName)return!0;var e=this.filterName.toLowerCase(),n=t.name.toLowerCase().includes(e),r=t.code.includes(e);return n||r},dataManager:function(t){return t.length>0&&(this.sortName=t[0].sortField,this.sortDirection=t[0].direction),this.tableItems}}},Mm=Nm,Lm=(n("918e"),Object(M["a"])(Mm,Dm,zm,!1,null,"ad40f1c0",null)),Bm=Lm.exports,Fm={name:"AdditionalProductConnectedTo",components:{ConnectedCompaniesTable:Bm,Spinner:Xn,OrganizationDetails:Im},props:{additionalProduct:{type:Object,required:!0}},data:function(){return{isLoading:!1,organizations:[],selectedOrganization:null}},created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,qs.fetchOrganizations(!0,{additionalproduct:t.additionalProduct.id,page:1,size:200});case 3:n=e.sent,t.organizations=n.organizations.filter((function(t){return t.attr.additionalproduct&&"on"===t.status})),t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},methods:{selectOrganization:function(t){this.selectedOrganization=t}}},qm=Fm,Um=Object(M["a"])(qm,Pm,jm,!1,null,null,null),Gm=Um.exports,Vm={name:"AdditionalProduct",components:{AdditionalProductConnectedTo:Gm,Breadcrumbs:vi,PageWrapper:ir,Tabs:ci,AdditionalProductParams:Sm,CrmButton:ie,UpdateButton:ra},data:function(){return{isLoading:!1,currentTab:"AdditionalProductParams",tabs:[{title:"Параметры",value:"AdditionalProductParams"},{title:"Подключенные ТО",value:"AdditionalProductConnectedTo"}]}},computed:Object(De["a"])(Object(De["a"])({},Object(Vn["c"])("additionalProduct",["getAdditionalProductById"])),{},{title:function(){var t;return this.isProductIdInvalid?"Ошибка: неверно указан id доп. продукта (".concat(this.$route.params.id,")"):this.currentAdditionalProduct?null===(t=this.currentAdditionalProduct)||void 0===t?void 0:t.name:"Ошибка: доп. продукт с id ".concat(this.productId," не найден")},productId:function(){return Number(this.$route.params.id)},isProductIdInvalid:function(){return Number.isNaN(this.productId)},currentAdditionalProduct:function(){return this.getAdditionalProductById(this.productId)}}),created:function(){var t=this;this.isProductIdInvalid||(this.isLoading=!0,Promise.all([this.fetchAdditionalProducts(),this.fetchServiceTypes()]).then((function(){t.isLoading=!1})))},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("additionalProduct",["fetchAdditionalProducts","fetchServiceTypes"])),{},{editAdditionalProductConnectedTo:function(){var t=this.$route.params.id;this.$router.push({name:"additionalProductAddTo",params:{id:t}})}})},Hm=Vm,Wm=Object(M["a"])(Hm,gm,bm,!1,null,null,null),Km=Wm.exports,Ym=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-wrapper",{scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[n("nav-back",{attrs:{path:"/additional-products/"+t.id}})]},proxy:!0},{key:"title",fn:function(){return[t._v(" Подключение ТО к доп.продукту ")]},proxy:!0},{key:"buttons",fn:function(){return[n("update-button",{attrs:{icon:"upload"}},[t._v(" Загрузить несколько ТО ")]),n("update-button",{attrs:{icon:"download"}},[t._v(" Скачать в xlsx ")])]},proxy:!0},{key:"default",fn:function(){return[t.isLoading?n("spinner",{attrs:{size:"md"}}):n("div",[n("connect-companies-table",{attrs:{items:t.organizations},on:{"on-select":t.onSelect,"on-switch":t.onSwitch}}),t.selectedOrganization?n("organization-details",{attrs:{organization:t.selectedOrganization},on:{close:function(e){t.selectedOrganization=null}}}):t._e()],1)]},proxy:!0}])})},Zm=[],Qm=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"filters"},[n("div",{staticClass:"filter-name-wrap"},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск по названию или коду ТО"},model:{value:t.filterName,callback:function(e){t.filterName=e},expression:"filterName"}})],1),n("radio-list",{attrs:{options:t.statuses,name:"to-list"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.option;return[t._v(" "+t._s(n.title)+" ")]}}]),model:{value:t.filterStatus,callback:function(e){t.filterStatus=e},expression:"filterStatus"}})],1),n("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,data:t.tableItems,"data-manager":t.dataManager,"data-path":"data",fields:t.fields,"no-data-template":"Нет данных",css:{tableClass:"connect-companies-table"}},scopedSlots:t._u([{key:"name",fn:function(e){return[n("div",{staticClass:"crm-link-black",on:{click:function(n){return t.$emit("on-select",e.rowData)}}},[t._v(" "+t._s(e.rowData.name)+" ")])]}},{key:"switch",fn:function(e){return[n("div",{staticClass:"text-align-right"},[n("otp-switcher",{attrs:{checked:e.rowData.attr.additionalproduct},on:{change:function(n){return t.$emit("on-switch",n,e.rowData)}}})],1)]}}])})],1)},Jm=[],Xm={name:"ConnectCompaniesTable",components:{FormInputNew:At,RadioList:uo,OtpSwitcher:lp,Vuetable:hs["a"]},props:{items:{type:Array,required:!0}},data:function(){return{filterName:"",filterStatus:"all",sortName:"",sortDirection:"",fields:[{name:"name",sortField:"name",title:"Наименование ТО"},{name:"regCenter",sortField:"regCenter",title:"РЦ"},{name:"kko",sortField:"kko",title:"ККО"},{name:"code",sortField:"code",title:"Код ТО"},{name:"commercialNet",sortField:"commercialNet",title:"Торговая сеть"},{name:"curatorFio",sortField:"curatorFio",title:"Куратор"},{name:"switch",sortField:"attr.additionalproduct",title:"вкл/выкл"}]}},computed:{tableItems:function(){var t=this.items.filter(this.filterByName).filter(this.filterByStatus),e=this.sortName?jd()(t,this.sortName,this.sortDirection):t;return{data:e}},statuses:function(){return[{value:"all",title:"Все",count:this.items.length},{value:"on",title:"Включенные",count:this.onCompaniesCount},{value:"off",title:"Выключенные",count:this.offCompaniesCount}]},onCompaniesCount:function(){return this.items.filter((function(t){return t.attr.additionalproduct})).length},offCompaniesCount:function(){return this.items.filter((function(t){return!t.attr.additionalproduct})).length}},methods:{filterByName:function(t){if(!this.filterName)return!0;var e=this.filterName.toLowerCase(),n=t.name.toLowerCase().includes(e),r=t.code.toLowerCase().includes(e);return n||r},filterByStatus:function(t){if("all"===this.filterStatus)return!0;var e="on"===this.filterStatus&&t.attr.additionalproduct,n="off"===this.filterStatus&&!t.attr.additionalproduct;return e||n},dataManager:function(t){return t.length>0&&(this.sortName=t[0].sortField,this.sortDirection=t[0].direction),this.tableItems}}},th=Xm,eh=(n("56f1"),n("e3b3"),Object(M["a"])(th,Qm,Jm,!1,null,"7e8d0837",null)),nh=eh.exports,rh={name:"AddTo",components:{ConnectCompaniesTable:nh,OrganizationDetails:Im,Spinner:Xn,PageWrapper:ir,UpdateButton:ra,NavBack:hp},props:{show:Boolean,id:{type:[String,Number],default:""}},data:function(){return{organizations:[],showModal:!1,isLoading:!0,selectedOrganization:null}},created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qs.fetchOrganizations(!0,{additionalproduct:t.id,page:1,size:300});case 2:n=e.sent,r=n.organizations,t.organizations=r.filter((function(t){return"on"===t.status})).sort((function(t,e){var n=Number(t.attr.additionalproduct),r=Number(e.attr.additionalproduct);return r-n})),t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},methods:{onSelect:function(t){this.selectedOrganization=t},onSwitch:function(t,e){var n=this;return Object(Gn["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a={additionalProductId:n.id,organizationId:e.id},!t){r.next=6;break}return r.next=4,bd.addLinkedTo(a);case 4:r.next=8;break;case 6:return r.next=8,bd.removeLinkedTo(a);case 8:e.attr.additionalproduct=t;case 9:case"end":return r.stop()}}),r)})))()}}},ah=rh,oh=Object(M["a"])(ah,Ym,Zm,!1,null,null,null),sh=oh.exports,ih=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("page-wrapper",{attrs:{"is-main":""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Пользователи ")]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{on:{click:function(e){return t.$router.push({name:"AddUser"})}}},[t._v(" Добавить пользователя ")]),n("update-button",{attrs:{icon:"upload"},on:{click:function(e){t.showModal=!0}}},[t._v(" Загрузить несколько пользователей ")]),n("update-button",{attrs:{icon:"download"},on:{click:function(e){t.showModal=!0}}},[t._v(" Cкачать в xlsx ")])]},proxy:!0},{key:"filters",fn:function(){return[n("div",{class:t.$style.filters},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск пользователя"},on:{input:t.debouncedSearch},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("crm-filter",{attrs:{options:t.kkos,placeholder:"ККО"},model:{value:t.kko,callback:function(e){t.kko=e},expression:"kko"}}),n("crm-filter",{attrs:{options:[],placeholder:"ТО"},model:{value:t.organization,callback:function(e){t.organization=e},expression:"organization"}}),n("crm-filter",{attrs:{options:[],placeholder:"Торговая сеть"},model:{value:t.commercialNet,callback:function(e){t.commercialNet=e},expression:"commercialNet"}}),n("crm-filter",{attrs:{options:t.roles,label:"description","model-field":"role",placeholder:"Роль"},model:{value:t.userRole,callback:function(e){t.userRole=e},expression:"userRole"}})],1)]},proxy:!0},{key:"default",fn:function(){return[n("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,data:t.usersData,fields:t.headers,"data-manager":t.dataManager,"no-data-template":"Нет данных",css:{tableBodyClass:"users-table"}},scopedSlots:t._u([{key:"fio",fn:function(e){var r=e.rowData;return[n("router-link",{attrs:{to:{name:"user",params:{id:r.id}}}},[t._v(" "+t._s(r.fio)+" ")])]}},{key:"roles",fn:function(e){var r=e.rowData;return t._l(r.roles,(function(e,r){return n("div",{key:r},[t._v(" "+t._s(t.getUserRoleCaption(e))+" ")])}))}},{key:"contacts",fn:function(e){var r=e.rowData;return[n("div",{domProps:{innerHTML:t._s(r.contacts)}})]}}])}),t.total?n("pagination",{attrs:{"per-page":t.perPage,total:t.total,"current-page":t.currentPage,"pagination-data":t.paginationData},on:{onChangePage:t.onChangePage,onPerPageChange:t.onPerPageChange}}):t._e()]},proxy:!0}])})],1)},ch=[],lh={name:"Users",components:{PageWrapper:ir,CrmButton:ie,CrmFilter:ts,FormInputNew:At,UpdateButton:ra,Vuetable:hs["a"],Pagination:Ps},data:function(){return{usersData:{},search:"",kko:"",organization:"",commercialNet:"",userRole:"",sortField:"",sortDirection:"",headers:[{name:"fio",title:"ФИО",sortField:"fio"},{name:"login",title:"Логин",sortField:"login"},{name:"roles",title:"Роль",sortField:"roles"},{name:"contacts",title:"Контакты",sortField:"contacts"}],currentPage:1,perPage:10,total:0,debouncedSearch:function(){}}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("user",["users","usersCount"])),Object(Vn["e"])("reference",["kkos"])),Object(Vn["e"])("role",["roles"])),{},{lastPage:function(){return Math.ceil(this.total/this.perPage)},paginationData:function(){return{data:this.usersData,total:this.total,per_page:this.perPage,current_page:this.currentPage,last_page:this.lastPage,from:1,to:this.perPage}}}),created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.fetchData(),t.fetchRoles()]);case 2:t.debouncedSearch=Gs()((function(){t.currentPage=1,t.fetchData()}),500);case 3:case"end":return e.stop()}}),e)})))()},methods:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("user",["fetchUsers"])),Object(Vn["b"])("role",["fetchRoles"])),{},{dataManager:function(t){t.length>0&&(this.sortField=t[0].sortField,this.sortDirection=t[0].direction,this.fetchData())},getUserRoleCaption:function(t){return la[t]||""},onChangePage:function(t){this.currentPage=t,this.fetchData()},onPerPageChange:function(t){this.perPage!==t&&(this.perPage=t,this.currentPage=1,this.fetchData())},fetchData:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(De["a"])(Object(De["a"])({page:t.currentPage,size:t.perPage},t.sortField&&{sort:"".concat(t.sortField,",").concat(t.sortDirection)}),t.search&&{likename:t.search}),e.next=3,t.fetchUsers(n);case 3:t.total=t.usersCount,t.usersData={data:t.users};case 5:case"end":return e.stop()}}),e)})))()}})},uh=lh,dh=n("a8b5");n("9ee4");function ph(t){this["$style"]=dh["default"].locals||dh["default"]}var fh=Object(M["a"])(uh,ih,ch,!1,ph,null,null),mh=fh.exports,hh=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("page-wrapper",{scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[n("breadcrumbs")]},proxy:!0},{key:"title",fn:function(){return[t._v(" Заведение нового пользователя ")]},proxy:!0},{key:"default",fn:function(){return[n("div",{class:t.$style.form},[t.committedSearch?n("create-user-form",{attrs:{user:t.user,"user-role":t.userRole,"user-login":t.userLogin,"read-only":t.readOnly,"error-message":t.errorMessage,"is-valid-login":t.isValidUserLogin},on:{reset:t.reset,setUserRole:t.setUserRole,addUser:t.addUser,connectTo:t.connectTo,connectTt:t.connectTt}}):n("search-user",{attrs:{"is-valid-login":t.isValidUserLogin,"error-message":t.errorMessage},on:{onNewUserClick:t.onNewUserClick,setUserData:t.setUserData,setErrorMessage:t.setErrorMessage},model:{value:t.userLogin,callback:function(e){t.userLogin=e},expression:"userLogin"}})],1)]},proxy:!0}])})],1)},vh=[],gh="".concat(sa,"/users"),bh="".concat(sa,"/kkos"),_h="".concat(sa,"/tos"),kh="".concat(sa,"/tts"),yh=function(t){return t.map((function(t){var e=function(e){return t[e]?" ".concat(t[e]):""},n=t.lastname,r=t.firstname,a=t.middlename;return t.fio="".concat(n||""," ").concat(r," ").concat(a||"").trim(),t.contacts="<div>".concat(e("email"),"</div><div>").concat(e("phone"),"</div>"),t}))},wh=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,o,s,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.page,r=e.size,a=e.roles,o=e.likename,s=e.users,i=e.sort,t.next=3,Co({url:"".concat(gh),method:"GET",params:Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({page:n,size:r},a?{roles:a}:{}),o?{likename:o}:{}),s?{users:s}:{}),i?{sort:i}:{})});case 3:return c=t.sent,l=c.data,l.users=yh(l.users),t.abrupt("return",l);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Oh=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:"".concat(gh,"/").concat(e),method:"GET"});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ch=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:gh,method:"POST",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),xh=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:gh,method:"PUT",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Sh=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({method:"GET",url:"".concat(gh,"/find"),params:{login:e}});case 2:if(n=t.sent,r=n.data,0!==r.length){t.next=6;break}throw new Error("Такого пользователя в базе нет или вы опечатались");case 6:return t.abrupt("return",r[0]);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ph=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({method:"POST",url:"".concat(gh,"/sync")});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),jh=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.kkoId,r=e.role,t.next=3,Co({method:"GET",url:"".concat(bh,"/").concat(n,"/agents/").concat(r)});case 3:return a=t.sent,o=a.data,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Eh=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.kkoId,a=e.role,t.next=3,Co({method:"PUT",url:"".concat(bh,"/").concat(r,"/agents/").concat(a),data:n});case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Rh=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.orgId,r=e.role,t.next=3,Co({method:"GET",url:"".concat(_h,"/").concat(n,"/agents/").concat(r)});case 3:return a=t.sent,o=a.data,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$h=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.orgId,a=e.role,t.next=3,Co({method:"PUT",url:"".concat(_h,"/").concat(r,"/agents/").concat(a),data:n});case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Th=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.shopId,r=e.role,t.next=3,Co({method:"GET",url:"".concat(kh,"/").concat(n,"/agents/").concat(r)});case 3:return a=t.sent,o=a.data,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ah=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.shopId,a=e.role,t.next=3,Co({method:"PUT",url:"".concat(kh,"/").concat(r,"/agents/").concat(a),data:n});case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Ih={fetchUsers:wh,fetchUserById:Oh,addUser:Ch,updateUser:xh,findUserInKeycloak:Sh,syncUsers:Ph,fetchUsersInKko:jh,updateUsersInKko:Eh,fetchUsersInTo:Rh,updateUsersInTo:$h,fetchUsersInTt:Th,updateUsersInTt:Ah},Dh=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("form-item",{attrs:{"inline-view":"",error:t.errorMessage},scopedSlots:t._u([{key:"label",fn:function(){return[n("div",{class:t.$style.text},[t._v(" Поиск по логину или e-mail ")])]},proxy:!0}])},[n("form-input-new",{attrs:{value:t.value,size:"md",placeholder:"если пользователь есть в системе",type:"search",error:!!t.errorMessage},on:{input:function(e){return t.$emit("input",e)},clear:t.setErrorMessage}})],1),n("div",{class:t.$style["buttons-panel"]},[n("crm-button",{on:{click:t.searchUser}},[t._v(" Найти пользователя ")]),t.errorMessage&&t.isValidLogin?n("crm-button",{attrs:{design:"text"},on:{click:t.onNewUserClick}},[t._v(" Создать нового пользователя ")]):t._e()],1)],1)},zh=[],Nh={name:"SearchUser",components:{FormItem:it,FormInputNew:At,CrmButton:ie},props:{value:{type:String,default:""},errorMessage:{type:String,default:""},isValidLogin:Boolean},computed:Object(De["a"])({},Object(Vn["e"])("user",["users","usersCount"])),methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("user",["fetchUsers"])),{},{searchUser:function(){var t=this;Ih.findUserInKeycloak(this.value).then((function(e){var n=e.id;t.fetchUsers({page:1,size:t.usersCount}).then((function(){t.users.find((function(t){return t.id===n}))?t.$router.push({name:"user",params:{id:n}}):t.setUserData(e)})).catch((function(e){t.setErrorMessage(e.message)}))})).catch((function(e){t.setErrorMessage(e.message)}))},setUserData:function(t){this.$emit("setUserData",t)},setErrorMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$emit("setErrorMessage",t)},onNewUserClick:function(){this.setErrorMessage(),this.$emit("onNewUserClick")}})},Mh=Nh,Lh=n("c903");function Bh(t){this["$style"]=Lh["default"].locals||Lh["default"]}var Fh=Object(M["a"])(Mh,Dh,zh,!1,Bh,null,null),qh=Fh.exports,Uh=function(){var t=this,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{class:e.$style.root},[e.showField.loginSiebel?r("div",{class:e.$style["form-container"]},[r("form-item",{attrs:{label:"Логин Siebel","inline-view":""}},[r("form-input-new",{attrs:{size:"md",placeholder:"W1234N1234","read-only":""},model:{value:e.userLogin,callback:function(t){e.userLogin=t},expression:"userLogin"}})],1),r("update-button",{class:e.$style.controls,attrs:{variant:"secondary",icon:"cross","icon-height":"16","icon-width":"16"},on:{click:function(t){return e.$emit("reset")}}},[e._v(" это не тот сотрудник ")])],1):e._e(),e.showField.loginLotus?r("div",{class:e.$style["form-container"]},[r("form-item",{attrs:{label:"Логин Lotus","inline-view":""}},[r("form-input-new",{attrs:{size:"md",placeholder:"W1234N1234","read-only":""},model:{value:e.userLogin,callback:function(t){e.userLogin=t},expression:"userLogin"}})],1),r("update-button",{class:e.$style.controls,attrs:{variant:"secondary",icon:"cross","icon-height":"16","icon-width":"16"},on:{click:function(t){return e.$emit("reset")}}},[e._v(" это не тот сотрудник ")])],1):e._e(),r("div",{class:[e.$style["form-container"],{"crm-mb-16":!e.isValidLogin}]},[r("form-item",{attrs:{label:e.currentField.label,"inline-view":""}},[r("form-input-new",{attrs:{size:"md",placeholder:e.currentField.placeholder,"read-only":e.currentField.readOnly},model:{value:e.currentField.model,callback:function(t){e.$set(e.currentField,"model",t)},expression:"currentField.model"}})],1),e.isValidLogin?r("update-button",{class:e.$style.controls,attrs:{variant:"secondary",icon:"cross","icon-height":"16","icon-width":"16"},on:{click:function(t){return e.$emit("reset")}}},[e._v(" отредактировать email ")]):e._e()],1),r("form-item",{attrs:{label:"Роль пользователя","inline-view":""}},[r("crm-select",{attrs:{value:e.userRole,options:e.availableRoles,placeholder:"Выберите из списка",label:"description","model-field":"role",filterable:""},on:{select:function(t){return e.$emit("setUserRole",t)}}})],1),e.isValidLogin?r("form-item",{attrs:{label:"ФИО сотрудника","inline-view":""}},[r("form-input-new",{attrs:{size:"md",placeholder:"Иванов Иван Иванович","read-only":e.checkReadOnly(e.user.fio)},model:{value:e.user.fio,callback:function(t){e.$set(e.user,"fio",t)},expression:"user.fio"}})],1):e._e(),e.showField.birthDate?r("form-item",{attrs:{label:"Дата рождения","inline-view":""}},[r("datepicker",{staticStyle:{width:"153px"},attrs:{size:"md",placeholder:"10.10.1993"},model:{value:e.user.birthdate,callback:function(t){e.$set(e.user,"birthdate",t)},expression:"user.birthdate"}})],1):e._e(),e.isValidLogin?e._e():r("form-item",{attrs:{label:"E-mail","inline-view":""}},[r("form-input-new",{attrs:{size:"md",placeholder:"surnamename@otpbank.ru"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),r("form-item",{attrs:{label:"Телефон","inline-view":""}},[r("form-input-new",{attrs:{size:"md",placeholder:"+7 (987) 654 32 10"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),e.showField.kko?r("form-item",{attrs:{label:"Прикрепление ККО","inline-view":""}},[r("multiselect",{attrs:{options:e.kkos,placeholder:"Выберите из списка","model-field":"id",label:"name",filterable:""},model:{value:e.user.kkos,callback:function(t){e.$set(e.user,"kkos",t)},expression:"user.kkos"}})],1):e._e(),e.showField.to?r("form-item",{attrs:{"inline-view":"",label:e.user.to.length?"Прикреплено ТО":""}},[e.user.to.length?r("div",{class:e.$style["data-wrapper"]},[r("div",{class:e.$style["data-count"]},[e._v(" "+e._s(e.user.to.length)+" ")]),r("update-button",{attrs:{variant:"secondary",icon:"pencil","icon-height":"16","icon-width":"16"},on:{click:function(t){e.modalName="user-add-to"}}},[e._v(" Изменить ")])],1):r("div",{class:e.$style["button-panel"]},[r("crm-button",{attrs:{design:"outline"},on:{click:function(t){e.modalName="user-add-to"}}},[e._v(" Прикрепить ТО ")])],1)]):e._e(),e.showField.tt?r("form-item",{attrs:{"inline-view":"",label:e.user.tt.length?"Прикреплено ТТ":""}},[e.user.tt.length?r("div",{class:e.$style["data-wrapper"]},[r("div",{class:e.$style["data-count"]},[e._v(" "+e._s(e.user.tt.length)+" ")]),r("update-button",{attrs:{variant:"secondary",icon:"pencil","icon-height":"16","icon-width":"16"},on:{click:function(t){e.modalName="user-add-tt"}}},[e._v(" Изменить ")])],1):r("div",{class:e.$style["button-panel"]},[r("crm-button",{attrs:{design:"outline"},on:{click:function(t){e.modalName="user-add-tt"}}},[e._v(" Прикрепить ТТ ")])],1)]):e._e(),e.showButtonsPanel?r("div",{class:[e.$style["buttons-panel"],e.$style["inline-flex"]]},[r("crm-button",{attrs:{design:"outline"},on:{click:function(t){return e.$emit("reset")}}},[e._v(" Сбросить ")]),r("crm-button",{on:{click:function(t){return e.$emit("addUser")}}},[e._v(" Создать ")])],1):e._e(),e.errorMessage?r("div",{class:[e.$style.error,e.$style["inline-flex"]]},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e(),r(e.modalName,{tag:"component",attrs:{"checked-organizations":e.user.to,"checked-shops":e.user.tt},on:{close:function(t){e.modalName=null},onSaveTt:function(e){return t.$emit("connectTt",e)},onSaveTo:function(e){return t.$emit("connectTo",e)}}})],1)},Gh=[],Vh=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],class:[t.$style.root,t.classes],on:{click:t.open}},[n("div",{class:t.$style.controls},[t.isSelectedValueVisible?n("div",{class:t.$style.selected},[t._v(" "+t._s(t.selectedValues)+" ")]):t._e(),t.selectedData.length?n("counter",{class:t.$style.counter,attrs:{amount:t.selectedData.length},on:{unSelectAll:t.unSelectAll}}):t._e()],1),n("form-input-new",{ref:"input",attrs:{size:t.size,placeholder:t.computedPlaceholder,"for-multiselect":"","read-only":!t.filterable,"has-value":!t.isValueEmpty,"dark-placeholder":t.darkPlaceholder},on:{focus:function(e){t.focused=!0},blur:function(e){t.focused=!1}},scopedSlots:t._u([{key:"suffix",fn:function(){return[n("chevron",{class:t.$style.icon})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t.show?n("div",{class:t.$style.options},[t.filteredOptions.length>1?n("div",{class:t.$style.option},[n("checkbox",{attrs:{size:"sm",icon:"minus",title:"Выбрать все",checked:t.isAllSelected},on:{change:function(e){return t.selectAll(e)}}})],1):t._e(),t._l(t.filteredOptions,(function(e,r){return n("div",{key:r,class:t.$style.option},[n("checkbox",{attrs:{size:"sm",icon:"iconCheckSmall",title:e[t.label],checked:e.checked},on:{change:function(n){return t.select(e,n)}}})],1)}))],2):t._e()],1)},Hh=[],Wh=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.$style.root,on:{click:function(e){return e.stopPropagation(),t.$emit("unSelectAll")}}},[r("div",{class:t.$style.amount},[t._v(" "+t._s(t.amount)+" ")]),r("img",{class:t.$style.close,attrs:{alt:"counter-close",src:n("d1af"),width:"12",height:"12"}})])},Kh=[],Yh={name:"Counter",props:{amount:{type:Number,default:0}}},Zh=Yh,Qh=n("ab33");function Jh(t){this["$style"]=Qh["default"].locals||Qh["default"]}var Xh=Object(M["a"])(Zh,Wh,Kh,!1,Jh,null,null),tv=Xh.exports,ev={name:"OtpMultiselect",components:{Chevron:ya,FormInputNew:At,Checkbox:qi,Counter:tv},model:{prop:"value",event:"select"},props:{value:{type:Array,required:!0},options:{type:Array,required:!0},error:Boolean,size:{type:String,default:"md",validator:function(t){return["sm","md","lg"].includes(t)}},placeholder:{type:String,default:""},label:{type:[String,Number],default:"name"},modelField:{type:[String,Number],default:"name"},filterable:Boolean,darkPlaceholder:Boolean},data:function(){return{show:!1,focused:!1,search:"",selectedData:[],isAllSelected:!1}},computed:{isValueEmpty:function(){return!this.value.length},selectedValues:function(){var t=this;return this.matchedValue.map((function(e){return e[t.label]})).join(", ")},classes:function(){var t;return t={},Object(vt["a"])(t,this.$style.opened,this.show),Object(vt["a"])(t,this.$style["size-".concat(this.size)],this.size),Object(vt["a"])(t,this.$style.focused,this.focused),t},matchedValue:function(){return this.filteredOptions.filter((function(t){return t.checked}))},filteredOptions:function(){var t=this,e=this.options.map((function(e){return e.checked=t.value.includes(e[t.modelField]),e}));return this.search&&this.show?Ha({options:e,field:this.label,search:this.search}):e},computedPlaceholder:function(){return this.isValueEmpty?this.placeholder:""},isSelectedValueVisible:function(){return!this.isValueEmpty&&!this.search||!this.show&&this.search}},created:function(){this.selectedData=this.value},methods:{select:function(t,e){t.checked=e,e||(this.isAllSelected=!1),this.updateValue(t)},selectAll:function(t){var e=this;this.isAllSelected=t,this.selectedData=t?this.options.map((function(t){return t[e.modelField]})):[],this.$emit("select",this.selectedData)},unSelectAll:function(){this.isAllSelected=!1,this.$emit("select",this.selectedData=[])},open:function(){this.show=!0},close:function(){this.show=!1},updateValue:function(t){var e=this;t.checked?this.selectedData.push(t[this.modelField]):this.selectedData=this.selectedData.filter((function(n){return n!==t[e.modelField]})),this.$emit("select",this.selectedData)}}},nv=ev,rv=n("a60e");function av(t){this["$style"]=rv["default"].locals||rv["default"]}var ov=Object(M["a"])(nv,Vh,Hh,!1,av,null,null),sv=ov.exports,iv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("side-page",{class:t.$style.root,attrs:{size:"xl"},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Прикрепление / открепление ТО ")]},proxy:!0},{key:"default",fn:function(){return[n("page-wrapper",{class:t.$style["users-wrapper"],attrs:{"without-header":""},scopedSlots:t._u([{key:"filters",fn:function(){return[n("div",{class:t.$style.filters},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск по коду, названию или адресу"},on:{input:t.debouncedSearch},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("div",{class:t.$style["filter-wrap"]},[n("crm-filter",{attrs:{value:t.filterKkoId,"model-field":"id",options:t.kkos,placeholder:"ККО",size:"sm"},on:{select:t.onSelectKko}})],1),n("div",{class:t.$style["filter-wrap"]},[n("commercial-net-suggestions",{attrs:{size:"sm"},on:{input:t.onFilterCommercialNetNameChange,select:t.onFilterCommercialNetNameSelect},model:{value:t.filterCommercialNetName,callback:function(e){t.filterCommercialNetName=e},expression:"filterCommercialNetName"}})],1)],1)]},proxy:!0},{key:"default",fn:function(){return[t.isLoading?n("spinner",{attrs:{size:"md"}}):n("vuetable",{attrs:{"api-mode":!1,fields:t.headers,data:t.orgData,css:{tableClass:"credit-product-add-to-table"},"no-data-template":"Нет данных","data-manager":t.dataManager,"sort-order":t.defaultSort},scopedSlots:t._u([{key:"name",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"crm-link-black",on:{click:function(e){return t.selectOrganization(r)}}},[t._v(" "+t._s(r.name)+" ")])]}},{key:"mark",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"text-align-right"},[n("otp-switcher",{attrs:{checked:!!t.checkedLocalOrganizations[r.id]},on:{change:function(e){return t.toggleOrganization(r,e)}}})],1)]}}])}),t.total?n("pagination",{attrs:{"per-page":t.perPage,total:t.total,"current-page":t.currentPage,"pagination-data":t.paginationData},on:{onChangePage:t.onChangePage,onPerPageChange:t.onPerPageChange}}):t._e(),t.selectedOrganization?n("organization-details",{attrs:{organization:t.selectedOrganization},on:{close:function(e){t.selectedOrganization=null}}}):t._e()]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{on:{click:t.saveAndClose}},[t._v(" Сохранить ")])]},proxy:!0},{key:"cancel-button",fn:function(){return[n("div",{on:{click:t.close}},[t._v(" Закрыть ")])]},proxy:!0}])})},cv=[],lv=[{name:"name",title:"Наименование ТО",sortField:"name"},{name:"code",title:"Код ТО"},{name:"regCenter",title:"РЦ",sortField:"regCenter"},{name:"kko",title:"ККО",sortField:"kko"},{name:"commercialNet",title:"Торговая сеть",sortField:"commercialNet"},{name:"curatorFio",title:"Куратор",sortField:"curatorFio"},{name:"mark",title:"вкл/выкл"}],uv={name:"UserAddTo",components:{FormInputNew:At,OtpSwitcher:lp,Spinner:Xn,PageWrapper:ir,Vuetable:Vu.a,OrganizationDetails:Rf,SidePage:Ho,CrmFilter:ts,Pagination:Ps,CommercialNetSuggestions:No,CrmButton:ie},props:{checkedOrganizations:{type:Array,default:function(){return[]}}},data:function(){return{search:"",isLoading:!1,selectedOrganization:null,filterCommercialNetName:"",filterKkoId:"",sortField:"",sortDirection:"",kkos:[],currentPage:1,perPage:10,total:0,orgData:{},checkedLocalOrganizations:{},debouncedSearch:function(){},defaultSort:[{direction:"asc",field:"name",sortField:"name"}],headers:lv}},computed:{lastPage:function(){return Math.ceil(this.totalItems/this.perPage)},paginationData:function(){return{data:this.orgData,total:this.totalItems,per_page:this.perPage,current_page:this.currentPage,last_page:this.lastPage,from:1,to:this.perPage}}},created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.getKkos();case 3:return t.kkos=e.sent,e.next=6,t.fetchData();case 6:t.getCorrectCheckedOrganizationsData(),t.debouncedSearch=Gs()((function(){t.currentPage=1,t.fetchData()}),500);case 8:case"end":return e.stop()}}),e)})))()},methods:{fetchData:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({page:t.currentPage,size:t.perPage},t.sortField&&{sort:"".concat(t.sortField,",").concat(t.sortDirection)}),t.search&&{likename:t.search}),t.filterCommercialNetName&&{commercialnet:t.filterCommercialNetName}),t.filterKkoId&&{kko:t.filterKkoId}),e.next=3,qs.fetchOrganizations(!1,n);case 3:r=e.sent,a=r.organizations.filter((function(t){return"on"===t.status})),t.total=r.totalItems,t.orgData={data:a},t.isLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},dataManager:function(t){t.length>0&&(this.sortField=t[0].sortField,this.sortDirection=t[0].direction,this.fetchData())},getKkos:function(){var t=arguments;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:null,e.abrupt("return",Ao.fetchKkos(n));case 2:case"end":return e.stop()}}),e)})))()},getCorrectCheckedOrganizationsData:function(){this.checkedLocalOrganizations=this.checkedOrganizations.reduce((function(t,e){return t[e]=!0,t}),{})},onSelectKko:function(t){this.filterKkoId=t,this.fetchData()},onChangePage:function(t){this.currentPage=t,this.fetchData()},onPerPageChange:function(t){this.perPage!==t&&(this.perPage=t,this.currentPage=1,this.fetchData())},onFilterCommercialNetNameSelect:function(){this.fetchData()},onFilterCommercialNetNameChange:function(t){t||this.fetchData()},toggleOrganization:function(t,e){var n=t.id;this.checkedLocalOrganizations=Object(De["a"])(Object(De["a"])({},this.checkedLocalOrganizations),Object(vt["a"])({},n,e)),this.checkedLocalOrganizations[n]||delete this.checkedLocalOrganizations[n]},selectOrganization:function(t){this.selectedOrganization=t},saveAndClose:function(){var t=Object.keys(this.checkedLocalOrganizations);this.$emit("onSaveTo",t),this.close()},close:function(){this.$emit("close")}}},dv=uv,pv=n("8910");function fv(t){this["$style"]=pv["default"].locals||pv["default"]}var mv=Object(M["a"])(dv,iv,cv,!1,fv,null,null),hv=mv.exports,vv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("side-page",{class:t.$style.root,attrs:{size:"xl"},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Прикрепление / открепление ТТ ")]},proxy:!0},{key:"default",fn:function(){return[n("page-wrapper",{class:t.$style["users-wrapper"],attrs:{"without-header":"","is-loading":t.isLoading},scopedSlots:t._u([{key:"filters",fn:function(){return[n("div",{class:t.$style.filters},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск по коду, названию или адресу"},on:{input:t.debouncedSearch},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("div",{class:t.$style["filter-wrap"]},[n("crm-filter",{attrs:{value:t.filterKkoId,"model-field":"id",options:t.kkos,placeholder:"ККО",size:"sm"},on:{select:t.onSelectKko}})],1),n("div",{class:t.$style["filter-wrap"]},[n("commercial-net-suggestions",{attrs:{size:"sm"},on:{input:t.onFilterCommercialNetNameChange,select:t.onFilterCommercialNetNameSelect},model:{value:t.filterCommercialNetName,callback:function(e){t.filterCommercialNetName=e},expression:"filterCommercialNetName"}})],1)],1)]},proxy:!0},{key:"default",fn:function(){return[t.isLoading?n("spinner",{attrs:{size:"md"}}):n("vuetable",{attrs:{"api-mode":!1,fields:t.headers,data:t.shopsData,css:{tableClass:"credit-product-add-to-table"},"no-data-template":"Нет данных","data-manager":t.dataManager,"sort-order":t.defaultSort},scopedSlots:t._u([{key:"mark",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"text-align-right"},[n("otp-switcher",{attrs:{checked:!!t.checkedLocalShops[r.id]},on:{change:function(e){return t.toggleShops(r,e)}}})],1)]}}])}),t.total?n("pagination",{attrs:{"per-page":t.perPage,total:t.total,"current-page":t.currentPage,"pagination-data":t.paginationData},on:{onChangePage:t.onChangePage,onPerPageChange:t.onPerPageChange}}):t._e()]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{on:{click:t.saveAndClose}},[t._v(" Сохранить ")])]},proxy:!0},{key:"cancel-button",fn:function(){return[n("div",{on:{click:t.close}},[t._v(" Закрыть ")])]},proxy:!0}])})},gv=[],bv="".concat(sa,"/tts"),_v=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:bv,method:"GET",params:e});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),kv=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:"".concat(bv,"/").concat(e),method:"GET"});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),yv=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:bv,method:"POST",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),wv=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:bv,method:"PUT",data:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ov={fetchShops:_v,fetchShopById:kv,addShop:yv,updateShop:wv},Cv=[{name:"code",title:"Код ТТ",sortField:"code"},{name:"name",title:"Наименование ТТ",sortField:"name",width:"344px"},{name:"kko",title:"ККО",sortField:"kko"},{name:"orgName",title:"Наименование ТО",sortField:"orgName"},{name:"commercialNet",title:"Торговая сеть",sortField:"commercialNet"},{name:"mark",title:"вкл/выкл",width:"82px"}],xv={name:"UserAddTt",components:{FormInputNew:At,OtpSwitcher:lp,Spinner:Xn,PageWrapper:ir,Vuetable:Vu.a,SidePage:Ho,CrmFilter:ts,Pagination:Ps,CommercialNetSuggestions:No,CrmButton:ie},props:{checkedShops:{type:Array,default:function(){return[]}}},data:function(){return{search:"",isLoading:!1,filterCommercialNetName:"",filterKkoId:"",sortField:"",sortDirection:"",kkos:[],currentPage:1,perPage:10,total:0,shopsData:{},checkedLocalShops:{},debouncedSearch:function(){},defaultSort:[{direction:"asc",field:"code",sortField:"code"}],headers:Cv}},computed:{lastPage:function(){return Math.ceil(this.totalItems/this.perPage)},paginationData:function(){return{data:this.shopsData,total:this.totalItems,per_page:this.perPage,current_page:this.currentPage,last_page:this.lastPage,from:1,to:this.perPage}}},created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.getKkos();case 3:return t.kkos=e.sent,e.next=6,t.fetchData();case 6:t.getCorrectCheckedShopsData(),t.debouncedSearch=Gs()((function(){t.currentPage=1,t.fetchData()}),500);case 8:case"end":return e.stop()}}),e)})))()},methods:{fetchData:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({page:t.currentPage,size:t.perPage},t.sortField&&{sort:"".concat(t.sortField,",").concat(t.sortDirection)}),t.search&&{likename:t.search}),t.filterCommercialNetName&&{commercialnet:t.filterCommercialNetName}),t.filterKkoId&&{kko:t.filterKkoId}),e.next=3,Ov.fetchShops(n);case 3:r=e.sent,t.total=r.totalItems,t.shopsData={data:r.shops},t.isLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},dataManager:function(t){t.length>0&&(this.sortField=t[0].sortField,this.sortDirection=t[0].direction,this.fetchData())},getKkos:function(){var t=arguments;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:null,e.abrupt("return",Ao.fetchKkos(n));case 2:case"end":return e.stop()}}),e)})))()},getCorrectCheckedShopsData:function(){this.checkedLocalShops=this.checkedShops.reduce((function(t,e){return t[e]=!0,t}),{})},onSelectKko:function(t){this.filterKkoId=t,this.fetchData()},onChangePage:function(t){this.currentPage=t,this.fetchData()},onPerPageChange:function(t){this.perPage!==t&&(this.perPage=t,this.currentPage=1,this.fetchData())},onFilterCommercialNetNameSelect:function(){this.fetchData()},onFilterCommercialNetNameChange:function(t){t||this.fetchData()},toggleShops:function(t,e){var n=t.id;this.checkedLocalShops=Object(De["a"])(Object(De["a"])({},this.checkedLocalShops),Object(vt["a"])({},n,e)),this.checkedLocalShops[n]||delete this.checkedLocalShops[n]},saveAndClose:function(){var t=Object.keys(this.checkedLocalShops);this.$emit("onSaveTt",t),this.close()},close:function(){this.$emit("close")}}},Sv=xv,Pv=n("9dcd");function jv(t){this["$style"]=Pv["default"].locals||Pv["default"]}var Ev=Object(M["a"])(Sv,vv,gv,!1,jv,null,null),Rv=Ev.exports,$v={name:"CreateUserForm",components:{FormItem:it,FormInputNew:At,UpdateButton:ra,Multiselect:sv,CrmSelect:Ja,CrmButton:ie,Datepicker:Nl,UserAddTo:hv,UserAddTt:Rv},props:{userRole:{type:String,default:""},user:{type:Object,required:!0},userLogin:{type:String,default:""},errorMessage:{type:String,default:""},isValidLogin:Boolean,readOnly:Boolean},data:function(){return{modalName:null}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("role",["roles"])),Object(Vn["e"])("user",["users","usersCount"])),Object(Vn["e"])("reference",["kkos"])),{},{showField:function(){var t=this.rolesList,e=this.userRole,n=function(t){return t.includes(e)};return{kko:n([t.CURATOR_SHOP,t.AGENT_BANK]),to:n([t.AGENT_TO,t.ADMIN_TO,t.AGENT_TO_LIMITED]),tt:n([t.AGENT_SHOP,t.AGENT_SHOP_LIMITED]),loginLotus:n([t.REGISTRAR,t.CURATOR_SHOP,t.CURATOR_NET]),loginSiebel:n([t.AGENT_BANK,t.CALL_CENTER,t.AGENT_TO]),birthDate:n([t.ADMIN_TO,t.AGENT_TO_LIMITED,t.AGENT_SHOP_LIMITED])}},showButtonsPanel:function(){var t=this.showField,e=this.user;return!(t.kko&&!e.kkos.length||t.to&&!e.to.length||t.tt&&!e.tt.length)},availableRoles:function(){var t=this.rolesList,e=[t.ADMIN_TO,t.AGENT_TO_LIMITED];return this.isValidLogin?this.roles.filter((function(t){return e.includes(t.role)})):this.roles.filter((function(t){return!e.includes(t.role)}))},currentField:function(){var t=this.isValidLogin;return{label:t?"E-mail":"ФИО сотрудника",model:t?this.user.email:this.user.fio,placeholder:t?"surnamename@otpbank.ru":"Иванов Иван Иванович",readOnly:t||this.checkReadOnly(this.user.fio)}},rolesList:function(){return this.roles.reduce((function(t,e){return t[e.role]=e.role,t}),{})}}),created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.fetchRoles(),t.fetchKkos()]);case 2:case"end":return e.stop()}}),e)})))()},methods:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("role",["fetchRoles"])),Object(Vn["b"])("reference",["fetchKkos"])),{},{checkReadOnly:function(t){return!(!this.readOnly||!t)}})},Tv=$v,Av=n("0459");function Iv(t){this["$style"]=Av["default"].locals||Av["default"]}var Dv=Object(M["a"])(Tv,Uh,Gh,!1,Iv,null,null),zv=Dv.exports,Nv=function(){return{fio:null,login:null,birthdate:null,email:null,phone:null,roles:[],kkos:[],to:[],tt:[],uuid:null,id:null}},Mv={name:"AddUser",components:{CreateUserForm:zv,SearchUser:qh,PageWrapper:ir,Breadcrumbs:vi},data:function(){return{userRole:"",userLogin:"",user:Nv(),connectedUsers:{},committedSearch:!1,readOnly:!1,errorMessage:""}},computed:{isValidUserLogin:function(){var t=/\S+@\S+\.\S+/;return t.test(this.userLogin)},correctRoleStr:function(){var t=/_/gi;return this.userRole.toLowerCase().replace(t,"-")}},watch:{userLogin:function(){this.errorMessage&&this.setErrorMessage()},userRole:function(){var t=this.user;t.kkos=[],t.to=[],t.tt=[]}},methods:{setUserData:function(t){var e=t.lastname,n=t.firstname,r=t.middlename,a=t.birthdate,o=t.email,s=t.phone;this.user=Object(De["a"])(Object(De["a"])({},t),{},{fio:Ba({lastname:e,firstname:n,middlename:r}),birthdate:a||Nv().birthdate,email:o||Nv().email,phone:s||Nv().phone,kkos:Nv().kkos,to:Nv().to,tt:Nv().tt}),this.committedSearch=!0,this.userRole=la[t.roles[0]],this.readOnly=!0},setUserRole:function(t){this.userRole=t,this.user.roles=[t]},addUser:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ih.addUser(Object(De["a"])(Object(De["a"])(Object(De["a"])({},Fa(t.user.fio)),t.user),{},{login:t.user.login||t.userLogin}));case 3:if(!t.connectedUsers){e.next=6;break}return e.next=6,t.fetchAndUpdateConnectedUsers();case 6:t.reset(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.setErrorMessage(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},reset:function(){this.user=Nv(),this.committedSearch=!1,this.userLogin="",this.userRole="",this.errorMessage="",this.connectedUsers={}},onNewUserClick:function(){this.isValidUserLogin?this.user.email=this.userLogin:this.userLogin="",this.committedSearch=!0},setErrorMessage:function(t){this.errorMessage=t},connectTo:function(t){this.user.to=t},connectTt:function(t){this.user.tt=t},fetchUsersInKko:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.kkoId,a=t.role,n.prev=1,n.next=4,Ih.fetchUsersInKko({kkoId:r,role:a});case 4:o=n.sent,Object.assign(e.connectedUsers,Object(vt["a"])({},r,o)),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},updateUsersInKko:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.kkoId,a=t.role,n.prev=1,o=e.connectedUsers[r],s={login:e.userLogin||e.user.login,userFio:e.user.fio},o.push(s),n.next=7,Ih.updateUsersInKko({kkoId:r,role:a},o);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},fetchUsersInTo:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.orgId,a=t.role,n.prev=1,n.next=4,Ih.fetchUsersInTo({orgId:r,role:a});case 4:o=n.sent,Object.assign(e.connectedUsers,Object(vt["a"])({},r,o)),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},updateUsersInTo:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.orgId,a=t.role,n.prev=1,o=e.connectedUsers[r],s={login:e.userLogin||e.user.login,userFio:e.user.fio},o.push(s),n.next=7,Ih.updateUsersInTo({orgId:r,role:a},o);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},fetchUsersInTt:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.shopId,a=t.role,n.prev=1,n.next=4,Ih.fetchUsersInTt({shopId:r,role:a});case 4:o=n.sent,Object.assign(e.connectedUsers,Object(vt["a"])({},r,o)),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},updateUsersInTt:function(t){var e=this;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.shopId,a=t.role,n.prev=1,o=e.connectedUsers[r],s={login:e.userLogin||e.user.login,userFio:e.user.fio},o.push(s),n.next=7,Ih.updateUsersInTt({shopId:r,role:a},o);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},fetchAndUpdateConnectedUsers:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.user,r=n.kkos,a=n.to,o=n.tt,s=t.correctRoleStr,!r.length){e.next=5;break}return e.next=5,Promise.all(r.map(function(){var e=Object(Gn["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchUsersInKko({kkoId:n,role:s});case 2:return e.next=4,t.updateUsersInKko({kkoId:n,role:s});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:if(!a.length){e.next=8;break}return e.next=8,Promise.all(a.map(function(){var e=Object(Gn["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchUsersInTo({orgId:n,role:s});case 2:return e.next=4,t.updateUsersInTo({orgId:n,role:s});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:if(!o.length){e.next=11;break}return e.next=11,Promise.all(o.map(function(){var e=Object(Gn["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchUsersInTt({shopId:n,role:s});case 2:return e.next=4,t.updateUsersInTt({shopId:n,role:s});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e)})))()}}},Lv=Mv,Bv=n("3ab4");function Fv(t){this["$style"]=Bv["default"].locals||Bv["default"]}var qv=Object(M["a"])(Lv,hh,vh,!1,Fv,null,null),Uv=qv.exports,Gv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-page"},[n("page-wrapper",{attrs:{"is-loading":t.isLoading},scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[n("breadcrumbs")]},proxy:!0},{key:"title",fn:function(){return[t._v(" "+t._s(t.userFio)+" ")]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{on:{click:t.editUserConnectedTT}},[t._v(" Прикрепить/ открепить ТТ ")])]},proxy:!0},{key:"tabs",fn:function(){return[n("tabs",{attrs:{tabs:t.currentTabsValue,"use-query":""},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}})]},proxy:!0},t.currentUser?{key:"default",fn:function(){return[n(t.currentTab,{tag:"component",attrs:{user:t.currentUser}})]},proxy:!0}:null],null,!0)})],1)},Vv=[],Hv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{class:t.$style.root},[t.user.roles.length?n("detail-item",{attrs:{title:"Должность"}},t._l(t.user.roles,(function(e,r){return n("div",{key:r},[t._v(" "+t._s(t.getUserRoleCaption(e))+" ")])})),0):t._e(),n("detail-item",{attrs:{title:"Логин Siebel"}},[n("copyable-element",{attrs:{content:t.user.login}},[t._v(" "+t._s(t.user.login)+" ")])],1),t.user.birthdate?n("detail-item",{attrs:{title:"Дата рождения"}},[t._v(" "+t._s(t.user.birthdate)+" ")]):t._e(),t.user.email?n("detail-item",{attrs:{title:"E-mail"}},[n("copyable-element",{attrs:{content:t.user.email}},[t._v(" "+t._s(t.user.email)+" ")])],1):t._e(),t.user.phone?n("detail-item",{attrs:{title:"Телефон"}},[n("copyable-element",{attrs:{content:t.user.phone}},[t._v(" "+t._s(t.user.phone)+" ")])],1):t._e(),t.connectedValue?n("detail-item",{attrs:{title:t.connectedItem[t.role].title}},[t._v(" "+t._s(t.connectedValue)+" ")]):t._e(),n("div",{class:t.$style["btn-container"]},[n("update-button",{attrs:{icon:"edit","icon-height":"16","icon-width":"16"},on:{click:function(e){t.showModal=!0}}},[t._v(" Редактировать параметры ")])],1)],1),t.showModal?n("edit-user",{attrs:{user:t.user},on:{close:function(e){t.showModal=!1}}}):t._e()],1)},Wv=[],Kv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"side-page"}},[n("side-page",{attrs:{size:"md","block-background":""},on:{close:t.onClose},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Редактирование параметров ")]},proxy:!0},{key:"default",fn:function(){return[n("detail-item",{attrs:{title:"Должность"}},t._l(t.user.roles,(function(e,r){return n("div",{key:r},[t._v(" "+t._s(t.getUserRoleCaption(e))+" ")])})),0),n("detail-item",{attrs:{title:"Логин Siebel"}},[t._v(" "+t._s(t.user.login)+" ")]),n("form-item",{attrs:{label:"ФИО сотрудника"}},[n("form-input-new",{attrs:{size:"md","read-only":""},model:{value:t.userFio,callback:function(e){t.userFio=e},expression:"userFio"}})],1),n("form-item",{attrs:{label:"Дата рождения"}},[n("datepicker",{staticStyle:{width:"172px"},model:{value:t.fields.birthdate,callback:function(e){t.$set(t.fields,"birthdate",e)},expression:"fields.birthdate"}})],1),n("form-item",{attrs:{label:"E-mail"}},[n("form-input-new",{attrs:{size:"md"},model:{value:t.fields.email,callback:function(e){t.$set(t.fields,"email",e)},expression:"fields.email"}})],1),n("form-item",{attrs:{label:"Телефон"}},[n("form-input-new",{attrs:{size:"md"},model:{value:t.fields.phone,callback:function(e){t.$set(t.fields,"phone",e)},expression:"fields.phone"}})],1),t.error?n("badge",{class:t.$style.error,attrs:{variant:"danger"}},[t._v(" "+t._s(t.error)+" ")]):t._e()]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",{attrs:{design:"outline"},on:{click:t.onReset}},[t._v(" Сбросить ")]),n("crm-button",{on:{click:t.onSave}},[t._v(" Cохранить ")])]},proxy:!0}])})],1)},Yv=[],Zv={birthdate:"",email:"",phone:""},Qv={name:"EditUser",components:{Badge:ve,FormItem:it,FormInputNew:At,CrmButton:ie,SidePage:Ho,DetailItem:ac,Datepicker:Nl},props:{user:{type:[Object,void 0],default:void 0}},data:function(){return{fields:Object(De["a"])({},Zv),error:null,isLoading:!1}},computed:Object(De["a"])({},Object(Vn["c"])("user",["userFio"])),mounted:function(){this.fields=Object(De["a"])({},this.user)},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("user",["updateUser"])),{},{getUserRoleCaption:function(t){return la[t]||""},onSave:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.error=null,t.isLoading=!0,n={firstname:t.user.firstname,middlename:t.user.middlename,lastname:t.user.lastname,email:t.fields.email,phone:t.fields.phone,birthdate:t.fields.birthdate,uuid:t.user.uuid?t.user.uuid:"555333d5-ccc3-fff1-aaaf-bbb8822aaa57",roles:t.user.roles,login:t.user.login},e.prev=3,n.id=t.user.id,e.next=7,t.updateUser(n);case 7:t.onClose(),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](3),a=null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.data,t.error=a||e.t0.message;case 14:t.isLoading=!1;case 15:case"end":return e.stop()}}),e,null,[[3,10]])})))()},onReset:function(){this.fields=Object(De["a"])({},this.user)},onClose:function(){this.$emit("close")}})},Jv=Qv,Xv=n("a927");function tg(t){this["$style"]=Xv["default"].locals||Xv["default"]}var eg=Object(M["a"])(Jv,Kv,Yv,!1,tg,null,null),ng=eg.exports,rg={name:"UserParams",components:{CopyableElement:Hc,UpdateButton:ra,EditUser:ng,DetailItem:ac},props:{user:{type:Object,required:!0}},data:function(){return{showModal:!1}},computed:{role:function(){return this.user.roles[0]},connectedItem:function(){var t,e=this.user;return t={},Object(vt["a"])(t,ca.AGENT_TO_LIMITED,{title:"Прикреплено ТО",value:null===e||void 0===e?void 0:e.organizationByAgentLimited.length}),Object(vt["a"])(t,ca.AGENT_TO,{title:"Прикреплено ТО",value:null===e||void 0===e?void 0:e.organizationByAgent.length}),Object(vt["a"])(t,ca.ADMIN_TO,{title:"Прикреплено ТО",value:null===e||void 0===e?void 0:e.organizationByAdmin.length}),Object(vt["a"])(t,ca.AGENT_SHOP,{title:"Прикреплено ТТ",value:null===e||void 0===e?void 0:e.shopByAgent.length}),Object(vt["a"])(t,ca.AGENT_SHOP_LIMITED,{title:"Прикреплено ТТ",value:null===e||void 0===e?void 0:e.shopByAgentLimited.length}),Object(vt["a"])(t,ca.AGENT_BANK,{title:"Прикреплено ТТ",value:null===e||void 0===e?void 0:e.kkoByAgent.length}),Object(vt["a"])(t,ca.CURATOR_SHOP,{title:"Прикреплено ТТ",value:null===e||void 0===e?void 0:e.shopByCurator.length}),t},connectedValue:function(){var t,e;return null===(t=this.connectedItem)||void 0===t||null===(e=t[this.role])||void 0===e?void 0:e.value}},methods:{getUserRoleCaption:function(t){return la[t]||""}}},ag=rg,og=n("cf1d");function sg(t){this["$style"]=og["default"].locals||og["default"]}var ig=Object(M["a"])(ag,Hv,Wv,!1,sg,null,null),cg=ig.exports,lg=[{title:"Параметры",value:"UserParams"}],ug={name:"User",components:{PageWrapper:ir,Tabs:ci,Breadcrumbs:vi,CrmButton:ie,UserParams:cg},data:function(){var t;return{currentTab:"UserParams",tabs:lg,isLoading:!1,currentTabsInfo:(t={},Object(vt["a"])(t,ca.AGENT_TO_LIMITED,{title:"Прикреплено ТО",value:"userAddTo"}),Object(vt["a"])(t,ca.AGENT_TO,{title:"Прикреплено ТО",value:"userAddTo"}),Object(vt["a"])(t,ca.ADMIN_TO,{title:"Прикреплено ТО",value:"userAddTo"}),Object(vt["a"])(t,ca.AGENT_SHOP,{title:"Прикреплено ТТ",value:"userAddTt"}),Object(vt["a"])(t,ca.AGENT_SHOP_LIMITED,{title:"Прикреплено ТТ",value:"userAddTt"}),Object(vt["a"])(t,ca.CURATOR_SHOP,{title:"Прикреплено ТТ",value:"userAddTt"}),t)}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("user",["currentUser"])),Object(Vn["c"])("user",["userFio"])),{},{role:function(){return this.currentUser.roles[0]},userId:function(){return+this.$route.params.id},currentTabsValue:function(){return this.currentTabsInfo[this.role]?[].concat(lg,[this.currentTabsInfo[this.role]]):lg}}),created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.fetchUserById(t.userId);case 3:t.isLoading=!1;case 4:case"end":return e.stop()}}),e)})))()},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("user",["fetchUserById"])),{},{editUserConnectedTT:function(){this.$router.push({name:"userConnectedTT",params:{id:this.userId}})}})},dg=ug,pg=Object(M["a"])(dg,Gv,Vv,!1,null,null,null),fg=pg.exports,mg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"requests-page"},[n("page-wrapper",{attrs:{"is-main":""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Заявки ")]},proxy:!0},{key:"tabs",fn:function(){return[n("tabs",{attrs:{tabs:t.tabs},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}})]},proxy:!0},{key:"default",fn:function(){return["offline-requests"===t.currentTab?n("offline-requests"):n("online-stores")]},proxy:!0}])})],1)},hg=[],vg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"offline-requests"},[t._v(" Таблица оффлайн заявок ")])},gg=[],bg={name:"OfflineRequests"},_g=bg,kg=Object(M["a"])(_g,vg,gg,!1,null,null,null),yg=kg.exports,wg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"online-stores"},[n("div",{staticClass:"online-stores__filters"},[n("form-input-new",{staticClass:"search-filter crm-mr-16",attrs:{type:"search",placeholder:"№ заказа / заявки или ФИО клиента"},on:{input:t.debouncedSearch},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("div",{staticClass:"online-stores__date-filters crm-mr-16"},[n("datepicker",{staticStyle:{width:"216px"},attrs:{editable:!1,range:"",placeholder:"25.01.2020 - 28.01.2020"},on:{input:t.setDateRange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),n("crm-filter",{staticClass:"filter crm-mr-16",attrs:{options:[],placeholder:"Все статусы"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}),n("crm-filter",{staticClass:"filter crm-mr-16",attrs:{options:[],placeholder:"Торговая сеть"},model:{value:t.commercialNetwork,callback:function(e){t.commercialNetwork=e},expression:"commercialNetwork"}}),n("crm-filter",{staticClass:"filter",attrs:{options:[],placeholder:"ТО"},model:{value:t.organization,callback:function(e){t.organization=e},expression:"organization"}})],1),n("div",[t.isLoading?n("spinner"):n("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,data:t.requestStatesData,fields:t.headers,"track-by":"uuid","no-data-template":"Нет данных","data-manager":t.dataManager,css:{tableBodyClass:"online-stores-table"}},scopedSlots:t._u([{key:"status",fn:function(e){var r=e.rowData;return[n("status-badge",{attrs:{status:r.status,description:r.statusDescription}}),n("div",{staticClass:"request-datetime"},[t._v(" "+t._s(r.modifyDate)+" ")])]}},{key:"optyId",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"crm-link-black",on:{click:function(e){return t.goToRequestPage(r)}}},[t._v(" "+t._s(r.optyId)+" ")])]}}])}),t.total?n("pagination",{attrs:{"per-page":t.perPage,total:t.total,"current-page":t.currentPage,"pagination-data":t.paginationData},on:{onChangePage:t.onChangePage,onPerPageChange:t.onPerPageChange}}):t._e()],1)])},Og=[],Cg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("badge",{class:t.$style.root,attrs:{variant:t.color}},[t._v(" "+t._s(t.description)+" ")])},xg=[],Sg={name:"StatusBadge",components:{Badge:ve},props:{status:{type:String,required:!0},description:{type:String,required:!0}},computed:{color:function(){return da[this.status]}}},Pg=Sg,jg=n("941f");function Eg(t){this["$style"]=jg["default"].locals||jg["default"]}var Rg=Object(M["a"])(Pg,Cg,xg,!1,Eg,null,null),$g=Rg.exports,Tg={name:"OnlineStores",components:{StatusBadge:$g,FormInputNew:At,Datepicker:Nl,CrmFilter:ts,Spinner:Xn,Vuetable:hs["a"],Pagination:Ps},data:function(){return{requestStatesData:{},search:"",dateRange:"",date:"",status:"",commercialNetwork:"",organization:"",sortField:"",sortDirection:"",headers:[{name:"status",title:"Статус",sortField:"status"},{name:"optyId",title:"№ заявки",sortField:"optyId"},{name:"commercialNetName",title:"Торговая сеть",sortField:"commercialNetName"},{name:"organizationName",title:"Наименование ТО",sortField:"organizationName"},{name:"shopName",title:"Наименование и адрес ТТ",sortField:"shopName"},{name:"clientFio",title:"ФИО клиента",sortField:"clientFio"},{name:"signMethod",title:"Подписание",sortField:"signMethod"}],statusesColor:da,statuses:ua,currentPage:1,perPage:10,total:0,debouncedSearch:function(){},isLoading:!1}},computed:Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("request",["requestStates","requestStatesCount"])),{},{lastPage:function(){return Math.ceil(this.total/this.perPage)},paginationData:function(){return{data:this.requestStatesData,total:this.total,per_page:this.perPage,current_page:this.currentPage,last_page:this.lastPage,from:1,to:this.perPage}}}),created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:t.debouncedSearch=Gs()((function(){t.currentPage=1,t.fetchData()}),500);case 3:case"end":return e.stop()}}),e)})))()},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("request",["fetchRequestStates"])),{},{dataManager:function(t){t.length>0&&(this.sortField=t[0].sortField,this.sortDirection=t[0].direction,this.fetchData())},setDateRange:function(){var t=Object(ja["a"])(this.dateRange,2),e=t[0],n=t[1];this.date=this.dateRange.includes(null)?"":"".concat(e,",").concat(n),this.fetchData()},goToRequestPage:function(t){var e=t.uuid,n=t.status,r={path:"/request/".concat(e)},a=[ua.AGREEMENT_CREATED_PAPERLESS,ua.AGREEMENT_CREATED_PAPERLESS_ES,ua.AGREEMENT_CREATED_PAPER_TECH,ua.AGREEMENT_SIGN_FAILED].includes(n);a&&(r.query={tab:"documents"}),this.$router.push(r)},onChangePage:function(t){this.currentPage=t,this.fetchData()},onPerPageChange:function(t){this.perPage!==t&&(this.perPage=t,this.currentPage=1,this.fetchData())},fetchData:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(De["a"])(Object(De["a"])({page:t.currentPage,size:t.perPage,sort:t.sortField},t.search&&{like:t.search}),t.date&&{date:t.date}),e.next=3,t.fetchRequestStates(n);case 3:t.total=t.requestStatesCount,t.requestStatesData={data:t.requestStates};case 5:case"end":return e.stop()}}),e)})))()}})},Ag=Tg,Ig=(n("0d2e"),n("5b5b"),Object(M["a"])(Ag,wg,Og,!1,null,null,null)),Dg=Ig.exports,zg=[{value:"offline-requests",title:"Оффлайн заявки"},{value:"online-stores",title:"Интернет-магазины"}],Ng={name:"Requests",components:{PageWrapper:ir,Tabs:ci,OfflineRequests:yg,OnlineStores:Dg},data:function(){return{currentTab:"online-stores",tabs:zg}}},Mg=Ng,Lg=Object(M["a"])(Mg,mg,hg,!1,null,null,null),Bg=Lg.exports,Fg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"requests-page"},[n("page-wrapper",{attrs:{"is-loading":t.isLoading},scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[n("breadcrumbs"),n("cancel-request",{attrs:{status:t.currentRequestStatus}})]},proxy:!0},{key:"title",fn:function(){return[n("copyable-element",{attrs:{content:t.optyId}},[t._v(" Заявка № "+t._s(t.optyId)+" ")]),n("status-badge",{attrs:{status:t.status,description:t.statusDescription}}),n("status-info",{attrs:{status:t.currentRequestStatus}})]},proxy:!0},{key:"tabs",fn:function(){return[n("tabs",{attrs:{tabs:t.currentTabs,status:t.currentRequestStatus,"use-query":""},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}})]},proxy:!0},{key:"default",fn:function(){return[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-8"},[n("request-info",{directives:[{name:"show",rawName:"v-show",value:"request-info"===t.currentTab,expression:"currentTab === 'request-info'"}]}),n("documents",{directives:[{name:"show",rawName:"v-show",value:"documents"===t.currentTab,expression:"currentTab === 'documents'"}]}),n("goods",{directives:[{name:"show",rawName:"v-show",value:"goods"===t.currentTab,expression:"currentTab === 'goods'"}]}),n("request-history",{directives:[{name:"show",rawName:"v-show",value:"request-history"===t.currentTab,expression:"currentTab === 'request-history'"}]})],1),n("div",{staticClass:"col-lg-4"},[n("request-card-content",{directives:[{name:"show",rawName:"v-show",value:"request-history"!==t.currentTab,expression:"currentTab !== 'request-history'"}]})],1)])]},proxy:!0}])})],1)},qg=[],Ug=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.captionText?n("div",{staticClass:"crm-mt-16"},[n("otp-status-notification",[n("div",{domProps:{innerHTML:t._s(t.captionText)}})])],1):t._e()},Gg=[],Vg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style.icon},[n("chevron-with-border")],1),n("div",{class:t.$style.body},[t._t("default")],2)])},Hg=[],Wg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"}},[n("rect",{attrs:{width:"23",height:"23",x:"-.5",y:".5",fill:"#fff",stroke:"#3B7B23",rx:"3.5",transform:"matrix(-1 0 0 1 23 0)"}}),n("path",{attrs:{stroke:"#3B7B23","stroke-linecap":"round","stroke-linejoin":"round",d:"M9 18l6-6-6-6"}})])},Kg=[],Yg={name:"ChevronWithBorder"},Zg=Yg,Qg=Object(M["a"])(Zg,Wg,Kg,!1,null,null,null),Jg=Qg.exports,Xg={name:"OtpStatusNotification",components:{ChevronWithBorder:Jg}},tb=Xg,eb=n("d792");function nb(t){this["$style"]=eb["default"].locals||eb["default"]}var rb,ab=Object(M["a"])(tb,Vg,Hg,!1,nb,null,null),ob=ab.exports,sb=(rb={},Object(vt["a"])(rb,ua.AGREEMENT_AUTHORIZED,"Договор авторизован"),Object(vt["a"])(rb,ua.AGREEMENT_DOCS_SENT,"Клиенту отправлена СМС. <br> Ждем завершения электронного подписания"),Object(vt["a"])(rb,ua.AGREEMENT_SIGN_FAILED,"Клиенту нужна помощь в подписании документов"),Object(vt["a"])(rb,ua.ARCHIVE,"В архиве"),rb),ib={name:"StatusInfo",components:{OtpStatusNotification:ob},props:{status:{type:String,required:!0}},computed:{captionText:function(){return sb[this.status]},captionColor:function(){return da[this.status]}}},cb=ib,lb=Object(M["a"])(cb,Ug,Gg,!1,null,null,null),ub=lb.exports,db=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" № заказа в ТО ")]),n("div",{class:t.$style.value},[t._v(" "+t._s(t.currentRequestState.orderId)+" ")])]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Торговая сеть ")]),n("div",{class:t.$style.value},[t._v(" "+t._s(t.currentRequestState.commercialNetName)+" ")])]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Наименование ТО ")]),n("div",{class:t.$style.value},[t.currentOrganization?n("div",{class:t.$style.link,on:{click:function(e){t.isOrganizationDetailsOpen=!0}}},[t._v(" "+t._s(t.currentRequestState.organizationName)+" ")]):n("div",[t._v(" "+t._s(t.currentRequestState.organizationName)+" ")])])]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Наименование ТТ ")]),n("div",{class:t.$style.value},[t.currentShop?n("div",{class:t.$style.link,on:{click:function(e){t.isShopDetailsOpen=!0}}},[t._v(" "+t._s(t.currentRequestState.shopName)+" ")]):n("div",[t._v(" "+t._s(t.currentRequestState.shopName)+" ")])])]),t.isShopDetailsOpen?n("shop-details",{attrs:{shop:t.currentShop,editable:!1},on:{close:function(e){t.isShopDetailsOpen=!1}}}):t._e(),t.isOrganizationDetailsOpen?n("organization-details",{attrs:{organization:t.currentOrganization,"show-add-products-link":""},on:{close:function(e){t.isOrganizationDetailsOpen=!1}}}):t._e()],1)},pb=[],fb={name:"RequestCardContent",components:{OrganizationDetails:Im,ShopDetails:pl},data:function(){return{currentShop:null,currentOrganization:null,isShopDetailsOpen:!1,isOrganizationDetailsOpen:!1}},computed:Object(De["a"])({},Object(Vn["e"])("request",["currentRequestState"])),created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(_.isRoleAdmin()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ov.fetchShops({page:1,size:1,code:t.currentRequestState.shopCode});case 4:return n=e.sent,r=n.shops,a=Object(ja["a"])(r,1),t.currentShop=a[0],e.next=10,qs.fetchOrganizations(!1,{page:1,size:1,code:t.currentRequestState.organizationCode});case 10:o=e.sent,s=o.organizations,i=Object(ja["a"])(s,1),t.currentOrganization=i[0];case 14:case"end":return e.stop()}}),e)})))()},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("shop",["fetchShops"])),Object(Vn["b"])("organization",["fetchOrganizations"]))},mb=fb,hb=n("4cb5");function vb(t){this["$style"]=hb["default"].locals||hb["default"]}var gb=Object(M["a"])(mb,db,pb,!1,vb,null,null),bb=gb.exports,_b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("expansion-panel",{attrs:{title:"О клиенте",expanded:""}},[n("div",{class:t.$style.wrapper},[n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" ФИО клиента ")]),n("div",{class:t.$style.value},[t._v(" "+t._s(t.currentRequestState.clientFio)+" ")])]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Телефон клиента ")]),n("div",{class:t.$style.value},[t._v(" "+t._s(t.currentRequestData.phone)+" ")])]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Time Zone ")]),n("div",{class:t.$style.value})]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" E-mail ")]),n("div",{class:t.$style.value},[t._v(" "+t._s(t.currentRequestData.email)+" ")])]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Паспорт ")]),n("div",{class:t.$style.value},[t._v(" "+t._s(t.clientPassport)+" ")])])])]),t.isStatusRequestFormation?t._e():n("expansion-panel",{attrs:{expanded:""},scopedSlots:t._u([{key:"title",fn:function(){return[!t.isStatusApproved&&t.currentRequestState.agreementNumber?n("copyable-element",{attrs:{content:t.currentRequestState.agreementNumber}},[t._v(" "+t._s(t.creditPanelTitle)+" ")]):n("div",{class:t.$style.title},[t._v(" "+t._s(t.creditPanelTitle)+" ")])]},proxy:!0}],null,!1,3764282420)},[n("div",{class:t.$style.wrapper},[n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Кредитный продукт ")]),n("div",{class:t.$style.value},[n("router-link",{class:t.$style.link,attrs:{to:"/"}},[t._v(" "+t._s(t.currentRequestData.creditProduct)+" ")])],1)]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Сумма кредита ")]),n("div",{class:t.$style.value},[t._v(" "+t._s(t.totalSum)+" ₽ ")])]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Срок ")]),n("div",{class:t.$style.value},[t._v(" "+t._s(t.creditPeriod)+" ")])]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Доп. продукты ")]),n("div",{class:t.$style.value},[n("router-link",{class:t.$style.link,attrs:{to:"/"}},[t._v(" "+t._s(t.currentRequestData.addProduct)+" ")])],1)]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Ежемесячный платёж ")]),n("div",{class:t.$style.value})]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Скидка партнёра ")]),n("div",{class:t.$style.value})]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Способ подписания ")]),n("div",{class:t.$style.value},[t._v(" "+t._s(t.currentRequestState.signMethod)+" ")])]),n("div",{class:t.$style.param},[n("div",{class:t.$style.label},[t._v(" Первоначальный взнос ")]),n("div",{class:t.$style.value},[t._v(" "+t._s(t.firstPayment)+" ₽ ")])])])])],1)},kb=[],yb={name:"RequestInfo",components:{ExpansionPanel:Vl,CopyableElement:Hc},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("request",["currentRequestData","currentRequestState"])),Object(Vn["c"])("request",["currentRequestStatus","isStatusApproved","isStatusRequestFormation"])),{},{creditPanelTitle:function(){return!this.isStatusApproved&&this.currentRequestState.agreementNumber?"Кредитный договор № ".concat(this.currentRequestState.agreementNumber):"Кредитный договор"},clientPassport:function(){var t;if(null===(t=this.currentRequestData)||void 0===t||!t.doc)return"-";var e=this.currentRequestData.doc,n=e.series,r=e.number;return"".concat(n," ").concat(r)},totalSum:function(){if(!this.currentRequestData.goods)return"";var t=this.currentRequestData.goods,e=t.reduce((function(t,e){var n=e.price,r=e.quantity;return t+n*r}),0);return ym(e)},firstPayment:function(){return ym(this.currentRequestData.firstPayment)},creditPeriod:function(){var t=["месяц","месяца","месяцев"],e=this.currentRequestData.creditPeriod;return"".concat(e," ").concat(qa(e,t))}})},wb=yb,Ob=n("bdfe");function Cb(t){this["$style"]=Ob["default"].locals||Ob["default"]}var xb=Object(M["a"])(wb,_b,kb,!1,Cb,null,null),Sb=xb.exports,Pb=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"request-history"},t._l(t.historyList,(function(t,e){return n("history",{key:e,attrs:{item:t}})})),1)},jb=[],Eb=n("15fd"),Rb=1,$b=300,Tb={namespaced:!0,state:{organizations:[],currentOrganization:{}},getters:{getOrganizationById:function(t){return function(e){return t.organizations.find((function(t){return t.id===e}))||{}}}},mutations:{setOrganizations:function(t,e){t.organizations=e},setOrganization:function(t,e){t.currentOrganization=Object(De["a"])({},e)}},actions:{fetchOrganizations:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=e.hasAttr,o=Object(Eb["a"])(e,["hasAttr"]),s=Object(De["a"])({page:Rb,size:$b},o),n.prev=3,n.next=6,qs.fetchOrganizations(a,s);case 6:return i=n.sent,c=i.organizations,r("setOrganizations",c),n.abrupt("return",c);case 12:n.prev=12,n.t0=n["catch"](3),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[3,12]])})))()},fetchOrganizationById:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,n.prev=1,n.next=4,qs.fetchOrganizationById(e);case 4:a=n.sent,r("setOrganization",a),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},updateOrganization:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.dispatch,n.prev=1,n.next=4,qs.updateOrganization(e);case 4:r("fetchOrganizationById",e.id),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},addOrganization:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.dispatch,n.next=3,qs.addOrganization(e);case 3:return n.next=5,r("fetchOrganizations",{hasAttr:!1});case 5:case"end":return n.stop()}}),n)})))()}}},Ab={namespaced:!0,state:function(){return{shops:[],totalItems:0}},getters:{getShopById:function(t){return function(e){return t.shops.find((function(t){return t.id===e}))||{}}}},mutations:{setShops:function(t,e){var n=e.shops,r=e.totalItems;t.shops=n,t.totalItems=r}},actions:{fetchShops:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=Object(De["a"])({page:1,size:999},e),n.next=4,Ov.fetchShops(a);case 4:o=n.sent,s=o.shops,i=o.totalItems,r("setShops",{shops:s,totalItems:i});case 8:case"end":return n.stop()}}),n)})))()},addShop:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ov.addShop(e);case 2:case"end":return t.stop()}}),t)})))()},updateShop:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ov.updateShop(e);case 2:case"end":return t.stop()}}),t)})))()}}},Ib=(n("c740"),[{id:1,name:"Коробочный"},{id:2,name:"Классический"}]),Db=[{id:1,name:"в тело кредита"},{id:2,name:"не в тело кредита"}],zb={namespaced:!0,state:{additionalProducts:[],productTypes:Ib,serviceTypes:[],paymentTypes:Db},getters:{getAdditionalProductById:function(t){return function(e){return t.additionalProducts.find((function(t){return t.id===e}))}}},mutations:{setAdditionalProducts:function(t,e){t.additionalProducts=e},replaceAdditionalProduct:function(t,e){var n=null===e||void 0===e?void 0:e.id;if(n){var r=t.additionalProducts.findIndex((function(t){return t.id===n}));-1!==r&&s["default"].set(t.additionalProducts,r,e)}},setServiceTypes:function(t,e){t.serviceTypes=e}},actions:{fetchAdditionalProducts:function(t){var e=arguments;return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.commit,a=t.state,o=e.length>1&&void 0!==e[1]&&e[1],s=0!==a.additionalProducts.length,!s||o){n.next=5;break}return n.abrupt("return");case 5:return n.prev=5,n.next=8,bd.fetchAdditionalProducts();case 8:i=n.sent,r("setAdditionalProducts",i),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](5),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[5,12]])})))()},fetchAdditionalProductById:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,n.next=3,bd.fetchAdditionalProductById(e);case 3:a=n.sent,r("replaceAdditionalProduct",a);case 5:case"end":return n.stop()}}),n)})))()},fetchServiceTypes:function(t){return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,r=t.state,!r.serviceTypes.length){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,bd.fetchServiceTypes();case 6:a=e.sent,n("setServiceTypes",a),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()},saveAdditionalProduct:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.dispatch,n.next=3,bd.saveAdditionalProduct(e);case 3:return n.next=5,r("fetchAdditionalProducts",!0);case 5:case"end":return n.stop()}}),n)})))()},updateAdditionalProduct:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.dispatch,n.next=3,bd.updateAdditionalProduct(e);case 3:return n.next=5,r("fetchAdditionalProductById",e.id);case 5:case"end":return n.stop()}}),n)})))()}}},Nb=1,Mb=42,Lb={namespaced:!0,state:function(){return{usersCount:0,users:[],currentUser:{},curatorsTo:[],curatorsTt:[]}},getters:{userFio:function(t){var e=t.currentUser,n=e.lastname,r=e.firstname,a=e.middlename;return"".concat(n||""," ").concat(r," ").concat(a||"").trim()}},mutations:{setUsers:function(t,e){var n=e.users,r=e.field,a=e.totalItems;t[r]=n,t.usersCount=a},setUser:function(t,e){t.currentUser=e}},actions:{fetchUsers:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=Object(De["a"])({page:Nb,size:Mb},e),n.prev=2,n.next=5,Ih.fetchUsers(a);case 5:o=n.sent,s=o.users,i=o.totalItems,r("setUsers",{users:s,field:"users",totalItems:i}),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](2),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()},fetchUserById:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,n.prev=1,n.next=4,Ih.fetchUserById(e);case 4:a=n.sent,r("setUser",a),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},fetchCuratorsTo:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=Object(De["a"])(Object(De["a"])({},e),{},{page:Nb,size:Mb,roles:ca.CURATOR_NET}),n.next=4,Ih.fetchUsers(a);case 4:o=n.sent,s=o.users,r("setUsers",{users:s,field:"curatorsTo"});case 7:case"end":return n.stop()}}),n)})))()},fetchCuratorsTt:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=Object(De["a"])(Object(De["a"])({},e),{},{page:Nb,size:Mb,roles:ca.CURATOR_SHOP}),n.next=4,Ih.fetchUsers(a);case 4:o=n.sent,s=o.users,r("setUsers",{users:s,field:"curatorsTt"});case 7:case"end":return n.stop()}}),n)})))()},updateUser:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.dispatch,n.next=3,Ih.updateUser(e);case 3:return n.next=5,r("fetchUserById",e.id);case 5:case"end":return n.stop()}}),n)})))()}}},Bb=1,Fb=10,qb={namespaced:!0,state:{requestStatesCount:0,requestStates:[],currentRequestState:{},currentRequestData:{}},getters:{currentRequestStatus:function(t){var e,n;return null!==(e=null===(n=t.currentRequestState)||void 0===n?void 0:n.status)&&void 0!==e?e:""},isStatusApproved:function(t,e){return e.currentRequestStatus===ua.DECISION_APPROVAL},isStatusAgreementCreatedPaperless:function(t,e){return e.currentRequestStatus===ua.AGREEMENT_CREATED_PAPERLESS},isStatusAgreementCreatedPaperlessEs:function(t,e){return e.currentRequestStatus===ua.AGREEMENT_CREATED_PAPERLESS_ES},isStatusAgreementCreatedPaperTech:function(t,e){return e.currentRequestStatus===ua.AGREEMENT_CREATED_PAPER_TECH},isStatusErrorSigning:function(t,e){return e.currentRequestStatus===ua.AGREEMENT_SIGN_FAILED},isStatusCheckingDoc:function(t,e){return e.currentRequestStatus===ua.AGREEMENT_DOCS_SENT},isStatusRequestFormation:function(t,e){return e.currentRequestStatus===ua.OPTY_CREATED},isStatusAgreementSigned:function(t,e){return e.currentRequestStatus===ua.AGREEMENT_SIGNED},isStatusAgreementAuthorized:function(t,e){return e.currentRequestStatus===ua.AGREEMENT_AUTHORIZED}},mutations:{setRequestStates:function(t,e){t.requestStates=e.states,t.requestStatesCount=e.totalItems},setCurrentRequestState:function(t,e){t.currentRequestState=e},setCurrentRequestData:function(t,e){t.currentRequestData=e}},actions:{fetchRequestStates:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=Object(De["a"])({page:Bb,size:Fb},e),n.prev=2,n.next=5,C_.fetchRequestStates(a);case 5:o=n.sent,r("setRequestStates",o),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](2),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))()},fetchRequestStateById:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,n.next=3,C_.fetchRequestStateById(e);case 3:a=n.sent,r("setCurrentRequestState",a);case 5:case"end":return n.stop()}}),n)})))()},fetchRequestDataById:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,n.next=3,C_.fetchRequestDataById(e);case 3:a=n.sent,r("setCurrentRequestData",a);case 5:case"end":return n.stop()}}),n)})))()},updateCurrentRequestState:function(t){return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.commit,e.next=3,C_.fetchRequestStateById(n.currentRequestState.uuid);case 3:a=e.sent,r("setCurrentRequestState",a);case 5:case"end":return e.stop()}}),e)})))()}}},Ub={namespaced:!0,state:{regcenters:[],kkos:[],commercialNets:[]},mutations:{setRegcenters:function(t,e){t.regcenters=e},setKkos:function(t,e){t.kkos=e},setCommercialNets:function(t,e){t.commercialNets=e}},actions:{fetchRegcenters:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,n.next=3,Ao.fetchRegcenters(e);case 3:a=n.sent,r("setRegcenters",a);case 5:case"end":return n.stop()}}),n)})))()},fetchKkos:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,n.next=3,Ao.fetchKkos(e);case 3:a=n.sent,r("setKkos",a);case 5:case"end":return n.stop()}}),n)})))()},fetchCommercialNets:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=e.code,o=e.name,n.next=4,Ao.fetchCommercialNets({code:a,name:o});case 4:s=n.sent,r("setCommercialNets",s);case 6:case"end":return n.stop()}}),n)})))()},fetchAllReferences:function(t){var e=t.dispatch;e("fetchRegcenters"),e("fetchKkos")}}},Gb="".concat(sa,"/roles"),Vb=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co({url:Gb,method:"GET"});case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Hb={fetchRoles:Vb},Wb={namespaced:!0,state:{roles:[]},mutations:{setRoles:function(t,e){t.roles=e}},actions:{fetchRoles:function(t){return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,Hb.fetchRoles();case 3:r=e.sent,n("setRoles",r);case 5:case"end":return e.stop()}}),e)})))()}}},Kb={file:null,readyTimestamp:null},Yb=[Object(De["a"])({code:"PHOTO",type:"clientWithPassport",label:"Фотография Клиента с паспортом в руках"},Kb),Object(De["a"])({code:"ES_CONSENT_BANK",type:"esAgreement",label:"Соглашение об ЭП Банка с подписью"},Kb),Object(De["a"])({code:"ES_CONSENT_MFO",type:"esAgreement2",label:"Соглашение об ЭП МФК с подписью"},Kb),Object(De["a"])({code:"PASSPORT_RUS",type:"passportInfo",label:"Разворот паспорта с фотографией"},Kb),Object(De["a"])({code:"PASSPORT_RUS",type:"passportRegistration",label:"Разворот паспорта с пропиской"},Kb)],Zb={namespaced:!0,state:{documents:[].concat(Yb),uploadDocsError:""},mutations:{setState:function(t,e){var n=e.name,r=e.value;t[n]=r},uploadDocumentFile:function(t,e){var n=t.documents.findIndex((function(t){return t.type===e.type}));s["default"].set(t.documents,n,Object(De["a"])(Object(De["a"])({},t.documents[n]),e))},removeDocumentFile:function(t,e){var n=t.documents.findIndex((function(t){return t.type===e}));s["default"].set(t.documents,n,Object(De["a"])(Object(De["a"])({},t.documents[n]),Kb))}},getters:{readyDocs:function(t){return t.documents.filter((function(t){return t.file}))},allDocsAreReady:function(t,e){return e.totalDocsToUploadCount===e.readyDocs.length},totalDocsToUploadCount:function(t,e,n,r){var a=t.documents.length,o=!!r["agreement/eSignBankDocUrl"],s=!!r["agreement/eSignMfoDocUrl"];return o||a--,s||a--,a},clientWithPassportDoc:function(t){return t.documents.find((function(t){return"clientWithPassport"===t.type}))},esBankDoc:function(t){return t.documents.find((function(t){return"esAgreement"===t.type}))},esMfkDoc:function(t){return t.documents.find((function(t){return"esAgreement2"===t.type}))},passportInfoDoc:function(t){return t.documents.find((function(t){return"passportInfo"===t.type}))},passportRegistrationDoc:function(t){return t.documents.find((function(t){return"passportRegistration"===t.type}))}},actions:{uploadFiles:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.getters,a=t.commit,o=t.dispatch,a("setState",{name:"uploadDocsError",value:""}),s=r.readyDocs.map((function(t){var n=new FormData;return n.append("type",t.code),n.append("filename",t.file.name),n.append("file",t.file),C_.uploadDoc(e,n)})),n.prev=3,n.next=6,Promise.all(s);case 6:return n.next=8,C_.sendDocs(e);case 8:o("request/updateCurrentRequestState",null,{root:!0}),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](3),a("setState",{name:"uploadDocsError",value:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[3,11]])})))()},resetFileState:function(t){var e=t.commit;e("setState",{name:"uploadDocsError",value:""}),e("setState",{name:"documents",value:[].concat(Yb)})}}},Qb=(n("a434"),n("5935")),Jb=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,yo()({method:"POST",url:"https://shop.otpbank.ru/link/short-link",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Basic ".concat(btoa("user:ct13WVpi8tqekJPkZijRROqv"))},data:{redirectLink:e}});case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Xb={generate:Jb},t_=79,e_=function(t){return t.map((function(t){var e=t.name,n=t.code;return{value:n,title:e,subtitle:n}}))},n_={address:"",url:"",creditType:"1",firstPayment:!1,goods:[],fileName:"",goodsVariant:"goods"},r_={creditProduct:"",successUrl:"",failUrl:"",receivingMethod:"",utm:""},a_={namespaced:!0,state:function(){return{step:1,shops:null,creditProducts:[],form:Object(De["a"])(Object(De["a"])({},n_),r_)}},getters:{getUrl:function(){var t="/smart-form";return"".concat(t,"/?creditType=1&utm=utm_test")},addresses:function(t){return t.shops?t.shops.map((function(t){return{name:t.address,url:t.url}})):[]},addressAndSite:function(t){var e=t.form.url,n=e?", ".concat(e):"";return"".concat(t.form.address).concat(n)},getField:Qb["a"]},mutations:{addGoods:function(t,e){t.form.goods.push(e)},editGoods:function(t,e){var n=t.form.goods.findIndex((function(t){var n=t.id;return n===e.id}));t.form.goods.splice(n,1,e)},deleteGoods:function(t,e){t.form.goods.splice(e,1)},clearGoods:function(t){t.form.goods=[]},resetState:function(t){Object.assign(t.form,n_)},resetProModeFields:function(t){Object.assign(t.form,r_)},setShops:function(t,e){t.shops=e},setCreditProducts:function(t,e){t.creditProducts=e},updateField:Qb["c"]},actions:{generateShortLink:function(t){var e=t.getters,n=e.getUrl;return Xb.generate(n)},fetchShops:function(t){var e=t.commit;Ov.fetchShops({page:1,size:999,to:t_}).then((function(t){var n=t.shops;e("setShops",n)})).catch((function(t){return t}))},fetchCreditProducts:function(t){var e=t.commit;Ou.fetchProducts(!1,{page:1,size:99,organization:t_}).then((function(t){var n=t.creditProducts;e("setCreditProducts",e_(n))})).catch((function(t){return t}))}}},o_=n("c4e3"),s_=n.n(o_),i_=n("21a6"),c_=n.n(i_),l_={namespaced:!0,state:{currentAgreement:null,errorMessage:""},getters:{specificationDocUrl:function(t){var e,n,r=null===(e=t.currentAgreement)||void 0===e||null===(n=e.docs)||void 0===n?void 0:n.find((function(t){return"Спецификация"===t.type}));return null===r||void 0===r?void 0:r.href},paymentScheduleDocUrl:function(t){var e,n,r=null===(e=t.currentAgreement)||void 0===e||null===(n=e.docs)||void 0===n?void 0:n.find((function(t){return"График платежей"===t.type}));return null===r||void 0===r?void 0:r.href},paymentReminderDocUrl:function(){return"todo"},eSignBankDocUrl:function(t){var e,n,r=null===(e=t.currentAgreement)||void 0===e||null===(n=e.docs)||void 0===n?void 0:n.find((function(t){return"Соглашение ЭП (Банк)"===t.type}));return null===r||void 0===r?void 0:r.href},eSignMfoDocUrl:function(t){var e,n,r=null===(e=t.currentAgreement)||void 0===e||null===(n=e.docs)||void 0===n?void 0:n.find((function(t){return"Соглашение ЭП (МФО)"===t.type}));return null===r||void 0===r?void 0:r.href},isPaperTech:function(t){var e;return"paper tech"===(null===(e=t.currentAgreement)||void 0===e?void 0:e.signMethod)}},mutations:{setCurrentAgreement:function(t,e){t.currentAgreement=e},setErrorMessage:function(t,e){t.errorMessage=e}},actions:{createAgreement:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=t.dispatch,o=e.uuid,s=e.paperTech,r("setErrorMessage",""),n.prev=3,n.next=6,C_.createAgreement({uuid:o,paperTech:s});case 6:i=n.sent,r("setCurrentAgreement",i),a("request/updateCurrentRequestState",null,{root:!0}),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](3),r("setErrorMessage",n.t0.message);case 14:case"end":return n.stop()}}),n,null,[[3,11]])})))()},authAgreement:function(t){return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o,s,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.dispatch,a=t.rootState,n("setErrorMessage",""),e.prev=2,i=null===(o=a.request.currentRequestState)||void 0===o?void 0:o.uuid,c=null===(s=a.request.currentRequestState)||void 0===s?void 0:s.optyId,e.next=7,C_.authAgreement(i,{optyId:c,customerEstimate:"ESTIMATE_04"});case 7:r("request/updateCurrentRequestState",null,{root:!0}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),n("setErrorMessage",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()},fetchAgreementById:function(t,e){return Object(Gn["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,n.prev=1,n.next=4,C_.fetchAgreementById(e);case 4:a=n.sent,r("setCurrentAgreement",a),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},downloadFullCreditAgreement:function(t){return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,null!==(n=r.currentAgreement)&&void 0!==n&&n.docs){e.next=3;break}return e.abrupt("return");case 3:return a=new s_.a,o=r.currentAgreement.docs.map((function(t){return Co.get(t.href,{responseType:"blob"}).then((function(e){a.file(t.name,e.data)}))})),e.next=7,Promise.all(o);case 7:return e.next=9,a.generateAsync({type:"blob"});case 9:s=e.sent,c_.a.saveAs(s,"credit_agreement.zip");case 11:case"end":return e.stop()}}),e)})))()},resetAgreementState:function(t){var e=t.commit;e("setCurrentAgreement",null),e("setErrorMessage","")}}},u_={organization:Tb,shop:Ab,creditProduct:Pu,additionalProduct:zb,user:Lb,request:qb,reference:Ub,role:Wb,file:Zb,crmConstructor:a_,agreement:l_};s["default"].use(Vn["a"]);var d_=new Vn["a"].Store({state:{tablePerPage:15},modules:u_}),p_="https://shop-api.lending.isb/broker/core",f_=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.next=3,Co({url:"".concat(p_,"/v1/states/"),method:"GET",params:e});case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m_=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co.get("".concat(p_,"/v1/states/").concat(e));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h_=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co.get("".concat(p_,"/v1/agreements/").concat(e));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v_=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co.get("".concat(p_,"/v1/opties/").concat(e));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g_=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Co.get("".concat(p_,"/v1/audit/").concat(e));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b_=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.uuid,r=e.paperTech,a="".concat(p_,"/v1/agreement/create/").concat(n),t.prev=2,o=r?{paperTech:!0}:null,t.next=6,Co.post(a,o);case 6:return s=t.sent,t.abrupt("return",s.data);case 10:if(t.prev=10,t.t0=t["catch"](2),!t.t0.response){t.next=18;break}if(404!==t.t0.response.status){t.next=15;break}throw Error("Процесс не найден или не предполагает создание договора");case 15:if(403!==t.t0.response.status){t.next=17;break}throw Error("Доступ запрещен (403)");case 17:throw Error(t.t0.response.data);case 18:throw Error(t.t0);case 19:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),__=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="".concat(p_,"/v1/document/").concat(e),t.prev=1,t.next=4,Co({url:r,method:"post",headers:{"Content-Type":"multipart/form-data"},data:n});case 4:t.next=11;break;case 6:if(t.prev=6,t.t0=t["catch"](1),!t.t0.response){t.next=10;break}throw Error(t.t0.response.data);case 10:throw Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}(),k_=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,o,s,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=function(){return s=Object(Gn["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Co.get(n);case 3:if(e=t.sent,!e.data){t.next=8;break}return t.next=7,d_.dispatch("request/updateCurrentRequestState",null,{root:!0});case 7:return t.abrupt("return");case 8:r=+e.headers["retry-after"],a=setTimeout(o,r),t.next=17;break;case 12:return t.prev=12,t.t0=t["catch"](0),clearTimeout(a),t.next=17,d_.dispatch("request/updateCurrentRequestState",null,{root:!0});case 17:case"end":return t.stop()}}),t,null,[[0,12]])}))),s.apply(this,arguments)},o=function(){return s.apply(this,arguments)},i="".concat(p_,"/v1/agreement/senddocs/").concat(e),t.prev=3,t.next=6,Co.post(i);case 6:c=t.sent,n=c.headers.location,r=+c.headers["retry-after"],a=setTimeout(o,r),t.next=17;break;case 12:if(t.prev=12,t.t0=t["catch"](3),!t.t0.response||!t.t0.response.data){t.next=16;break}throw Error(t.t0.response.data);case 16:throw t.t0;case 17:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}(),y_=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.uuid,r=e.optyId,a=e.reasonCode,o="".concat(p_,"/v1/opty/reject/").concat(n),s={optyId:r,code:a},t.prev=3,t.next=6,Co.post(o,s);case 6:t.next=15;break;case 8:if(t.prev=8,t.t0=t["catch"](3),!t.t0.response){t.next=14;break}if(404!==t.t0.response.status){t.next=13;break}throw Error("Not Found (404)");case 13:throw Error(t.t0.response.data);case 14:throw Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),w_=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.agreementNumber,r=e.authCode,a=e.reasonCode,o="".concat(p_,"/v1/agreement/cancelauthorization"),s={agreementNumber:n,authorizationCode:r,cancelAuthReason:a},t.prev=3,t.next=6,Co.post(o,s);case 6:t.next=13;break;case 8:if(t.prev=8,t.t0=t["catch"](3),!t.t0.response){t.next=12;break}throw Error(t.t0.response.data);case 12:throw Error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),O_=function(){var t=Object(Gn["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="".concat(p_,"/v1/agreement/authorize/").concat(e),t.prev=1,t.next=4,Co.post(r,n);case 4:t.next=11;break;case 6:if(t.prev=6,t.t0=t["catch"](1),!t.t0.response){t.next=10;break}throw Error(t.t0.response.data);case 10:throw Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}(),C_={fetchRequestStates:f_,fetchRequestStateById:m_,fetchRequestDataById:v_,fetchRequestHistoryById:g_,createAgreement:b_,uploadDoc:__,sendDocs:k_,rejectRequest:y_,rejectAgreementAuth:w_,fetchAgreementById:h_,authAgreement:O_},x_={name:"RequestHistory",components:{History:Ql},inheritAttrs:!1,data:function(){return{historyList:[]}},computed:Object(De["a"])({},Object(Vn["e"])("request",["currentRequestState"])),created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C_.fetchRequestHistoryById(t.currentRequestState.uuid);case 2:t.historyList=e.sent;case 3:case"end":return e.stop()}}),e)})))()}},S_=x_,P_=(n("6b92"),Object(M["a"])(S_,Pb,jb,!1,null,"618564cc",null)),j_=P_.exports,E_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"request-goods"},[n("table-with-pagination",{attrs:{headers:t.headers,items:t.currentRequestData.goods,"goods-table":""},scopedSlots:t._u([{key:"quantity",fn:function(e){var n=e.cell;return[t._v(" "+t._s(n.value)+" шт ")]}},{key:"price",fn:function(e){var r=e.cell;return[n("div",{staticClass:"request-goods__cell-value"},[t._v(" "+t._s(t.setFormattedValue(r.value))+" ₽ ")])]}},{key:"totalSum",fn:function(){return[n("td",{staticClass:"request-goods__total-sum"},[t._v(" ИТОГО ")]),n("td",{staticClass:"request-goods__total-sum"}),n("td",{staticClass:"request-goods__total-sum _line-through"},[t._v(" "+t._s(t.totalSumWithoutSale)+" ₽ ")]),n("td",{staticClass:"request-goods__total-sum"},[t._v(" "+t._s(t.totalSumWithSale)+" ₽ ")])]},proxy:!0}])})],1)},R_=[],$_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"crm-table-with-pagination"},[n("crm-table",t._g(t._b({attrs:{items:t.localItems,page:t.page,"per-page":t.tablePerPage,"items-num":t.itemsNum},on:{"update:items":function(e){t.localItems=e},"update:itemsNum":function(e){t.itemsNum=e},"update:items-num":function(e){t.itemsNum=e}},scopedSlots:t._u([t._l(t.$scopedSlots,(function(e,n){return{key:n,fn:function(e){return[t._t(n,null,null,e)]}}}))],null,!0)},"crm-table",t.$attrs,!1),t.$listeners)),n("pagination",{attrs:{count:t.count,page:t.page},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)},T_=[],A_={data:function(){return{localItems:[]}},watch:{items:function(t){Array.isArray(t)?(this.localItems=Object(H["a"])(t),console.log("wath fromr mixin + emit",this.$options.name),this.$emit("changetable",this.localItems)):Da(t)&&(this.localItems=[])}},created:function(){this.localItems=Object(H["a"])(this.items)}},I_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.count>1?n("ul",{staticClass:"pagination"},[n("li",{staticClass:"page-item page-prev",class:{_disabled:t.value<2},on:{click:t.onPrevClick}},[n("paginate-prev")],1),t._l(t.count,(function(e){return n("li",{key:e,staticClass:"page-item",class:{_active:e===t.value},on:{click:function(n){return t.onClick(e)}}},[t._v(" "+t._s(e)+" ")])})),n("li",{staticClass:"page-item page-next",class:{_disabled:t.value>=t.count},on:{click:t.onNextClick}},[n("paginate-next")],1)],2):t._e()},D_=[],z_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"crm-icon icon-paginate-prev",attrs:{width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M14 17.2217L9 12.2217L14 7.22168",stroke:"currentColor","stroke-linecap":"round"}})])},N_=[],M_={name:"PaginatePrev"},L_=M_,B_=Object(M["a"])(L_,z_,N_,!1,null,null,null),F_=B_.exports,q_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"crm-icon icon-paginate-next",attrs:{width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M10 7.22168L15 12.2217L10 17.2217",stroke:"currentColor","stroke-linecap":"round"}})])},U_=[],G_={name:"PaginateNext"},V_=G_,H_=Object(M["a"])(V_,q_,U_,!1,null,null,null),W_=H_.exports,K_={name:"Pagination",components:{PaginateNext:W_,PaginatePrev:F_},props:{count:{type:Number,default:0},value:{type:Number,default:0}},data:function(){return{perPage:3,currentPage:1,localValue:this.value||1}},watch:{localValue:function(t){this.$emit("input",t)}},methods:{onClick:function(t){this.localValue=t},onPrevClick:function(){this.value>1&&this.localValue--},onNextClick:function(){this.value<this.count&&this.localValue++}}},Y_=K_,Z_=(n("5eaf"),Object(M["a"])(Y_,I_,D_,!1,null,null,null)),Q_=Z_.exports,J_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"crm-table-wrapper"},[n("table",{staticClass:"crm-table",class:{"_goods-table":t.goodsTable}},[n("thead",[n("tr",t._l(t.headers,(function(e,r){return n("th",{key:r,style:{width:e.width+"px"}},[n("div",{staticClass:"crm-table__title"},[n("div",{staticClass:"crm-table__title-item"},[t._v(" "+t._s(e.label||e.key)+" ")]),e.sortable?n("div",{staticClass:"crm-table__title-sort",class:{"sort-down":t.localSortBy===e.key&&t.localSortDesc,"sort-up":t.localSortBy===e.key&&!t.localSortDesc},on:{click:function(n){return t.handleSort(e)}}}):t._e()])])})),0)]),t.isLoading?n("tbody",[n("tr",{staticClass:"loading"},[n("td",{attrs:{colspan:t.headers.length}},[n("spinner",{attrs:{size:"lg"}})],1)])]):n("tbody",[t._l(t.computedItems,(function(e,r){return n("tr",{key:r,class:{disabled:e.status&&"off"===e.status.value}},t._l(t.getVisibleRows(e),(function(r,a){return n("td",{key:a},[n("div",{class:[t.checkClickableData(r.key)?"crm-table__link":""],on:{click:function(n){return t.handleDataClick(e,r.key)}}},[t.$scopedSlots[r.key]?t._t(r.key,null,{cell:r,row:e,input:function(n){return t.changeCellValue(e.origRowIndex.value,r.key,n)}}):[t._v(" "+t._s(r.value)+" ")]],2)])})),0)})),t.$scopedSlots["totalSum"]?n("tr",[t._t("totalSum")],2):t._e()],2)])])},X_=[],tk=(n("07ac"),n("159b"),n("4fad"),["origRowIndex"]),ek=function(t,e){return t.map((function(t,e){return[e,t]})).sort(function(t,e){return this(t[1],e[1])||t[0]-e[0]}.bind(e)).map((function(t){return t[1]}))},nk=function t(e){return Da(e)?"":za(e)&&!Aa(e)?Object.keys(e).sort().filter((function(t){return!Da(t)})).map((function(n){return t(e[n])})).join(" "):Ma(e)},rk=function(t){var e=t.a,n=t.b,r=t.sortBy,a=e[r],o=n[r];return a=Da(a)?"":a,o=Da(o)?"":o,Aa(a)&&Aa(o)||Ia(a)&&Ia(o)?a<o?-1:a>o?1:0:nk(a).localeCompare(nk(o))},ak=function(t){var e=t.items,n=t.sortBy,r=t.sortDesc;return n?ek(e,(function(t,e){var a=rk({a:t,b:e,sortBy:n});return(a||0)*(r?-1:1)})):e},ok=function(t){var e=t.items,n=t.page,r=t.perPage;if(e.length>1){var a=(n-1)*r,o=a+r;return e.slice(a,o)}return e},sk=function(t){var e=t.items,n=t.filter;if(!n)return e;var r=n.toLowerCase();return e.map((function(t){return Object(De["a"])(Object(De["a"])({},t),{},{searchIndex:Object.values(t).join("￿").toLowerCase()})})).filter((function(t){var e=t.searchIndex;return e.includes(r)})).map((function(t){return delete t.searchIndex,t}))},ik=function(t){var e=t.items,n=t.headers;if(Array.isArray(e)&&e.length>0&&Array.isArray(n)&&n.length>0){var r=n.map((function(t){return t.key})),a=e.map((function(t){var e={};return r.forEach((function(n){e[n]={key:n,value:t[n],origRowIndex:t.origRowIndex,visible:!0}})),Object.entries(t).forEach((function(n){var a=Object(ja["a"])(n,2),o=a[0],s=a[1];r.includes(o)||(e[o]={key:o,value:s,origRowIndex:t.origRowIndex,visible:!1})})),e}));return a}return[]},ck=function(t){return Object.values(t).filter((function(t){return t.visible}))},lk=function(t){return t.map((function(t,e){return Object(De["a"])(Object(De["a"])({},t),{},{origRowIndex:e})}))},uk=["name","code_to","connected_to","code_product","code_tt","connectedTo","number"],dk={name:"Table",components:{Spinner:Xn},props:{items:{type:Array,default:function(){return[]}},headers:{type:Array,default:function(){return[]}},sortBy:{type:String,default:""},sortDesc:{type:Boolean,default:!1},page:{type:Number,default:1},perPage:{type:Number,default:15},isLoading:{type:Boolean,default:!1},filter:{type:String,default:""},goodsTable:Boolean},data:function(){return{localSortBy:this.sortBy||"",localSortDesc:this.sortDesc||!1,localItems:Array.isArray(this.items)?this.items.slice():[]}},computed:{isSortable:function(){return this.headers.some((function(t){return t.sortable}))},computedItems:function(){var t=this.localSortBy,e=this.localSortDesc,n=this.filter,r=this.localItems,a=this.headers,o=sk({items:r,filter:n});this.$emit("update:items-num",o.length);var s=ak({items:o,sortBy:t,sortDesc:e}),i=ok({items:s,page:this.page,perPage:this.perPage});return ik({items:i,headers:a})}},watch:{localSortBy:function(t){this.$emit("update:sort-by",t)},localSortDesc:function(t){this.$emit("update:sort-desc",t)},items:function(t){Array.isArray(t)?this.localItems=lk(Object(H["a"])(t)):Da(t)&&(this.localItems=[])}},created:function(){this.localItems=lk(Object(H["a"])(this.items))},methods:{handleSort:function(t){var e=t.key,n=t.sortable;this.isSortable&&n&&(e===this.localSortBy?this.localSortDesc=!this.localSortDesc:(this.localSortBy=e,this.localSortDesc=!1))},checkClickableData:function(t){return uk.includes(t)},handleDataClick:function(t,e){this.checkClickableData(e)&&this.$emit("data-click",{row:t,currentTd:t[e]})},getVisibleRows:function(t){return ck(t)},changeCellValue:function(t,e,n){console.log(t,e,n);var r=Object(H["a"])(this.localItems);r[t][e]=n,r=r.map((function(t){return Object.keys(t).reduce((function(e,n){return tk.includes(n)||(e[n]=t[n]),e}),{})})),this.$emit("update:items",r)}}},pk=dk,fk=(n("ab6f"),Object(M["a"])(pk,J_,X_,!1,null,null,null)),mk=fk.exports,hk={name:"TableWithPagination",components:{CrmTable:mk,Pagination:Q_},mixins:[A_],inheritAttrs:!1,props:{items:{type:Array,default:function(){return[]}}},data:function(){return{page:1,itemsNum:this.items.length||0}},computed:Object(De["a"])(Object(De["a"])({},Object(Vn["e"])(["tablePerPage"])),{},{count:function(){return Math.ceil(this.itemsNum/this.tablePerPage)}})},vk=hk,gk=Object(M["a"])(vk,$_,T_,!1,null,null,null),bk=gk.exports,_k={name:"Goods",components:{TableWithPagination:bk},data:function(){return{headers:[{key:"name",label:"Наименование товара",width:300},{key:"quantity",label:"Кол-во",width:65},{key:"price",label:"Цена без скидки",width:95},{key:"priceWithSale",label:"С учетом скидки",width:95}]}},computed:Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("request",["currentRequestData"])),{},{totalSumWithoutSale:function(){var t=this.currentRequestData.goods.reduce((function(t,e){return t+e.price*e.quantity}),0);return ym(t)},totalSumWithSale:function(){var t=this.currentRequestData.goods.reduce((function(t,e){return t+e.price*e.quantity}),0);return ym(t)}}),methods:{setFormattedValue:function(t){return ym(t)}}},kk=_k,yk=(n("c824"),Object(M["a"])(kk,E_,R_,!1,null,"55ea429d",null)),wk=yk.exports,Ok=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"request-documents"},[t.isStatusApproved?n("docs-create-agreement"):t._e(),t.isStatusAgreementCreatedPaperless?n("docs-upload-view"):t._e(),t.isStatusAgreementCreatedPaperTech?n("docs-paper-sign"):t._e(),t.isStatusCheckingDoc||t.isStatusAgreementCreatedPaperlessEs?n("success-view"):t._e(),t.isStatusErrorSigning?n("error-signing-view"):t._e(),t.isStatusAgreementSigned?n("docs-agreement-signed"):t._e(),t.isStatusAgreementAuthorized?n("docs-agreement-authed"):t._e()],1)},Ck=[],xk=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"docs-upload"},[n("div",{staticClass:"stages"},[n("div",{staticClass:"stage"},[n("div",{staticClass:"stage-number"},[t._v(" 1. ")]),n("div",{staticClass:"stage-text"},[n("span",{staticClass:"title"},[t._v("Распечатайте документ")]),t.eSignBankDocUrl?n("link-print",{staticClass:"sign-bank",attrs:{href:t.eSignBankDocUrl}},[t._v(" Соглашение об ЭП Банка ")]):t._e(),t.eSignMfoDocUrl?n("link-print",{attrs:{href:t.eSignMfoDocUrl}},[t._v(" Соглашение об ЭП МФК ")]):t._e()],1)]),n("div",{staticClass:"stage"},[n("div",{staticClass:"stage-number"},[t._v(" 2. ")]),n("div",{staticClass:"stage-text"},[n("span",{staticClass:"title"},[t._v("Загрузите необходимые документы:")]),t.allDocsAreReady?t._e():n("span",{staticClass:"stage-counter"},[t._v(" / осталось загрузить "+t._s(t.correctString)+" / ")])]),n("span",{staticClass:"stage-description"},[t._v(" в формате JPG / PNG / PDF до 62 MB ")])]),n("documents-uploader"),t.uploadDocsError?n("p",{staticClass:"upload-error"},[t._v(" "+t._s(t.uploadDocsError)+" ")]):t._e(),t.isSendingDocs?n("otp-loading"):[t.allDocsAreReady?n("div",{staticClass:"stage _success"},[n("div",{staticClass:"stage-number"},[t._v(" 3. ")]),n("div",{staticClass:"stage-text"},[n("span",{staticClass:"title"},[t._v("Отправьте документы в Банк на проверку")]),n("crm-button",{on:{click:t.sendDocuments}},[t._v(" Отправить ")])],1)]):t._e(),n("div",{staticClass:"paper-agreement-container"},[t.isCreatingPaperAgreement?n("otp-loading"):n("div",{staticClass:"link-gray-text",on:{click:t.rejectPaperless}},[n("alarm"),n("div",[n("span",[t._v("Клиент отказался от подписания Соглашения об ЭП")]),t._v(" переход к подписанию бумажных документов ")])],1),t.errorMessage?n("div",{staticClass:"error"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()],1)]],2),n("docs-download-view")],1)},Sk=[],Pk=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"documents-uploader",class:t.classes},[n("div",{staticClass:"files-block"},[t._l(t.sortedReadyDocs,(function(t){return n("file-block",{key:t.type,attrs:{document:t}})})),t.clientWithPassportDoc.file?t._e():n("file-block",{attrs:{document:t.clientWithPassportDoc}}),t.showEsBank?n("file-block",{attrs:{document:t.esBankDoc}}):t._e(),t.showEsMfk?n("file-block",{attrs:{document:t.esMfkDoc}}):t._e()],2),t.hasDocsWithSignature?n("div",{staticClass:"signature-block"},[n("div",{staticClass:"signature-block__files"},[t.passportInfoDoc.file?t._e():n("file-block",{attrs:{document:t.passportInfoDoc}}),t.passportRegistrationDoc.file?t._e():n("file-block",{attrs:{document:t.passportRegistrationDoc}})],1),t._m(0)]):t._e()])},jk=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signature-block__info"},[n("span",{staticClass:"signature-block__info-title"},[t._v(" Сотрудник должен оставить на копиях заверительную подпись в формате: ")]),n("span",{staticClass:"signature-block__info-description"},[n("p",[t._v("Копия верна.")]),n("p",[t._v("Фамилия Имя Отчество")]),n("span",[t._v("ДД.ММ.ГГГГ")]),n("span",[t._v("Подпись")])])])}],Ek=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"file-block",class:t.classes},[t.isEmpty?n("label",{staticClass:"file-block__area",class:{dragover:t.dragOver},on:{dragover:function(e){e.preventDefault(),t.dragOver=!0},dragenter:function(e){e.preventDefault(),t.dragOver=!0},dragleave:function(e){e.preventDefault(),t.dragOver=!1},drop:function(e){return e.preventDefault(),t.onDrop(e)}}},[n("input",{staticClass:"file-block__input",attrs:{accept:"image/*, application/pdf, application/msword",type:"file",name:"foo"},on:{change:function(e){return t.onFileChange(e)}}}),n("span",{staticClass:"file-block__upload-box"},[n("plus"),n("span",[t._v("выберите")]),t._v(" или перетащите файл ")],1)]):t._e(),t.isEmpty?t._e():n("div",{staticClass:"file-block__preview-img",style:t.previewStyle},[n("div",{staticClass:"file-block__overlay"},[n("div",{staticClass:"file-block__image-view",on:{click:t.onEyeClick}},[n("eye")],1),n("div",{staticClass:"file-block__remove",on:{click:t.removeFile}},[n("trash")],1)])]),n("div",{staticClass:"file-block__title"},[n("div",{staticClass:"file-block__label"},[t._v(" "+t._s(t.document.label)+" "),t.isEmpty?n("div",{staticClass:"file-block__icon"},[n("tooltip",{attrs:{placement:"right-end",theme:"crm-default",offset:"15, 0","max-width":t.tooltipSize},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("info-circle",{attrs:{width:"16",height:"16"}})]},proxy:!0},{key:"content",fn:function(){return[n("div",{staticClass:"tooltip-image"},[n("img",{attrs:{src:t.tooltipImage,alt:"tooltip image"}})])]},proxy:!0}],null,!1,3298607709)})],1):t._e()]),n("div",{staticClass:"file-block__name"},[t._v(" "+t._s(t.shortDocumentName)+" ")])])])},Rk=[],$k=(n("2b3d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"19",height:"16",viewBox:"0 0 19 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M2.61719 8.25H17.1466",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M10.1604 1.5V14.5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])}),Tk=[],Ak={name:"Plus"},Ik=Ak,Dk=Object(M["a"])(Ik,$k,Tk,!1,null,"ec015d6a",null),zk=Dk.exports,Nk=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M14.8611 17.5H5.13889V17.5C4.37183 17.5 3.75 16.8844 3.75 16.125L3.75 3.75L16.25 3.75V16.125C16.25 16.8844 15.6282 17.5 14.8611 17.5V17.5Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M8.125 12.5V7.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M11.875 12.5V7.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M1.25 3.75L18.75 3.75",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M12.2917 1.25L8.22917 1.25V1.25C7.48128 1.25 6.875 1.80964 6.875 2.5V2.5V3.75L13.6458 3.75V2.5V2.5C13.6458 1.80964 13.0396 1.25 12.2917 1.25V1.25V1.25Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},Mk=[],Lk={name:"Trash"},Bk=Lk,Fk=Object(M["a"])(Bk,Nk,Mk,!1,null,"0115053c",null),qk=Fk.exports,Uk=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.99747 5.00089C6.71292 4.95052 3.31591 7.03728 1.18026 9.17441C0.715956 9.64302 0.715956 10.3548 1.18026 10.8234C3.26947 12.9153 6.65669 15.0502 9.99747 14.9991C13.3383 15.0502 16.7263 12.9153 18.8171 10.8234C19.2814 10.3548 19.2814 9.64302 18.8171 9.17441C16.679 7.03728 13.282 4.95052 9.99747 5.00089Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5 10.0007C12.4996 11.3813 11.3802 12.5002 9.99956 12.5C8.61893 12.4998 7.49988 11.3804 7.5 9.99978C7.50012 8.61915 8.61937 7.5 10 7.5C10.6632 7.49982 11.2993 7.76325 11.7682 8.23227C12.2371 8.7013 12.5004 9.33746 12.5 10.0007V10.0007Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},Gk=[],Vk={name:"Eye"},Hk=Vk,Wk=Object(M["a"])(Hk,Uk,Gk,!1,null,"016c66f8",null),Kk=Wk.exports,Yk=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"otp-info-icon"},[n("svg",{attrs:{width:t.width,height:t.height,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M8.99992 6.33301C9.46016 6.33301 9.83325 5.95991 9.83325 5.49967C9.83325 5.03944 9.46016 4.66634 8.99992 4.66634C8.53968 4.66634 8.16659 5.03944 8.16659 5.49967C8.16659 5.95991 8.53968 6.33301 8.99992 6.33301Z",fill:"#C5C5C5"}}),n("path",{attrs:{d:"M9 8L9 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}}),n("path",{attrs:{d:"M3.81447 14.1851C0.950624 11.3213 0.950625 6.67807 3.81447 3.81422C6.67832 0.950379 11.3215 0.950379 14.1854 3.81423C17.0492 6.67807 17.0492 11.3213 14.1854 14.1851C11.3215 17.049 6.67832 17.049 3.81447 14.1851",stroke:"currentColor","stroke-width":"2"}})])])},Zk=[],Qk={name:"InfoCircle",props:{width:{type:String,default:""},height:{type:String,default:""}}},Jk=Qk,Xk=Object(M["a"])(Jk,Yk,Zk,!1,null,"6df5f4ae",null),ty=Xk.exports,ey=n("5730"),ny=n.n(ey),ry=n("84af"),ay=n.n(ry),oy=n("ef2d"),sy=n.n(oy),iy=n("972e"),cy=n.n(iy),ly=n("fa4d"),uy=n.n(ly),dy=n("1883"),py=n.n(dy),fy=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tippy",t._b({staticClass:"crm-tooltip",attrs:{theme:t.theme},scopedSlots:t._u([{key:"trigger",fn:function(){return[t._t("trigger")]},proxy:!0}],null,!0)},"tippy",t.$attrs,!1),[t._t("content")],2)},my=[],hy={name:"Tooltip",inheritAttrs:!1,props:{theme:{type:String,default:""}}},vy=hy,gy=(n("0fb9"),Object(M["a"])(vy,fy,my,!1,null,null,null)),by=gy.exports,_y=["doc","docx"],ky={clientWithPassport:sy.a,esAgreement:cy.a,esAgreement2:cy.a,passportInfo:uy.a,passportRegistration:py.a};function yy(t){var e=URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=e,n.download=t.name,document.body.appendChild(n),n.click(),URL.revokeObjectURL(e),document.body.removeChild(n)}var wy={name:"FileBlock",components:{InfoCircle:ty,Plus:zk,Trash:qk,Eye:Kk,Tooltip:by},props:{document:{type:Object,required:!0}},data:function(){return{dragOver:!1}},computed:{classes:function(){return{"_for-document":this.isPdf||this.isDoc}},tooltipSize:function(){return"clientWithPassport"===this.document.type?"319px":"220px"},tooltipImage:function(){return ky[this.document.type]},previewStyle:function(){var t=this,e=function(){return t.isPdf?ny.a:t.isDoc?ay.a:t.preview};return{backgroundImage:"url(".concat(e(),")")}},shortDocumentName:function(){if(this.isEmpty)return"";var t=this.document.file.name;return t?t.length<=20?t:"".concat(t.slice(0,10),"...").concat(t.slice(-10)):""},isEmpty:function(){return!this.document.file},fileExt:function(){if(this.isEmpty)return"";var t=this.document.file.name,e=t.lastIndexOf(".");return t.substring(e+1).toLowerCase()},isPdf:function(){return"pdf"===this.fileExt},isDoc:function(){return _y.includes(this.fileExt)},preview:function(){return this.isEmpty?null:URL.createObjectURL(this.document.file)}},methods:{onFileChange:function(t){this.uploadFile(t.target.files[0])},uploadFile:function(t){var e={type:this.document.type,file:t,readyTimestamp:Date.now()};this.$store.commit("file/uploadDocumentFile",e)},removeFile:function(){this.$store.commit("file/removeDocumentFile",this.document.type)},onEyeClick:function(){yy(this.document.file)},onDrop:function(t){this.dragOver=!1,this.uploadFile(t.dataTransfer.files[0])}}},Oy=wy,Cy=(n("aec8"),Object(M["a"])(Oy,Ek,Rk,!1,null,"2550f8d4",null)),xy=Cy.exports,Sy={name:"DocumentsUploader",components:{FileBlock:xy},inheritAttrs:!1,computed:Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("file",["documents"])),Object(Vn["c"])("file",["readyDocs","allDocsAreReady","clientWithPassportDoc","esBankDoc","esMfkDoc","passportInfoDoc","passportRegistrationDoc"])),Object(Vn["c"])("agreement",["eSignBankDocUrl","eSignMfoDocUrl"])),{},{sortedReadyDocs:function(){return this.readyDocs.slice().sort((function(t,e){return e.readyTimestamp-t.readyTimestamp}))},hasDocsWithSignature:function(){return!this.passportInfoDoc.file||!this.passportRegistrationDoc.file},showEsBank:function(){var t=!!this.eSignBankDocUrl,e=!!this.esBankDoc.file;return t&&!e},showEsMfk:function(){var t=!!this.eSignMfoDocUrl,e=!!this.esMfkDoc.file;return t&&!e},classes:function(){return{_uploaded:this.allDocsAreReady}}})},Py=Sy,jy=(n("4c00"),Object(M["a"])(Py,Pk,jk,!1,null,null,null)),Ey=jy.exports,Ry=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.00003 4.10327V11.5478C3.00007 16.3646 5.80062 20.684 10.0449 22.4134L11.0058 22.8045C11.6458 23.0652 12.3542 23.0652 12.9942 22.8045L13.9551 22.4134C18.1994 20.684 20.9999 16.3646 21 11.5478V4.10327C21.0036 3.53105 20.69 3.00979 20.1987 2.7716C17.614 1.57659 14.8201 0.973204 12 1.00091C9.17988 0.973204 6.38602 1.57659 3.80126 2.7716C3.31004 3.00979 2.99642 3.53105 3.00003 4.10327Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M11.9994 15C12.2019 15 12.3661 15.1641 12.3661 15.3666C12.3661 15.5691 12.2019 15.7333 11.9994 15.7333C11.797 15.7333 11.6328 15.5691 11.6328 15.3666C11.6328 15.1641 11.797 15 11.9994 15",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M12 12V7",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},$y=[],Ty={name:"Alarm"},Ay=Ty,Iy=Object(M["a"])(Ay,Ry,$y,!1,null,"01b97c6c",null),Dy=Iy.exports,zy=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("link-external",{class:t.$style.root,attrs:{href:t.href,type:"green"}},[n("print"),n("span",{class:t.$style.text},[t._t("default")],2)],1)},Ny=[],My=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M5.4 17H2.46667C1.65665 17 1 16.3604 1 15.5714V8.42857C1 7.63959 1.65665 7 2.46667 7H21.5333C22.3434 7 23 7.63959 23 8.42857V15.5714C23 16.3604 22.3434 17 21.5333 17H18.6",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M4 10H5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6 13H18V23H6V13Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 7H5V2.5C5 1.67157 5.69645 1 6.55556 1H17.4444C18.3036 1 19 1.67157 19 2.5V7Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M9 16H15",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M9 19H12",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},Ly=[],By={name:"Print"},Fy=By,qy=Object(M["a"])(Fy,My,Ly,!1,null,"3ee38f31",null),Uy=qy.exports,Gy=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"link-external",class:t.classes},[t._t("default")],2)},Vy=[],Hy={name:"LinkExternal",props:{type:{type:String,default:"black"},disabled:{type:Boolean,default:!1}},computed:{classes:function(){return{green:"green"===this.type,black:"black"===this.type,disabled:this.disabled}}}},Wy=Hy,Ky=(n("36f8"),Object(M["a"])(Wy,Gy,Vy,!1,null,"4463c73e",null)),Yy=Ky.exports,Zy={name:"LinkPrint",components:{LinkExternal:Yy,Print:Uy},props:{href:{type:[String,void 0],default:void 0}}},Qy=Zy,Jy=n("7911");function Xy(t){this["$style"]=Jy["default"].locals||Jy["default"]}var tw=Object(M["a"])(Qy,zy,Ny,!1,Xy,null,null),ew=tw.exports,nw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"client-documents"},[n("expansion-panel",{attrs:{"is-documents":"",expanded:!0,title:"Документы по запросу клиента"}},[n("div",{staticClass:"links"},[t.specificationDocUrl?n("div",{staticClass:"link-wrap"},[n("link-print",{attrs:{href:t.specificationDocUrl}},[t._v(" Спецификация ")])],1):t._e(),n("div",{staticClass:"link-wrap"},[n("link-print",{attrs:{href:t.paymentReminderDocUrl}},[t._v(" Памятка по оплате кредита ")])],1),n("div",{staticClass:"link-wrap"},[n("link-print",{attrs:{href:t.paymentScheduleDocUrl}},[t._v(" График платежей ")])],1),n("div",{staticClass:"link-wrap"},[n("span",{on:{click:t.onCreditAgreementClick}},[n("link-print",{attrs:{href:"javascript:void(0);"}},[t._v(" Кредитный договор полностью ")])],1)])])])],1)},rw=[],aw={name:"DocsDownloadView",components:{LinkPrint:ew,ExpansionPanel:Vl},computed:Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("agreement",["currentAgreement"])),Object(Vn["c"])("agreement",["paymentScheduleDocUrl","paymentReminderDocUrl","specificationDocUrl"])),methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("agreement",["downloadFullCreditAgreement"])),{},{onCreditAgreementClick:function(){this.downloadFullCreditAgreement()}})},ow=aw,sw=(n("5155"),Object(M["a"])(ow,nw,rw,!1,null,"00509c78",null)),iw=sw.exports,cw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.loader})},lw=[],uw={name:"OtpLoading"},dw=uw,pw=n("3bb5");function fw(t){this["$style"]=pw["default"].locals||pw["default"]}var mw=Object(M["a"])(dw,cw,lw,!1,fw,null,null),hw=mw.exports,vw={name:"DocsUploadView",components:{OtpLoading:hw,DocsDownloadView:iw,LinkPrint:ew,Alarm:Dy,DocumentsUploader:Ey,CrmButton:ie},data:function(){return{isSendingDocs:!1,isCreatingPaperAgreement:!1}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("file",["documents","uploadDocsError"])),Object(Vn["e"])("request",["currentRequestState"])),Object(Vn["e"])("agreement",["errorMessage"])),Object(Vn["c"])("file",["readyDocs","allDocsAreReady","totalDocsToUploadCount"])),Object(Vn["c"])("agreement",["eSignBankDocUrl","eSignMfoDocUrl"])),{},{correctString:function(){var t=["документ","документа","документов"];return"".concat(this.leftToUpload," ").concat(qa(this.leftToUpload,t))},leftToUpload:function(){return this.totalDocsToUploadCount-this.readyDocs.length},uuid:function(){var t;return null===(t=this.currentRequestState)||void 0===t?void 0:t.uuid}}),methods:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("file",["uploadFiles"])),Object(Vn["b"])("agreement",["createAgreement"])),{},{sendDocuments:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isSendingDocs=!0,e.next=3,t.uploadFiles(t.uuid);case 3:t.isSendingDocs=!1;case 4:case"end":return e.stop()}}),e)})))()},rejectPaperless:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isCreatingPaperAgreement=!0,e.next=3,t.createAgreement({uuid:t.currentRequestState.uuid,paperTech:!0});case 3:t.isCreatingPaperAgreement=!1;case 4:case"end":return e.stop()}}),e)})))()}})},gw=vw,bw=(n("d3e6"),Object(M["a"])(gw,xk,Sk,!1,null,"51d2e09e",null)),_w=bw.exports,kw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[n("otp-button",{attrs:{disabled:t.isDisabled},on:{click:t.onCreateDocs}},[t._v(" Сформировать документы ")])],1),n("p",[t.isLoading?n("otp-loading"):t._e()],1),t.errorMessage?n("p",{class:t.$style.error},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()])},yw=[],ww={name:"DocsCreateAgreement",components:{OtpLoading:hw,OtpButton:ie},data:function(){return{isLoading:!1,error:""}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("request",["currentRequestState"])),Object(Vn["e"])("agreement",["errorMessage"])),{},{uuid:function(){var t;return null===(t=this.currentRequestState)||void 0===t?void 0:t.uuid},isDisabled:function(){return this.isLoading||!this.uuid}}),methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("agreement",["createAgreement"])),{},{onCreateDocs:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.createAgreement({uuid:t.uuid});case 3:t.isLoading=!1;case 4:case"end":return e.stop()}}),e)})))()}})},Ow=ww,Cw=n("ea92");function xw(t){this["$style"]=Cw["default"].locals||Cw["default"]}var Sw=Object(M["a"])(Ow,kw,yw,!1,xw,null,null),Pw=Sw.exports,jw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"formed-view"},[n("ul",{staticClass:"formed-view__list"},[n("li",{staticClass:"formed-view__item"},[n("div",{staticClass:"formed-view__number"},[t._v(" 1. ")]),n("div",{staticClass:"formed-view__text"},[n("span",[t._v("Распечатайте документ")]),n("span",{on:{click:t.onCreditAgreementClick}},[n("link-print",{attrs:{href:"javascript:void(0);"}},[t._v(" Кредитный договор ")])],1)])]),t._m(0),t._m(1)]),n("div",{staticClass:"formed-view__btn-container"},[n("crm-button",{attrs:{disabled:t.isLoading},on:{click:t.updateStatus}},[t._v(" Клиент подписал договор ")]),t.isLoading?n("p",[n("otp-loading")],1):t._e(),t.errorMessage?n("p",{staticClass:"error"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()],1)])},Ew=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"formed-view__item"},[n("div",{staticClass:"formed-view__number"},[t._v(" 2. ")]),n("div",{staticClass:"formed-view__text"},[t._v(" Вручите клиенту договор для ознакомления и подписания. ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"formed-view__item"},[n("div",{staticClass:"formed-view__number"},[t._v(" 3. ")]),n("div",{staticClass:"formed-view__text"},[t._v(" Подтвердите наличие всех подписей в договоре ")])])}],Rw={name:"FormedView",components:{OtpLoading:hw,LinkPrint:ew,CrmButton:ie},data:function(){return{isLoading:!1}},computed:Object(De["a"])({},Object(Vn["e"])("agreement",["errorMessage"])),methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("agreement",["downloadFullCreditAgreement","authAgreement"])),{},{updateStatus:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,t.authAgreement();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),console.log(e.t0);case 9:return e.prev=9,t.isLoading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})))()},onCreditAgreementClick:function(){this.downloadFullCreditAgreement()}})},$w=Rw,Tw=(n("003d"),Object(M["a"])($w,jw,Ew,!1,null,"b3bf0c7a",null)),Aw=Tw.exports,Iw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"error-signing"},[t._m(0),n("div",{staticClass:"error-signing__list"},[t._m(1),n("div",{staticClass:"error-signing__btn-container"},[n("crm-button",{on:{click:t.onSmsSend}},[t._v(" Отправить клиенту СМС повторно ")])],1),n("div",{staticClass:"error-signing__devider"},[t._v(" Или ")]),t._m(2),n("div",{staticClass:"error-signing__btn-container"},[n("crm-button",{on:{click:t.onPaperSwitch}},[t._v(" Перейти к бумажному подписанию ")])],1)])])},Dw=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"error-signing__message"},[t._v(" Возникла ошибка."),n("br"),t._v(" Свяжитесь с клиентом для уточнения причины проблемы. ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"error-signing__item"},[n("div",{staticClass:"error-signing__mark"},[t._v(" А ")]),n("div",{staticClass:"error-signing__text"},[t._v(" Если клиент 3 раза ввел неправильную СМС ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"error-signing__item"},[n("div",{staticClass:"error-signing__mark"},[t._v(" Б ")]),n("div",{staticClass:"error-signing__text"},[t._v(" Если ошибка повторилась предложите клиенту подписать "),n("br"),t._v(" бумажный договор курьером/ в точке продажи ")])])}],zw={name:"ErrorSigningView",components:{CrmButton:ie},computed:Object(De["a"])({},Object(Vn["e"])("request",["currentRequestState"])),methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("agreement",["createAgreement"])),{},{onSmsSend:function(){},onPaperSwitch:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.createAgreement({uuid:t.currentRequestState.uuid,paperTech:!0});case 2:case"end":return e.stop()}}),e)})))()}})},Nw=zw,Mw=(n("9a5b"),Object(M["a"])(Nw,Iw,Dw,!1,null,"1ced8bc0",null)),Lw=Mw.exports,Bw=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"success-view"},[r("div",{staticClass:"success-view__image"},[r("img",{attrs:{src:n("f955"),alt:"Success"}})]),t._m(0)]),r("docs-download-view")],1)},Fw=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"success-view__text"},[t._v(" Документы успешно отправлены,"),n("br"),t._v(" ожидаем проверки документов ")])}],qw={name:"SuccessView",components:{DocsDownloadView:iw}},Uw=qw,Gw=(n("1ce6"),Object(M["a"])(Uw,Bw,Fw,!1,null,"44011d34",null)),Vw=Gw.exports,Hw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[n("otp-button",{attrs:{disabled:t.isDisabled},on:{click:t.onAuthAgreement}},[t._v(" Авторизовать договор ")])],1),n("p",[t.isLoading?n("otp-loading"):t._e()],1),t.errorMessage?n("p",{class:t.$style.error},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e(),n("docs-download-view")],1)},Ww=[],Kw={name:"DocsAgreementSigned",components:{DocsDownloadView:iw,OtpLoading:hw,OtpButton:ie},data:function(){return{isLoading:!1}},computed:Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("agreement",["errorMessage"])),{},{isDisabled:function(){return this.isLoading}}),methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("agreement",["authAgreement"])),{},{onAuthAgreement:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.authAgreement();case 3:t.isLoading=!1;case 4:case"end":return e.stop()}}),e)})))()}})},Yw=Kw,Zw=n("b2b8");function Qw(t){this["$style"]=Zw["default"].locals||Zw["default"]}var Jw=Object(M["a"])(Yw,Hw,Ww,!1,Qw,null,null),Xw=Jw.exports,tO=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("docs-download-view")},eO=[],nO={name:"DocsAgreementAuthed",components:{DocsDownloadView:iw}},rO=nO,aO=Object(M["a"])(rO,tO,eO,!1,null,null,null),oO=aO.exports,sO={name:"Documents",components:{DocsAgreementAuthed:oO,DocsAgreementSigned:Xw,DocsCreateAgreement:Pw,DocsUploadView:_w,ErrorSigningView:Lw,DocsPaperSign:Aw,SuccessView:Vw},computed:Object(De["a"])({},Object(Vn["c"])("request",["currentRequestStatus","isStatusApproved","isStatusErrorSigning","isStatusCheckingDoc","isStatusAgreementSigned","isStatusAgreementAuthorized","isStatusAgreementCreatedPaperless","isStatusAgreementCreatedPaperlessEs","isStatusAgreementCreatedPaperTech"]))},iO=sO,cO=Object(M["a"])(iO,Ok,Ck,!1,null,null,null),lO=cO.exports,uO=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[t.cancelType?n("cancel-request-modal",{attrs:{type:t.cancelType},on:{close:function(e){t.cancelType=""}}}):t._e(),t.hasCancelRequest?n("div",{class:t.$style.cancel,on:{click:t.onCancelRequest}},[t._v(" отменить заявку ")]):t._e(),t.hasCancelAuth?n("div",{class:t.$style.cancel,on:{click:t.onCancelAuth}},[t._v(" отменить авторизацию ")]):t._e()],1)},dO=[],pO=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"modal"}},[n("modal",{attrs:{size:"md"},on:{close:t.onClose},scopedSlots:t._u([{key:"title",fn:function(){return[t.isRequest?n("span",[t._v("Выберите причину отмены заявки")]):t._e(),t.isAuth?n("span",[t._v("Выберите причину отмены авторизации")]):t._e()]},proxy:!0},{key:"default",fn:function(){return[t._l(t.options,(function(e){return n("radio",{key:e.code,attrs:{name:"reject-reasons",value:e.code,selected:e.code===t.selectedOptionValue},on:{change:function(e){return t.selectedOptionValue=e}}},[t._v(" "+t._s(e.name)+" ")])})),t.errorMessage?n("p",{class:t.$style.error},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()]},proxy:!0},{key:"buttons",fn:function(){return[t.isConfirming?n("otp-loading",{class:t.$style.loading}):t._e(),n("otp-button",{attrs:{disabled:!t.selectedOptionValue||t.isConfirming},on:{click:t.onConfirm}},[t._v(" Подтвердить отмену ")]),n("otp-button",{attrs:{design:"text"},on:{click:t.onClose}},[t._v(" Не отменять ")])]},proxy:!0}])})],1)},fO=[],mO=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"otp-modal",class:["_size-"+t.size]},[r("div",{staticClass:"otp-modal__content"},[r("div",{staticClass:"otp-modal__inner"},[r("div",{staticClass:"otp-modal__header"},[r("h1",{staticClass:"otp-modal__title"},[t._t("title",[t._v(" "+t._s(t.title)+" ")])],2),r("img",{staticClass:"otp-modal__close",attrs:{src:n("2ad7"),alt:"modal-close",width:"24",height:"24"},on:{click:function(e){return t.$emit("close")}}})]),r("div",{staticClass:"otp-modal__body"},[t._t("default")],2),r("div",{staticClass:"otp-modal__buttons"},[t._t("buttons"),t.$slots["cancel-button"]?r("div",{staticClass:"otp-modal__cancel-button"},[t._t("cancel-button")],2):t._e()],2)])])])},hO=[],vO={name:"Modal",props:{title:{type:String,default:""},size:{type:String,default:"sm",validator:function(t){return["sm","md","lg","xl"].includes(t)}}}},gO=vO,bO=(n("30db"),Object(M["a"])(gO,mO,hO,!1,null,null,null)),_O=bO.exports,kO=[{code:"REASON_13",name:"Товар отсутствует"},{code:"REASON_07",name:"Клиент передумал"},{code:"REASON_14",name:"Клиент не прошел визуальную оценку"},{code:"REASON_12",name:"Заявка оформлена не на тот продукт"},{code:"REASON_04",name:"Ошибка в документах"},{code:"REASON_13",name:"Техническая ошибка"}],yO=[{code:"REASON_01",name:"Товар отсутствует"},{code:"REASON_03",name:"Клиент передумал брать товар"},{code:"REASON_04",name:"Клиент передумал оформлять кредит"},{code:"REASON_02",name:"Ошибка в документах"}],wO={name:"CancelRequestModal",components:{OtpLoading:hw,OtpButton:ie,Modal:_O,Radio:so},props:{type:{type:String,required:!0,validator:function(t){return["request","auth"].includes(t)}}},data:function(){return{selectedOptionValue:"",options:this.isRequest?kO:yO,errorMessage:"",isConfirming:!1}},computed:Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("request",["currentRequestState"])),{},{isRequest:function(){return"request"===this.type},isAuth:function(){return"auth"===this.type}}),methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("request",["fetchRequestStateById"])),{},{onConfirm:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o,s,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.selectedOptionValue,t.errorMessage="",t.isConfirming=!0,o=null===(n=t.currentRequestState)||void 0===n?void 0:n.uuid,s=null===(r=t.currentRequestState)||void 0===r?void 0:r.optyId,!t.isRequest){e.next=20;break}return e.prev=6,e.next=9,C_.rejectRequest({uuid:o,optyId:s,reasonCode:a});case 9:return e.next=11,t.fetchRequestStateById(o);case 11:t.onClose(),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](6),t.errorMessage=e.t0.message;case 17:return e.prev=17,t.isConfirming=!1,e.finish(17);case 20:if(!t.isAuth){e.next=36;break}return c=null===(i=t.currentRequestState)||void 0===i?void 0:i.agreementNumber,e.prev=22,e.next=25,C_.rejectAgreementAuth({agreementNumber:c,authCode:null,reasonCode:a});case 25:return e.next=27,t.fetchRequestStateById(o);case 27:t.onClose(),e.next=33;break;case 30:e.prev=30,e.t1=e["catch"](22),t.errorMessage=e.t1.message;case 33:return e.prev=33,t.isConfirming=!1,e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[6,14,17,20],[22,30,33,36]])})))()},onClose:function(){this.$emit("close")}})},OO=wO,CO=n("5a81");function xO(t){this["$style"]=CO["default"].locals||CO["default"]}var SO=Object(M["a"])(OO,pO,fO,!1,xO,null,null),PO=SO.exports,jO={name:"CancelRequest",components:{CancelRequestModal:PO},props:{status:{type:String,required:!0}},data:function(){return{cancelType:""}},computed:{hasCancelRequest:function(){var t=[ua.OPTY_CREATED,ua.DECISION_APPROVAL,ua.AGREEMENT_SIGNED,ua.AGREEMENT_CREATED_PAPERLESS,ua.AGREEMENT_CREATED_PAPERLESS_ES,ua.AGREEMENT_CREATED_PAPER_TECH,ua.AGREEMENT_DOCS_SENT,ua.AGREEMENT_SIGN_FAILED];return t.includes(this.status)},hasCancelAuth:function(){return this.status===ua.AGREEMENT_AUTHORIZED}},methods:{onCancelRequest:function(){this.cancelType="request"},onCancelAuth:function(){this.cancelType="auth"}}},EO=jO,RO=n("b220");function $O(t){this["$style"]=RO["default"].locals||RO["default"]}var TO=Object(M["a"])(EO,uO,dO,!1,$O,null,null),AO=TO.exports,IO=[{title:"Заявка",value:"request-info"},{title:"Документы",value:"documents"},{title:"Товары",value:"goods"},{title:"История",value:"request-history"}],DO={name:"Request",components:{RequestCardContent:bb,StatusBadge:$g,StatusInfo:ub,Tabs:ci,PageWrapper:ir,Breadcrumbs:vi,CopyableElement:Hc,RequestInfo:Sb,Goods:wk,RequestHistory:j_,Documents:lO,CancelRequest:AO},data:function(){return{isLoading:!1,currentTab:"request-info",tabs:IO}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("request",["requestStates","currentRequestState"])),Object(Vn["c"])("request",["currentRequestStatus","isStatusApproved"])),{},{requestUuid:function(){return this.$route.params.id},currentTabs:function(){var t=[ua.OPTY_CREATED,ua.ARCHIVE];return t.includes(this.currentRequestStatus)?this.tabs.filter((function(t){return"documents"!==t.value})):this.tabs},optyId:function(){var t,e;return null!==(t=null===(e=this.currentRequestState)||void 0===e?void 0:e.optyId)&&void 0!==t?t:"-"},status:function(){var t,e;return null!==(t=null===(e=this.currentRequestState)||void 0===e?void 0:e.status)&&void 0!==t?t:"-"},statusDescription:function(){var t,e;return null!==(t=null===(e=this.currentRequestState)||void 0===e?void 0:e.statusDescription)&&void 0!==t?t:"-"}}),created:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.resetAgreementState(),t.resetFileState(),e.prev=3,e.next=6,Promise.all([t.fetchRequestDataById(t.requestUuid),t.fetchRequestStateById(t.requestUuid)]);case 6:if(t.isStatusApproved){e.next=9;break}return e.next=9,t.fetchAgreementById(t.requestUuid);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),console.log(e.t0);case 14:t.isLoading=!1;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))()},methods:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("request",["fetchRequestStates","fetchRequestStateById","fetchRequestDataById"])),Object(Vn["b"])("agreement",["fetchAgreementById","resetAgreementState"])),Object(Vn["b"])("file",["resetFileState"]))},zO=DO,NO=Object(M["a"])(zO,Fg,qg,!1,null,null,null),MO=NO.exports,LO=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Сторибук")])],1)},BO=[],FO=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"storybook-page"},[n("storybook-menu"),n("div",{staticClass:"content-wrap"},[t._t("default")],2)],1)},qO=[],UO=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",[t._v("Базовые компоненты")]),n("ul",{staticClass:"list"},t._l(t.baseComponents,(function(e,r){return n("li",{key:r,staticClass:"li-item"},[n("crm-link",{attrs:{to:e.to}},[t._v(" "+t._s(e.title)+" ")])],1)})),0),n("h3",[t._v("Работа с документами")]),n("ul",{staticClass:"list"},t._l(t.documents,(function(e,r){return n("li",{key:r,staticClass:"li-item"},[n("crm-link",{attrs:{to:e.to}},[t._v(" "+t._s(e.title)+" ")])],1)})),0),n("h3",[t._v("User stories")]),n("ul",{staticClass:"list"},t._l(t.stories,(function(e,r){return n("li",{key:r,staticClass:"li-item"},[n("crm-link",{attrs:{to:e.to}},[t._v(" "+t._s(e.title)+" ")])],1)})),0)])},GO=[],VO={components:{CrmLink:Ds},data:function(){return{baseComponents:[{title:"Home",to:"/storybook"},{title:"Button",to:"/storybook/button"},{title:"FormInputNew",to:"/storybook/form-input-new"},{title:"FormItem",to:"/storybook/form-item"},{title:"Select",to:"/storybook/select"},{title:"Filter",to:"/storybook/filter"},{title:"Badge",to:"/storybook/badge"},{title:"Breadcrumbs",to:"/storybook/breadcrumbs"},{title:"CommercialNetSuggestions",to:"/storybook/commercial-net-suggestions"},{title:"CopyableElement",to:"/storybook/copyable-element"},{title:"Tooltip",to:"/storybook/tooltip"},{title:"SidePage",to:"/storybook/side-page"},{title:"Spinner",to:"/storybook/spinner"},{title:"Status",to:"/storybook/status"},{title:"Switcher",to:"/storybook/switcher"},{title:"Tabs",to:"/storybook/tabs"},{title:"Checkbox",to:"/storybook/checkbox"},{title:"Datepicker",to:"/storybook/datepicker"},{title:"RadioList",to:"/storybook/radiolist"},{title:"Link",to:"/storybook/link"},{title:"Pagination",to:"/storybook/pagination"},{title:"Таблица с серверной пагинацией",to:"/storybook/table"},{title:"Компонент истории",to:"/storybook/history"},{title:"Counter",to:"/storybook/counter"},{title:"Multiselect",to:"/storybook/multiselect"},{title:"StatusNotification",to:"/storybook/status-notification"},{title:"ExpansionPanel",to:"/storybook/expansion-panel"},{title:"Heading",to:"/storybook/heading"}],documents:[{title:"Документы: запустить формирование",to:"/storybook/docs-create-agreement"},{title:"Документы: загрузка",to:"/storybook/docs-upload"},{title:"Документы: скачивание",to:"/storybook/docs-download"},{title:"Документы успешно отправлены",to:"/storybook/docs-success"},{title:"Документы: ошибка подписания",to:"/storybook/docs-error-signing"},{title:"Документы: бумажное подписание",to:"/storybook/docs-formed"},{title:"StatusInfo",to:"/storybook/status-info"},{title:"FileBlock",to:"/storybook/file-block"}],stories:[{title:"Электронное подписание",to:"/storybook/docs-process"}]}}},HO=VO,WO=(n("14c4"),Object(M["a"])(HO,UO,GO,!1,null,"27744fcf",null)),KO=WO.exports,YO={components:{StorybookMenu:KO}},ZO=YO,QO=(n("68f6"),Object(M["a"])(ZO,FO,qO,!1,null,"f8a452d2",null)),JO=QO.exports,XO=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"storybook-title"},[t._t("default")],2)},tC=[],eC={},nC=eC,rC=(n("43ef"),Object(M["a"])(nC,XO,tC,!1,null,"6ad91e04",null)),aC=rC.exports,oC={components:{StorybookPage:JO,StorybookTitle:aC}},sC=oC,iC=Object(M["a"])(sC,LO,BO,!1,null,null,null),cC=iC.exports,lC=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Торговые организации с серверной пагинацией и фильтрацией")]),n("div",{staticClass:"filters"},[n("div",{staticClass:"filter-item-wrap search-wrap"},[n("form-input-new",{attrs:{type:"search",placeholder:"Поиск"},on:{input:t.onFilterNameChange},model:{value:t.filterName,callback:function(e){t.filterName=e},expression:"filterName"}})],1),n("div",{staticClass:"filter-item-wrap"},[n("commercial-net-suggestions",{attrs:{size:"sm"},on:{input:t.onFilterCommercialNetNameChange,select:t.onFilterCommercialNetNameSelect},model:{value:t.filterCommercialNetName,callback:function(e){t.filterCommercialNetName=e},expression:"filterCommercialNetName"}})],1)]),n("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,data:t.tableItems,fields:t.fields}}),n("pagination",{attrs:{"per-page":t.perPage,total:t.total,"current-page":t.currentPage},on:{onChangePage:t.onChangePage,onPerPageChange:t.onPerPageChange}})],1)},uC=[],dC={components:{StorybookTitle:aC,StorybookPage:JO,Vuetable:Vu.a,Pagination:Ps,FormInputNew:At,CommercialNetSuggestions:No},data:function(){return{fields:[{name:"name",sortField:"name",title:"Наименование ТО"},{name:"regCenter",sortField:"regCenter",title:"РЦ"},{name:"kko",sortField:"kko",label:"ККО"},{name:"code",sortField:"code",title:"Код ТО"},{name:"commercialNet",sortField:"commercialNet",title:"Торговая сеть"},{name:"curatorFio",sortField:"curatorFio",title:"Куратор"}],currentPage:1,perPage:5,total:0,tableItems:[],filterName:"",filterCommercialNetName:"",sortField:"",sortDirection:""}},computed:{lastPage:function(){return Math.ceil(this.total/this.perPage)}},created:function(){this.fetchData()},mounted:function(){var t=this;this.$unwatch=this.$watch("$refs.vuetable.sortOrder",(function(e){if(!e||!e[0])return t.sortField="",void(t.sortDirection="");t.sortField=e[0].field,t.sortDirection=e[0].direction,t.fetchData()}))},beforeDestroy:function(){this.$unwatch()},methods:{fetchData:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(De["a"])(Object(De["a"])(Object(De["a"])({page:t.currentPage,size:t.perPage},t.sortField&&{sort:t.sortField}),t.filterName&&{likename:t.filterName}),t.filterCommercialNetName&&{commercialnet:t.filterCommercialNetName}),e.next=3,qs.fetchOrganizations(!1,n);case 3:r=e.sent,t.tableItems=r.organizations,t.total=r.totalItems;case 6:case"end":return e.stop()}}),e)})))()},onFilterCommercialNetNameSelect:function(){this.fetchData()},onFilterCommercialNetNameChange:function(t){t||this.fetchData()},onFilterNameChange:function(){this.fetchData()},onChangePage:function(t){this.currentPage=t,this.fetchData()},onPerPageChange:function(t){this.perPage!==t&&(this.perPage=t,this.currentPage=1,this.fetchData())}}},pC=dC,fC=(n("fac1"),Object(M["a"])(pC,lC,uC,!1,null,"7d46ead2",null)),mC=fC.exports,hC=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("FormInputNew")]),n("component-view",{attrs:{title:"Default"}},[n("form-input-new",{attrs:{placeholder:"placeholder"}})],1),n("component-view",{attrs:{title:"Disabled"}},[n("form-input-new",{attrs:{disabled:""}})],1),n("component-view",{attrs:{title:"Type search"}},[n("form-input-new",{attrs:{type:"search"}})],1),n("component-view",{attrs:{title:"Type password"}},[n("form-input-new",{attrs:{type:"password"}})],1),n("component-view",{attrs:{title:"Readonly"}},[n("form-input-new",{attrs:{"read-only":"",value:"Readonly"}})],1),n("component-view",{attrs:{title:"Size sm"}},[n("form-input-new",{attrs:{size:"sm"}})],1),n("component-view",{attrs:{title:"Size md"}},[n("form-input-new",{attrs:{size:"md"}})],1),n("component-view",{attrs:{title:"Size lg"}},[n("form-input-new",{attrs:{size:"lg"}})],1),n("component-view",{attrs:{title:"Suffix"}},[n("form-input-new",{scopedSlots:t._u([{key:"suffix",fn:function(){return[t._v(" руб ")]},proxy:!0}])})],1),n("component-view",{attrs:{title:"Suffix with line"}},[n("form-input-new",{scopedSlots:t._u([{key:"suffix-with-line",fn:function(){return[t._v(" руб ")]},proxy:!0}])})],1),n("component-view",{attrs:{title:"Error"}},[n("form-input-new",{attrs:{error:""}})],1)],1)},vC=[],gC=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("h3",{staticClass:"title"},[t._v(" "+t._s(t.title)+" ")]),t._t("default")],2)},bC=[],_C={props:{title:{type:String,default:""}}},kC=_C,yC=(n("5531"),Object(M["a"])(kC,gC,bC,!1,null,"5234218a",null)),wC=yC.exports,OC={components:{StorybookTitle:aC,StorybookPage:JO,FormInputNew:At,ComponentView:wC}},CC=OC,xC=Object(M["a"])(CC,hC,vC,!1,null,null,null),SC=xC.exports,PC=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Select")]),n("component-view",{attrs:{title:"Выбор из выпадающего списка"}},[n("crm-select",{attrs:{value:t.selectedValue,options:t.options,placeholder:"placeholder"},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"С параметром filterable можно фильтровать с клавиатуры"}},[n("crm-select",{attrs:{value:t.selectedValue,options:t.options,filterable:""},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"Size sm"}},[n("crm-select",{attrs:{value:t.selectedValue,options:t.options,size:"sm"},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"Size md (default)"}},[n("crm-select",{attrs:{value:t.selectedValue,options:t.options,size:"md"},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"Size lg"}},[n("crm-select",{attrs:{value:t.selectedValue,options:t.options,size:"lg"},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"Disabled (TODO)"}},[n("crm-select",{attrs:{value:t.selectedValue,options:t.options,disabled:""},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"Error (TODO)"}},[n("crm-select",{attrs:{value:t.selectedValue,options:t.options,error:""},on:{select:function(e){return t.selectedValue=e}}})],1)],1)},jC=[],EC={components:{ComponentView:wC,StorybookTitle:aC,StorybookPage:JO,CrmSelect:Ja},data:function(){return{selectedValue:"",options:[{name:"Один",value:1},{name:"Два",value:2},{name:"Три",value:3}]}},methods:{}},RC=EC,$C=Object(M["a"])(RC,PC,jC,!1,null,null,null),TC=$C.exports,AC=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("FormItem")]),n("p",[t._v(" FormItem позволяет добавлять дополнительный текст к элементам формы. Кроме того, проставляются автоматические отступы между элементами формы. ")]),n("component-view",{attrs:{title:"Компонент с названием"}},[n("form-item",{attrs:{label:"Название"}},[n("form-input-new",{attrs:{placeholder:"Имя"}})],1)],1),n("component-view",{attrs:{title:"Компонент с ошибкой"}},[n("form-item",{attrs:{error:"Ошибка"}},[n("form-input-new",{attrs:{placeholder:"Имя",error:""}})],1)],1),n("component-view",{attrs:{title:"Компонент с описанием"}},[n("form-item",{attrs:{description:"Описание"}},[n("form-input-new",{attrs:{placeholder:"Имя"}})],1)],1),n("component-view",{attrs:{title:"Форма"}},[n("form-item",{attrs:{label:"Имя"}},[n("form-input-new",{attrs:{placeholder:"Имя"}})],1),n("form-item",{attrs:{label:"Телефон"}},[n("form-input-new",{attrs:{placeholder:"Телефон"}})],1)],1),n("component-view",{attrs:{title:"Форма с Inline view"}},[n("form-item",{attrs:{label:"Имя","inline-view":""}},[n("form-input-new",{attrs:{placeholder:"Имя"}})],1),n("form-item",{attrs:{label:"Телефон",description:"Введите телефон","inline-view":""}},[n("form-input-new",{attrs:{placeholder:"Телефон"}})],1)],1)],1)},IC=[],DC={components:{StorybookPage:JO,FormInputNew:At,StorybookTitle:aC,ComponentView:wC,FormItem:it}},zC=DC,NC=Object(M["a"])(zC,AC,IC,!1,null,null,null),MC=NC.exports,LC=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Filter")]),n("component-view",{attrs:{title:"По умолчанию доступен только выбор из выпадающего списка"}},[n("crm-filter",{attrs:{value:t.selectedValue,options:t.options,placeholder:"placeholder"},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"С параметром filterable можно фильтровать с клавиатуры"}},[n("crm-filter",{attrs:{value:t.selectedValue,options:t.options,filterable:""},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"Size sm"}},[n("crm-filter",{attrs:{value:t.selectedValue,options:t.options,size:"sm"},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"Size md (default)"}},[n("crm-filter",{attrs:{value:t.selectedValue,options:t.options,size:"md"},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"Size lg"}},[n("crm-filter",{attrs:{value:t.selectedValue,options:t.options,size:"lg"},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"Error (TODO)"}},[n("crm-filter",{attrs:{value:t.selectedValue,options:t.options,error:""},on:{select:function(e){return t.selectedValue=e}}})],1),n("component-view",{attrs:{title:"Disabled (TODO)"}},[n("crm-filter",{attrs:{value:t.selectedValue,options:t.options,disabled:""},on:{select:function(e){return t.selectedValue=e}}})],1)],1)},BC=[],FC={components:{StorybookPage:JO,StorybookTitle:aC,ComponentView:wC,CrmFilter:ts},data:function(){return{selectedValue:"",options:[{name:"Один",value:1},{name:"Два",value:2},{name:"Три",value:3}]}}},qC=FC,UC=Object(M["a"])(qC,LC,BC,!1,null,null,null),GC=UC.exports,VC=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Badge")]),n("p",[n("badge",[t._v("primary")])],1),n("p",[n("badge",{attrs:{variant:"success"}},[t._v(" success ")])],1),n("p",[n("badge",{attrs:{variant:"danger"}},[t._v(" danger ")])],1),n("p",[n("badge",{attrs:{variant:"purple"}},[t._v(" purple ")])],1),n("p",[n("badge",{attrs:{variant:"dark"}},[t._v(" dark ")])],1)],1)},HC=[],WC={components:{StorybookTitle:aC,StorybookPage:JO,Badge:ve}},KC=WC,YC=Object(M["a"])(KC,VC,HC,!1,null,null,null),ZC=YC.exports,QC=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Breadcrumbs")]),n("breadcrumbs"),n("p",[t._v(" TODO: рефакторинг компонента - явно передавать данные через пропсы ")])],1)},JC=[],XC={components:{Breadcrumbs:vi,StorybookTitle:aC,StorybookPage:JO}},tx=XC,ex=Object(M["a"])(tx,QC,JC,!1,null,null,null),nx=ex.exports,rx=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Подсказки при поиске коммерческих сетей")]),n("p",[t._v("Данные запрашиваются с сервера когда введено три или более символа.")]),n("p",[t._v("TODO: дебаунс, выбор с клавиатуры, более стабильная работа компонента.")]),n("commercial-net-suggestions",{attrs:{placeholder:"Наименование торговой сети"},model:{value:t.commercialNet,callback:function(e){t.commercialNet=e},expression:"commercialNet"}})],1)},ax=[],ox={components:{CommercialNetSuggestions:No,StorybookTitle:aC,StorybookPage:JO},data:function(){return{commercialNet:""}}},sx=ox,ix=Object(M["a"])(sx,rx,ax,!1,null,null,null),cx=ix.exports,lx=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("CopyableElement")]),n("p",[n("copyable-element",{attrs:{content:"123"}},[t._v(" Скопировать код 123 ")])],1),n("p",[t._v(" TODO: Компонент должен быть реализован в виде инлайн иконки ")])],1)},ux=[],dx={components:{CopyableElement:Hc,StorybookTitle:aC,StorybookPage:JO}},px=dx,fx=Object(M["a"])(px,lx,ux,!1,null,null,null),mx=fx.exports,hx=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Tooltip")]),n("p",[n("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right",theme:"crm-additional",content:"тултип"},expression:"{\n        placement: 'right',\n        theme: 'crm-additional',\n        content: 'тултип',\n      }"}]},[t._v(" Справа ")])]),n("p",[n("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",theme:"crm-additional",content:"тултип"},expression:"{\n        placement: 'left',\n        theme: 'crm-additional',\n        content: 'тултип',\n      }"}]},[t._v(" Слева ")])]),n("p",[t._v(" TODO: Проблемы с инкапсуляцией компонента. Используем сторонний v-tippy, но стили указываются через тему crm-additional, которая прописана в компоненте Tooltip ")])],1)},vx=[],gx={components:{StorybookTitle:aC,StorybookPage:JO}},bx=gx,_x=Object(M["a"])(bx,hx,vx,!1,null,null,null),kx=_x.exports,yx=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("SidePage")]),n("p",[n("button",{on:{click:function(e){t.sidePages[0].isOpen=!t.sidePages[0].isOpen}}},[t._v(" Дефолтный SidePage ")])]),n("p",[n("button",{on:{click:function(e){t.sidePages[1].isOpen=!t.sidePages[1].isOpen}}},[t._v(" Size md ")])]),n("p",[n("button",{on:{click:function(e){t.sidePages[2].isOpen=!t.sidePages[2].isOpen}}},[t._v(" С затемнением фона ")])]),n("p",[n("button",{on:{click:function(e){t.sidePages[3].isOpen=!t.sidePages[3].isOpen}}},[t._v(" Слот с кнопками ")])]),n("p",[n("button",{on:{click:function(e){t.sidePages[4].isOpen=!t.sidePages[4].isOpen}}},[t._v(" Во всю ширину экрана (size xl) ")])]),n("portal",{attrs:{to:"side-page"}},[t.sidePages[0].isOpen?n("side-page",{on:{close:function(e){t.sidePages[0].isOpen=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Заголовок ")]},proxy:!0}],null,!1,2236274884)},[n("p",[t._v(" Контент ")])]):t._e()],1),n("portal",{attrs:{to:"side-page"}},[t.sidePages[1].isOpen?n("side-page",{attrs:{size:"md"},on:{close:function(e){t.sidePages[1].isOpen=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Заголовок ")]},proxy:!0}],null,!1,2236274884)},[n("p",[t._v(" Контент ")])]):t._e()],1),n("portal",{attrs:{to:"side-page"}},[t.sidePages[2].isOpen?n("side-page",{attrs:{"block-background":""},on:{close:function(e){t.sidePages[2].isOpen=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Заголовок ")]},proxy:!0}],null,!1,2236274884)},[n("p",[t._v(" Контент ")])]):t._e()],1),n("portal",{attrs:{to:"side-page"}},[t.sidePages[3].isOpen?n("side-page",{on:{close:function(e){t.sidePages[3].isOpen=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Заголовок ")]},proxy:!0},{key:"buttons",fn:function(){return[n("crm-button",[t._v("Кнопка 1")]),n("crm-button",[t._v("Кнопка 2")])]},proxy:!0},{key:"cancel-button",fn:function(){return[n("crm-button",{attrs:{design:"outline"},on:{click:function(e){t.sidePages[3].isOpen=!1}}},[t._v(" Закрыть ")])]},proxy:!0}],null,!1,339849035)},[n("p",[t._v(" Контент ")])]):t._e()],1),n("portal",{attrs:{to:"side-page"}},[t.sidePages[4].isOpen?n("side-page",{attrs:{size:"xl"},on:{close:function(e){t.sidePages[4].isOpen=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Заголовок ")]},proxy:!0}],null,!1,2236274884)},[n("p",[t._v(" Контент ")])]):t._e()],1)],1)},wx=[],Ox={components:{SidePage:Ho,StorybookPage:JO,CrmButton:ie,StorybookTitle:aC},data:function(){return{sidePages:[{isOpen:!1},{isOpen:!1},{isOpen:!1},{isOpen:!1},{isOpen:!1}]}},methods:{}},Cx=Ox,xx=Object(M["a"])(Cx,yx,wx,!1,null,null,null),Sx=xx.exports,Px=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Spinner")]),n("component-view",{attrs:{title:"Default"}},[n("spinner")],1),n("component-view",{attrs:{title:"Size sm"}},[n("spinner",{attrs:{size:"sm"}})],1),n("component-view",{attrs:{title:"Size lg"}},[n("spinner",{attrs:{size:"lg"}})],1)],1)},jx=[],Ex={components:{StorybookPage:JO,Spinner:Xn,ComponentView:wC,StorybookTitle:aC}},Rx=Ex,$x=Object(M["a"])(Rx,Px,jx,!1,null,null,null),Tx=$x.exports,Ax=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Status")]),n("component-view",{attrs:{title:"Default (variant on)"}},[n("status")],1),n("component-view",{attrs:{title:"Variant off"}},[n("status",{attrs:{variant:"off"}})],1),n("component-view",{attrs:{title:"С текстом"}},[n("status",[t._v('ООО "Рога и копыта"')])],1)],1)},Ix=[],Dx={components:{ComponentView:wC,StorybookPage:JO,Status:ys,StorybookTitle:aC}},zx=Dx,Nx=Object(M["a"])(zx,Ax,Ix,!1,null,null,null),Mx=Nx.exports,Lx=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Switcher")]),n("component-view",{attrs:{title:"Default"}},[n("otp-switcher",{attrs:{checked:t.isChecked},on:{change:function(e){return t.isChecked=e}}})],1),n("component-view",{attrs:{title:"Default"}},[n("otp-switcher",{attrs:{checked:t.isChecked2},on:{change:function(e){return t.isChecked2=e}}},[t._v(" Свитчер с текстом ")])],1)],1)},Bx=[],Fx={components:{StorybookPage:JO,StorybookTitle:aC,OtpSwitcher:lp,ComponentView:wC},data:function(){return{isChecked:!0,isChecked2:!0}}},qx=Fx,Ux=Object(M["a"])(qx,Lx,Bx,!1,null,null,null),Gx=Ux.exports,Vx=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Tabs")]),n("component-view",{attrs:{title:"Default"}},[n("tabs",{attrs:{tabs:t.tabs,value:t.selectedTab}})],1),n("component-view",{attrs:{title:"Табы с изменением URL"}},[n("tabs",{attrs:{tabs:t.tabs,value:t.selectedTab,"use-query":""}})],1),n("component-view",{attrs:{title:"Табы со статусами"}},[n("tabs",{attrs:{tabs:t.tabs,value:t.selectedTab,status:"Formed"}})],1),n("p",[t._v(" TODO: Выбранная таба не синхронизируется с пропсом value родителя, а пропс используется только для начального значения. Так же отсутствует синхроизация после парсинга URL. ")]),n("p",[t._v(" TODO: Статус должен относиться к конкретной табе, а не ко всему компоненту ")])],1)},Hx=[],Wx={components:{StorybookPage:JO,StorybookTitle:aC,Tabs:ci,ComponentView:wC},data:function(){return{tabs:[{title:"Таб 1",value:"tab1"},{title:"Таб 2",value:"tab2"},{title:"Таб 3",value:"tab3"},{title:"Таб 4",value:"tab4"},{title:"Документы",value:"documents"}],selectedTab:"tab1"}}},Kx=Wx,Yx=Object(M["a"])(Kx,Vx,Hx,!1,null,null,null),Zx=Yx.exports,Qx=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Checkbox")]),n("component-view",{attrs:{title:"Default"}},[n("checkbox",{attrs:{checked:t.checked},on:{change:function(e){return t.checked=e}}})],1),n("component-view",{attrs:{title:"С текстом"}},[n("checkbox",{attrs:{title:"Текст",checked:t.checked},on:{change:function(e){return t.checked=e}}})],1),n("component-view",{attrs:{title:"С текстом и подписью"}},[n("checkbox",{attrs:{title:"Текст",caption:"Подпись",checked:t.checked},on:{change:function(e){return t.checked=e}}})],1),n("component-view",{attrs:{title:"Ошибка"}},[n("checkbox",{attrs:{error:"",checked:t.checked},on:{change:function(e){return t.checked=e}}})],1)],1)},Jx=[],Xx={components:{StorybookPage:JO,StorybookTitle:aC,Checkbox:qi,ComponentView:wC},data:function(){return{checked:!1}}},tS=Xx,eS=Object(M["a"])(tS,Qx,Jx,!1,null,null,null),nS=eS.exports,rS=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Datepicker")]),n("component-view",{attrs:{title:"Default"}},[n("datepicker",{attrs:{value:t.date},on:{input:function(e){return t.date=e}}})],1),n("component-view",{attrs:{title:"Range"}},[n("datepicker",{attrs:{value:t.date2,range:""},on:{input:function(e){return t.date2=e}}})],1)],1)},aS=[],oS={components:{StorybookPage:JO,StorybookTitle:aC,Datepicker:Nl,ComponentView:wC},data:function(){return{date:"",date2:""}}},sS=oS,iS=Object(M["a"])(sS,rS,aS,!1,null,null,null),cS=iS.exports,lS=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("RadioList")]),n("radio-list",{attrs:{options:t.options,name:"radio-list"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.option;return[t._v(" "+t._s(n.title)+" ")]}}]),model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),n("div",[t._v(t._s(t.model))]),n("p",[t._v(" TODO: убрать проп count (используется как счетчик в фильтрах таблиц). Такие детали не должны находиться в базовых компонентах. ")])],1)},uS=[],dS={components:{StorybookPage:JO,StorybookTitle:aC,RadioList:uo},data:function(){return{model:"",options:[{value:"foo",title:"Foo"},{value:"bar",title:"Bar"},{value:"baz",title:"Baz"}]}}},pS=dS,fS=Object(M["a"])(pS,lS,uS,!1,null,null,null),mS=fS.exports,hS=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Button")]),n("component-view",{attrs:{title:"Default"}},[n("crm-button",[t._v("Кнопка")])],1),n("component-view",{attrs:{title:"Design text"}},[n("crm-button",{attrs:{design:"text"}},[t._v(" Кнопка ")])],1),n("component-view",{attrs:{title:"Design outline"}},[n("crm-button",{attrs:{design:"outline"}},[t._v(" Кнопка ")])],1),n("component-view",{attrs:{title:"Size md"}},[n("crm-button",{attrs:{size:"md"}},[t._v(" Кнопка ")])],1),n("component-view",{attrs:{title:"Во всю ширину контейнера (wide)"}},[n("crm-button",{attrs:{wide:""}},[t._v(" Кнопка ")])],1),n("component-view",{attrs:{title:"Disabled"}},[n("crm-button",{attrs:{disabled:""}},[t._v(" Кнопка ")])],1),n("component-view",{attrs:{title:"Update button (TODO: переименовать в IconButton)"}},[n("update-button",{attrs:{icon:"cross"}},[t._v(" Кнопка cross ")]),n("update-button",{attrs:{icon:"download"}},[t._v(" Кнопка download ")]),n("update-button",{attrs:{icon:"edit"}},[t._v(" Кнопка edit ")]),n("update-button",{attrs:{icon:"plus"}},[t._v(" Кнопка plus ")]),n("update-button",{attrs:{icon:"upload"}},[t._v(" Кнопка upload ")])],1),n("p",[t._v("TODO: рефакторинг работы с иконками")]),n("component-view",{attrs:{title:"Variant secondary"}},[n("update-button",{attrs:{icon:"download",variant:"secondary"}},[t._v(" Кнопка ")])],1)],1)},vS=[],gS={components:{ComponentView:wC,StorybookPage:JO,StorybookTitle:aC,CrmButton:ie,UpdateButton:ra}},bS=gS,_S=Object(M["a"])(bS,hS,vS,!1,null,null,null),kS=_S.exports,yS=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Link")]),n("component-view",{attrs:{title:"Default"}},[n("crm-link",[t._v("link")])],1),n("component-view",{attrs:{title:"Type green"}},[n("crm-link",{attrs:{type:"green"}},[t._v(" link ")])],1),n("component-view",{attrs:{title:"Disabled"}},[n("crm-link",{attrs:{disabled:""}},[t._v(" link ")])],1),n("component-view",{attrs:{title:"Переход по прямой ссылке"}},[n("crm-link",{attrs:{to:"/storybook"}},[t._v(" storybook home ")])],1),n("component-view",{attrs:{title:"Переход по именованному роуту"}},[n("crm-link",{attrs:{to:{name:"creditProduct",params:{id:1}}}},[t._v(" Кредитный продукт с id 1 ")])],1),n("storybook-title",[t._v("LinkExternal")]),n("component-view",[n("link-external",{attrs:{href:"https://google.com",type:"green",target:"_blank"}},[t._v(" Google ")])],1)],1)},wS=[],OS={components:{StorybookPage:JO,StorybookTitle:aC,ComponentView:wC,CrmLink:Ds,LinkExternal:Yy}},CS=OS,xS=Object(M["a"])(CS,yS,wS,!1,null,null,null),SS=xS.exports,PS=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Компонент истории")]),n("component-view",{attrs:{title:"Один этап истории"}},t._l(t.oneStageHistoryList,(function(t,e){return n("history",{key:e,attrs:{item:t}})})),1),n("component-view",{attrs:{title:"Несколько этапов истории"}},t._l(t.multiStageHistoryList,(function(t,e){return n("history",{key:e,attrs:{item:t}})})),1)],1)},jS=[],ES={components:{StorybookPage:JO,StorybookTitle:aC,History:Ql,ComponentView:wC},data:function(){return{multiStageHistoryList:[{date:"30 декабря 2019",time:"10:16",title:"Договор сформирован",employee:"С. Б. Сверликов",type:"Formed"},{date:"30 декабря 2019",time:"10:16",title:"Ошибка подписания",type:"ErrorSigning"},{date:"30 декабря 2019",time:"10:14",title:"На электронном подписании",description:["Договор сформирован"],type:"ESigning"},{date:"30 декабря 2019",time:"10:35",title:"Заявка одобрена",description:["Полная анкета","Средняя анкета","Короткая анкета"],type:"Approved"}],oneStageHistoryList:[{date:"30 декабря 2019",time:"10:35",title:"Заявка одобрена",description:["Полная анкета","Средняя анкета","Короткая анкета"],type:"Approved"}]}}},RS=ES,$S=Object(M["a"])(RS,PS,jS,!1,null,null,null),TS=$S.exports,AS=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Pagination")]),n("component-view",{attrs:{title:"38 записей"}},[n("pagination",{attrs:{total:38,"current-page":t.currentPage,"per-page":t.perPage},on:{onChangePage:function(e){t.currentPage=e},onPerPageChange:t.onUpdatePerPage}})],1)],1)},IS=[],DS={components:{StorybookPage:JO,StorybookTitle:aC,Pagination:Ps,ComponentView:wC},data:function(){return{total:7,currentPage:1,perPage:5}},methods:{onUpdatePerPage:function(t){this.perPage=t,this.currentPage=1}}},zS=DS,NS=Object(M["a"])(zS,AS,IS,!1,null,null,null),MS=NS.exports,LS=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Counter")]),n("component-view",{attrs:{title:"min=1, max=10"}},[n("otp-counter",{attrs:{min:1,max:10},model:{value:t.counter,callback:function(e){t.counter=e},expression:"counter"}})],1)],1)},BS=[],FS=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("otp-counter-button",{attrs:{type:"decrement",disabled:t.disabledDecrement},on:{click:t.onDecrementClick}}),t._v(" "+t._s(t.value)+" "),n("otp-counter-button",{attrs:{type:"increment",disabled:t.disabledIncrement},on:{click:t.onIncrementClick}})],1)},qS=[],US=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:t.classes,attrs:{disabled:t.disabled},on:{click:t.onClick}})},GS=[],VS={name:"OtpCounterButton",props:{type:{type:String,required:!0,validator:function(t){return["decrement","increment"].includes(t)}},disabled:Boolean},computed:{classes:function(){var t;return t={},Object(vt["a"])(t,this.$style.root,!0),Object(vt["a"])(t,this.$style["".concat(this.type)],!!this.type),t}},methods:{onClick:function(){this.$emit("click")}}},HS=VS,WS=n("03cc");function KS(t){this["$style"]=WS["default"].locals||WS["default"]}var YS=Object(M["a"])(HS,US,GS,!1,KS,null,null),ZS=YS.exports,QS={name:"OtpCounter",components:{OtpCounterButton:ZS},props:{value:{type:[String,Number],required:!0},min:{type:Number,required:!1,default:0},max:{type:Number,required:!1,default:10}},computed:{disabledDecrement:function(){return this.value===this.min},disabledIncrement:function(){return this.value===this.max}},methods:{onDecrementClick:function(){this.$emit("input",this.value-1)},onIncrementClick:function(){this.$emit("input",this.value+1)}}},JS=QS,XS=n("d12d");function tP(t){this["$style"]=XS["default"].locals||XS["default"]}var eP=Object(M["a"])(JS,FS,qS,!1,tP,null,null),nP=eP.exports,rP={components:{StorybookPage:JO,StorybookTitle:aC,OtpCounter:nP,ComponentView:wC},data:function(){return{counter:1}}},aP=rP,oP=Object(M["a"])(aP,LS,BS,!1,null,null,null),sP=oP.exports,iP=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Документы: ошибка подписания")]),n("error-signing-view")],1)},cP=[],lP={components:{ErrorSigningView:Lw,StorybookTitle:aC,StorybookPage:JO}},uP=lP,dP=Object(M["a"])(uP,iP,cP,!1,null,null,null),pP=dP.exports,fP=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Бумажное подписание")]),n("docs-paper-sign")],1)},mP=[],hP={components:{DocsPaperSign:Aw,StorybookTitle:aC,StorybookPage:JO}},vP=hP,gP=Object(M["a"])(vP,fP,mP,!1,null,null,null),bP=gP.exports,_P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Документы успешно отправлены")]),n("success-view")],1)},kP=[],yP={components:{SuccessView:Vw,StorybookTitle:aC,StorybookPage:JO}},wP=yP,OP=Object(M["a"])(wP,_P,kP,!1,null,null,null),CP=OP.exports,xP=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Загрузка документов")]),n("docs-upload-view")],1)},SP=[],PP={components:{DocsUploadView:_w,StorybookTitle:aC,StorybookPage:JO}},jP=PP,EP=Object(M["a"])(jP,xP,SP,!1,null,null,null),RP=EP.exports,$P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Скачивание документов")]),n("docs-download-view")],1)},TP=[],AP={components:{DocsDownloadView:iw,StorybookTitle:aC,StorybookPage:JO}},IP=AP,DP=Object(M["a"])(IP,$P,TP,!1,null,null,null),zP=DP.exports,NP=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("StatusInfo")]),t._l(t.statuses,(function(e){return n("div",{key:e.key},[n("p",[t._v(t._s(e.value))]),n("p",[n("status-info",{attrs:{status:e.value}})],1),n("hr")])}))],2)},MP=[],LP={components:{StatusInfo:ub,StorybookTitle:aC,StorybookPage:JO},data:function(){var t=Object.keys(ua),e=t.map((function(t){return{key:t,value:ua[t]}}));return{statuses:e}}},BP=LP,FP=Object(M["a"])(BP,NP,MP,!1,null,null,null),qP=FP.exports,UP=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Документы: запустить формирование")]),n("docs-create-agreement")],1)},GP=[],VP={components:{DocsCreateAgreement:Pw,StorybookTitle:aC,StorybookPage:JO}},HP=VP,WP=Object(M["a"])(HP,UP,GP,!1,null,null,null),KP=WP.exports,YP=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("FileBlock")]),t._l(t.documents,(function(t){return n("file-block",{key:t.type,attrs:{document:t}})}))],2)},ZP=[],QP={components:{FileBlock:xy,StorybookTitle:aC,StorybookPage:JO},computed:Object(De["a"])({},Object(Vn["e"])("file",["documents"]))},JP=QP,XP=Object(M["a"])(JP,YP,ZP,!1,null,null,null),tj=XP.exports,ej=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Multiselect")]),n("component-view",[n("multiselect",{attrs:{options:t.multiselectItems,placeholder:"Выберите из списка","model-field":"id",label:"name",filterable:"",size:"md"},model:{value:t.checkedMultiselectItemIds,callback:function(e){t.checkedMultiselectItemIds=e},expression:"checkedMultiselectItemIds"}})],1)],1)},nj=[],rj={name:"SMultiselect",components:{StorybookPage:JO,StorybookTitle:aC,Multiselect:sv,ComponentView:wC},data:function(){return{checkedMultiselectItemIds:[],multiselectItems:[{name:"Автозапчасти, шины, диски",id:880},{name:"Билеты и туры",id:90},{name:"Домашние аудио-видео системы",id:589},{name:"Игровые приставки",id:820}]}}},aj=rj,oj=Object(M["a"])(aj,ej,nj,!1,null,"5b8f4ce4",null),sj=oj.exports,ij=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Процесс электронного подписания")]),n("p",[n("button",{on:{click:t.onRequestPreApproved}},[t._v(" Заявка предварительно одобрена ")]),n("button",{on:{click:t.onRequestApproved}},[t._v(" Заявка одобрена ")]),n("button",{on:{click:t.onCreateAgreement}},[t._v(" Документы сформированы paperless ")]),n("button",{on:{click:t.onCreateAgreementEs}},[t._v(" Документы сформированы paperless, есть ПЭП ")]),n("button",{on:{click:t.onUploadDocs}},[t._v(" Документы загружены ")]),n("button",{on:{click:t.onAgreementSigned}},[t._v(" Договор подписан ")]),n("button",{on:{click:t.onAgreementAuthed}},[t._v(" Договор авторизован ")]),n("button",{on:{click:t.onAuthCancel}},[t._v(" Авторизация отменена ")]),n("button",{on:{click:t.onPaperSign}},[t._v(" Перешли на бумажное подписание ")])]),n("p",[n("button",{on:{click:t.onRequestCancel}},[t._v(" Заявка отменена ")]),n("button",{on:{click:t.onSignError}},[t._v(" Ошибка подписания ")]),n("button",{on:{click:t.onFail}},[t._v(" Продолжение работы невозможно ")])]),n("request")],1)},cj=[],lj={components:{Request:MO,StorybookTitle:aC,StorybookPage:JO},computed:Object(De["a"])({},Object(Vn["e"])("request",["currentRequestState"])),created:function(){this.setCurrentRequestState({uuid:"foo-bar",optyId:"123"})},methods:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["d"])("request",["setCurrentRequestState"])),Object(Vn["d"])("agreement",["setCurrentAgreement"])),{},{onRequestPreApproved:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.DECISION_PRE_APPROVAL,statusDescription:"Заявка предварительно одобрена"}))},onRequestApproved:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.DECISION_APPROVAL,statusDescription:"Заявка одобрена"}))},onCreateAgreement:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.AGREEMENT_CREATED_PAPERLESS,statusDescription:"Договор сформирован, прикрепление документов"})),this.setCurrentAgreement({paperTech:!1})},onCreateAgreementEs:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.AGREEMENT_CREATED_PAPERLESS_ES,statusDescription:"Договор сформирован, эл. подписание"})),this.setCurrentAgreement({paperTech:!1})},onUploadDocs:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.AGREEMENT_DOCS_SENT,statusDescription:"Договор на электронном подписании"}))},onAgreementSigned:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.AGREEMENT_SIGNED,statusDescription:"Договор подписан"}))},onAgreementAuthed:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.AGREEMENT_AUTHORIZED,statusDescription:"Договор авторизован"}))},onRequestCancel:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.ARCHIVE,statusDescription:"В архиве"}))},onAuthCancel:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.CANCEL_AUTHORIZATION,statusDescription:"Авторизация отменена"}))},onSignError:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.AGREEMENT_SIGN_FAILED,statusDescription:"Договор не подписан"}))},onFail:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.FAILED,statusDescription:"Продолжение работы невозможно"}))},onPaperSign:function(){this.setCurrentRequestState(Object(De["a"])(Object(De["a"])({},this.currentRequestState),{},{status:ua.AGREEMENT_CREATED_PAPER_TECH,statusDescription:"Договор сформирован, бумажное подписание"})),this.setCurrentAgreement({paperTech:!0})}})},uj=lj,dj=Object(M["a"])(uj,ij,cj,!1,null,null,null),pj=dj.exports,fj=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("StatusNotification")]),t._l(t.statuses,(function(e,r){return n("component-view",{key:r,attrs:{title:""}},[n("otp-status-notification",[n("div",{domProps:{innerHTML:t._s(e.status)}})])],1)}))],2)},mj=[],hj={name:"SStatusNotification",components:{StorybookPage:JO,StorybookTitle:aC,ComponentView:wC,OtpStatusNotification:ob},data:function(){var t=[{status:"Договор авторизован"},{status:"Клиенту отправлена СМС. <br> Ждем завершения электронного подписания"},{status:"Клиенту нужна помощь в подписании документов"},{status:"В архиве"}];return{statuses:t}}},vj=hj,gj=Object(M["a"])(vj,fj,mj,!1,null,null,null),bj=gj.exports,_j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("ExpansionPanel")]),n("component-view",{attrs:{title:"Default"}},[n("otp-expansion-panel",{attrs:{title:"Кредитный договор № 3979732566"}},[t._v(" Кредитный договор № 3979732566 ")])],1),n("component-view",{attrs:{title:"IsDocuments"}},[n("otp-expansion-panel",{attrs:{title:"Кредитный договор № 3979732566","is-documents":""}},[t._v(" Кредитный договор № 3979732566 ")])],1),n("component-view",{attrs:{title:"Expanded"}},[n("otp-expansion-panel",{attrs:{title:"Кредитный договор № 3979732566",expanded:""}},[t._v(" Кредитный договор № 3979732566 ")])],1)],1)},kj=[],yj={name:"SExpansionPanel",components:{StorybookPage:JO,StorybookTitle:aC,ComponentView:wC,OtpExpansionPanel:Vl}},wj=yj,Oj=Object(M["a"])(wj,_j,kj,!1,null,null,null),Cj=Oj.exports,xj=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("storybook-page",[n("storybook-title",[t._v("Heading")]),t._l(t.tags,(function(e,r){return n("component-view",{key:r,attrs:{title:"Tag: "+e}},[n("otp-heading",{attrs:{tag:e}},[t._v(" Хорошего дня! ")])],1)}))],2)},Sj=[],Pj={name:"SHeading",components:{StorybookPage:JO,StorybookTitle:aC,ComponentView:wC,OtpHeading:Re},data:function(){return{tags:["h1","h2","h3","h4"]}}},jj=Pj,Ej=Object(M["a"])(jj,xj,Sj,!1,null,null,null),Rj=Ej.exports,$j=[{path:"/storybook",component:cC},{path:"/storybook/table",component:mC},{path:"/storybook/form-input-new",component:SC},{path:"/storybook/form-item",component:MC},{path:"/storybook/select",component:TC},{path:"/storybook/filter",component:GC},{path:"/storybook/badge",component:ZC},{path:"/storybook/breadcrumbs",component:nx},{path:"/storybook/commercial-net-suggestions",component:cx},{path:"/storybook/copyable-element",component:mx},{path:"/storybook/tooltip",component:kx},{path:"/storybook/side-page",component:Sx},{path:"/storybook/spinner",component:Tx},{path:"/storybook/status",component:Mx},{path:"/storybook/switcher",component:Gx},{path:"/storybook/tabs",component:Zx},{path:"/storybook/checkbox",component:nS},{path:"/storybook/datepicker",component:cS},{path:"/storybook/radiolist",component:mS},{path:"/storybook/button",component:kS},{path:"/storybook/link",component:SS},{path:"/storybook/history",component:TS},{path:"/storybook/pagination",component:MS},{path:"/storybook/counter",component:sP},{path:"/storybook/multiselect",component:sj},{path:"/storybook/docs-error-signing",component:pP},{path:"/storybook/docs-formed",component:bP},{path:"/storybook/docs-create-agreement",component:KP},{path:"/storybook/docs-success",component:CP},{path:"/storybook/docs-upload",component:RP},{path:"/storybook/docs-download",component:zP},{path:"/storybook/status-info",component:qP},{path:"/storybook/file-block",component:tj},{path:"/storybook/docs-process",component:pj},{path:"/storybook/status-notification",component:bj},{path:"/storybook/expansion-panel",component:Cj},{path:"/storybook/heading",component:Rj}],Tj=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("page-wrapper",{attrs:{"is-main":""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Торговые точки ")]},proxy:!0},{key:"filters",fn:function(){return[n("div",{class:t.$style.filters},[n("form-input-new",{staticStyle:{"max-width":"316px"},attrs:{type:"search",placeholder:"Код ТТ или Наименование ТТ"},on:{input:t.debouncedSearch},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("reg-center-and-kko-component",{attrs:{type:"filter",width:"216px"},on:{select:function(e,n){var r=n.key,a=n.value;return t.setRegCenterAndKkoId({key:r,value:a})}},model:{value:t.filters,callback:function(e){t.filters=e},expression:"filters"}}),n("crm-filter",{attrs:{options:t.curatorsTt,placeholder:"Куратор",label:"fio","model-field":"login"},on:{select:t.fetchData},model:{value:t.curator,callback:function(e){t.curator=e},expression:"curator"}})],1)]},proxy:!0},{key:"default",fn:function(){return[n("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,data:t.shops,fields:t.headers,"no-data-template":"Нет данных","sort-order":t.defaultSort},scopedSlots:t._u([{key:"name",fn:function(e){var r=e.rowData;return[n("status",{attrs:{variant:r.status}},[n("div",{staticClass:"crm-link-black",on:{click:function(e){return t.onShopClick(r)}}},[t._v(" "+t._s(r.name)+" ")])])]}},{key:"curator",fn:function(e){var n=e.rowData;return[t._v(" "+t._s(n.curatorFio)+" ")]}},{key:"type",fn:function(e){var r=e.rowData;return[n("div",{staticClass:"text-align-right"},[t._v(" "+t._s("INTERNET"===r.type?"Да":"Нет")+" ")])]}}])}),n("pagination",{attrs:{"per-page":t.perPage,total:t.totalItems,"current-page":t.currentPage,"pagination-data":t.paginationData},on:{onChangePage:t.onChangePage,onPerPageChange:t.onPerPageChange}})]},proxy:!0}])}),t.isModalDetails?n("shop-details",{attrs:{"shop-id":t.shopId},on:{edit:t.onShopEdit,close:t.onCloseModal}}):t._e(),t.isModalEdit?n("edit-shop",{attrs:{"shop-id":t.shopId},on:{close:t.onCloseModal,save:t.fetchData}}):t._e()],1)},Aj=[],Ij=[{name:"name",title:"Наименование ТТ",sortField:"name",width:"45%"},{name:"orgName",title:"Наименование ТО",width:"30%"},{name:"curator",title:"Куратор ТТ",sortField:"curator",width:"15%"},{name:"type",title:"Интернет - магазин",width:"10%"}],Dj={name:"Shops",components:{PageWrapper:ir,FormInputNew:At,Status:ys,Vuetable:hs["a"],ShopDetails:pl,EditShop:Ki,Pagination:Ps,RegCenterAndKkoComponent:os,CrmFilter:ts},data:function(){return{search:"",headers:Ij,shopId:"",modal:"",isLoading:!1,currentPage:1,perPage:5,sortField:"",sortDirection:"",filters:{kkoId:0,regCenterId:0},curator:"",debouncedSearch:function(){},defaultSort:[{direction:"asc",field:"name",sortField:"name"}]}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("shop",["shops","totalItems"])),Object(Vn["e"])("user",["curatorsTt"])),{},{isModalDetails:function(){return"details"===this.modal},isModalEdit:function(){return"edit"===this.modal},lastPage:function(){return Math.ceil(this.totalItems/this.perPage)},paginationData:function(){return{data:this.shops,total:this.totalItems,per_page:this.perPage,current_page:this.currentPage,last_page:this.lastPage,from:1,to:this.perPage}}}),created:function(){var t=this;this.fetchData(),this.fetchCuratorsTt(),this.debouncedSearch=Gs()((function(){t.currentPage=1,t.fetchData()}),500)},mounted:function(){var t=this;this.$watch("$refs.vuetable.sortOrder",(function(e){if(!e||!e[0])return t.sortField="",void(t.sortDirection="");t.sortField=e[0].field,t.sortDirection=e[0].direction,t.fetchData()}))},methods:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("shop",["fetchShops"])),Object(Vn["b"])("user",["fetchCuratorsTt"])),{},{fetchData:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,n=Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])(Object(De["a"])({page:t.currentPage,size:t.perPage},t.sortField&&{sort:"".concat(t.sortField,",").concat(t.sortDirection)}),t.search&&{likename:t.search}),t.filters.kkoId&&{kko:t.filters.kkoId}),t.filters.regCenterId&&{regcenter:t.filters.regCenterId}),t.curator&&{curator:t.curator}),e.next=4,t.fetchShops(n);case 4:t.isLoading=!1;case 5:case"end":return e.stop()}}),e)})))()},onShopClick:function(t){var e=t.id;this.shopId=e,this.modal="details"},onShopEdit:function(){this.modal="edit"},onCloseModal:function(){this.modal=""},onChangePage:function(t){this.currentPage=t,this.fetchData(),this.onCloseModal()},onPerPageChange:function(t){this.perPage!==t&&(this.perPage=t,this.currentPage=1,this.fetchData())},setRegCenterAndKkoId:function(t){var e=t.key,n=t.value;this.filters[e]=n,this.fetchData()}})},zj=Dj,Nj=n("94d8");function Mj(t){this["$style"]=Nj["default"].locals||Nj["default"]}var Lj=Object(M["a"])(zj,Tj,Aj,!1,Mj,null,null),Bj=Lj.exports,Fj=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("page-title",[t._v(" Выберите сценарии подключения онлайн-кредитования ")]),n("div",{class:t.$style.subtitle},[t._v(" Ваши клиенты смогут оформить покупку кредит ")]),n("scenarios")],1)},qj=[],Uj=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[t._t("default")],2)},Gj=[],Vj={name:"PageTitle"},Hj=Vj,Wj=n("0d74");function Kj(t){this["$style"]=Wj["default"].locals||Wj["default"]}var Yj=Object(M["a"])(Hj,Uj,Gj,!1,Kj,null,null),Zj=Yj.exports,Qj=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},t._l(t.scenarios,(function(e,r){return n("div",{key:r,class:t.$style.item},[n("scenario",{staticClass:"crm-mb-24",attrs:{data:e.scenario}}),n("tags",{attrs:{tags:e.tags}})],1)})),0)},Jj=[],Xj=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style.inner,on:{click:function(e){return t.$router.push(t.data.link)}}},[n("div",{class:t.$style.icon},[n("scenario-icons",{attrs:{icon:t.data.icon}})],1),n("div",{class:t.$style.title},[t._v(" "+t._s(t.data.title)+" ")]),n("div",{class:t.$style.description},[t._v(" "+t._s(t.data.description)+" ")]),t.data.link?n("div",{class:t.$style.link},[t._v(" Начать ")]):t._e()])])},tE=[],eE=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("icon-"+t.icon,{tag:"component"})},nE=[],rE=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M40.619 24.044L32.3 26.272m9.708 2.957l-10.37 2.778m1.39 5.185l7.777-2.084m-27.923 7.184a9.16 9.16 0 01-1.367-2.518 9.161 9.161 0 009.47-2.187L35.38 23.195a2.684 2.684 0 00.33-3.392l3.515-.942a2.684 2.684 0 011.39 5.185l2.592-.695a2.684 2.684 0 011.39 5.185l-2.593.694a2.684 2.684 0 011.39 5.185l-2.593.695a2.684 2.684 0 011.389 5.184l-19.66 5.268a9.156 9.156 0 01-9.646-3.27z",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M25.893 9.906l-7.591 7.59m11.388-3.795l-7.591 7.591m3.794 3.796l5.693-5.693m-.002.003a2.684 2.684 0 013.795 3.796L20.987 37.586a9.156 9.156 0 01-9.99 1.99 9.157 9.157 0 01-2.972-1.986l-3.692-3.692a10.736 10.736 0 01-2.937-9.696l2.309-11.544a2.758 2.758 0 013.293-2.149 2.754 2.754 0 012.143 2.388l.617 5.554L22.095 6.114A2.684 2.684 0 1125.89 9.91l1.898-1.898a2.684 2.684 0 113.796 3.795l-1.898 1.898a2.684 2.684 0 013.795 3.796l-1.898 1.897z",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M36 5l1-4M43 12l4-1M45 18h2M30 3V1M39 9l5-5",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round"}})])},aE=[],oE={name:"Link"},sE=oE,iE=Object(M["a"])(sE,rE,aE,!1,null,null,null),cE=iE.exports,lE=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M45 19.965v.004C45 32.852 36.123 43.854 23.997 46 11.872 43.851 2.997 32.848 3 19.965V4.933C3 3.313 4.254 2 5.8 2h36.4C43.746 2 45 3.313 45 4.933v15.032z",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{"clip-rule":"evenodd",d:"M24 10h7l-6 9h7L17 34l5-11h-6l8-13z",stroke:"#52AE30","stroke-width":"2","stroke-linejoin":"round"}})])},uE=[],dE={name:"ButtonIcon"},pE=dE,fE=Object(M["a"])(pE,lE,uE,!1,null,null,null),mE=fE.exports,hE=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M10 18l9-11M39 18L30 7M37.863 41H10.137c-1.336-.023-2.48-.925-2.764-2.177L3.1 21.573c-.42-1.519.522-3.076 2.106-3.48.215-.054.436-.086.658-.093h36.272c1.637.054 2.919 1.371 2.862 2.94-.008.214-.04.426-.097.633l-4.274 17.25c-.283 1.252-1.427 2.154-2.764 2.177zM15 24v11M24 24v11M33 24v11",stroke:"#52AE30","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},vE=[],gE={name:"Api"},bE=gE,_E=Object(M["a"])(bE,hE,vE,!1,null,null,null),kE=_E.exports,yE={name:"ScenarioIcons",components:{IconLink:cE,IconButton:mE,IconApi:kE},props:{icon:{type:String,required:!0}}},wE=yE,OE=Object(M["a"])(wE,eE,nE,!1,null,null,null),CE=OE.exports,xE={name:"Scenario",components:{ScenarioIcons:CE},props:{data:{type:Object,required:!0}}},SE=xE,PE=n("1b5b");function jE(t){this["$style"]=PE["default"].locals||PE["default"]}var EE=Object(M["a"])(SE,Xj,tE,!1,jE,null,null),RE=EE.exports,$E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style.inner},t._l(t.tags,(function(e,r){return n("div",{key:r},[n("badge",{attrs:{variant:"light"}},[t._v(" "+t._s(e)+" ")])],1)})),0)])},TE=[],AE={name:"Tags",components:{Badge:ve},props:{tags:{type:Array,required:!0}}},IE=AE,DE=n("eefa");function zE(t){this["$style"]=DE["default"].locals||DE["default"]}var NE=Object(M["a"])(IE,$E,TE,!1,zE,null,null),ME=NE.exports,LE=[{scenario:{icon:"link",title:"Ссылка на заявку",description:"Формируется ссылка, которую можно отправить клиенту или разместить в профиле Инстаграмм",link:{name:"create-link"}},tags:["отправить в мессенджере","МУЛЬТИССЫЛКА","instagram","e-mail","конструктор Tilda/Wix","без интеграции","QR код","лендинг"]},{scenario:{icon:"button",title:"Кнопка «Купить в кредит»",description:"Простой способ размещения сервиса кредитования, ручной мониторинг заказов.",link:{name:"create-button"}},tags:["Карточка товара","способы оплаты","фрейм","простая интеграция","Корзина товаров","JavaScript"]},{scenario:{icon:"api",title:"Интеграция по API",description:"Для автоматического размещения кнопки «Купить в кредит» в вашем интернет-магазине",link:""},tags:["CRM","для крупного интернет-магазина","1C","API","Полная интеграция","дизайн кнопки","Разработчику","техническая документация"]}],BE={name:"Scenarios",components:{Scenario:RE,Tags:ME},data:function(){return{scenarios:LE}}},FE=BE,qE=n("fdf0");function UE(t){this["$style"]=qE["default"].locals||qE["default"]}var GE=Object(M["a"])(FE,Qj,Jj,!1,UE,null,null),VE=GE.exports,HE={name:"Constructor",components:{PageTitle:Zj,Scenarios:VE}},WE=HE,KE=n("e660");function YE(t){this["$style"]=KE["default"].locals||KE["default"]}var ZE=Object(M["a"])(WE,Fj,qj,!1,YE,null,null),QE=ZE.exports,JE=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("scenario-wrapper",{scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[t.stepOne?n("breadcrumbs"):t._e(),t.stepTwo?n("nav-back",{staticStyle:{height:"22px"},on:{click:function(e){t.step=1}}}):t._e()]},proxy:!0},{key:"step",fn:function(){return[t._v(" Шаг "+t._s(t.step)+" из 2 ")]},proxy:!0},{key:"title",fn:function(){return[t._v(" "+t._s(t.title)+" ")]},proxy:!0},{key:"activator",fn:function(){return[t.address&&t.stepOne?n("otp-switcher",{attrs:{checked:t.isPro,"text-position":"left",theme:"primary"},on:{change:t.onClickProMode}},[n("pro-mode-icon",[t._v(" PRO режим ")])],1):t._e()]},proxy:!0},{key:"default",fn:function(){return[n("keep-alive",[t.stepOne?n("step-one",{attrs:{"is-pro":t.isPro}}):t._e(),t.stepTwo?n("step-two"):t._e()],1)]},proxy:!0}])})},XE=[],tR=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("info",{directives:[{name:"tippy",rawName:"v-tippy",value:t.tooltipConfig,expression:"tooltipConfig"}]}),t._t("default")],2)},eR=[],nR=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"17",height:"18",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M7.999 6.334a.833.833 0 100-1.667.833.833 0 000 1.667z",fill:"currentColor"}}),n("path",{attrs:{d:"M8 8v5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}}),n("path",{attrs:{d:"M2.813 14.186a7.333 7.333 0 1110.371-10.37 7.333 7.333 0 01-10.37 10.37",stroke:"currentColor","stroke-width":"1.5"}})])},rR=[],aR={name:"Info"},oR=aR,sR=Object(M["a"])(oR,nR,rR,!1,null,null,null),iR=sR.exports,cR={name:"ProModeIcon",components:{Info:iR},data:function(){return{tooltipConfig:{placement:"left",theme:"crm-additional",content:"Необязательные параметры для более тонкой настройки заявки"}}}},lR=cR,uR=n("74ff");function dR(t){this["$style"]=uR["default"].locals||uR["default"]}var pR=Object(M["a"])(lR,tR,eR,!1,dR,null,null),fR=pR.exports,mR=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style.breadcrumbs},[t._t("breadcrumbs")],2),n("div",{class:t.$style.step},[t._t("step")],2),n("div",{class:t.$style["title-block"]},[n("page-title",[t._t("title")],2),n("div",{class:t.$style.activator},[t._t("activator")],2)],1),t._t("default")],2)},hR=[],vR={name:"ScenarioWrapper",components:{PageTitle:Zj}},gR=vR,bR=n("bcee");function _R(t){this["$style"]=bR["default"].locals||bR["default"]}var kR=Object(M["a"])(gR,mR,hR,!1,_R,null,null),yR=kR.exports,wR=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[t.address?n("div",{staticClass:"row crm-mb-24"},[n("div",{staticClass:"col-5"},[n("edit-link",{attrs:{value:t.addressAndSite},on:{click:function(e){t.showAddressModal=!0}}})],1)]):t._e(),n("div",{staticClass:"row crm-mb-24"},[n("div",{staticClass:"col-5"},[n("form-item",{attrs:{label:"Тип кредитования для клиента"}},[n("crm-select-as-dropdown",{attrs:{options:t.creditTypes},model:{value:t.creditType,callback:function(e){t.creditType=e},expression:"creditType"}})],1)],1),t.isPro?n("div",{staticClass:"col-5"},[n("form-item",{attrs:{label:"Этот кредитный продукт будет указан для клиента первым "}},[n("crm-select-as-dropdown",{attrs:{options:t.creditProducts,placeholder:"Выберите из списка"},model:{value:t.creditProduct,callback:function(e){t.creditProduct=e},expression:"creditProduct"}})],1)],1):t._e()]),n("checkbox",{staticClass:"crm-mb-24",attrs:{title:"Клиент сможет внести первоначальный взнос"},model:{value:t.firstPayment,callback:function(e){t.firstPayment=e},expression:"firstPayment"}}),t.isPro?[n("div",{staticClass:"row crm-mb-24"},[n("div",{staticClass:"col-5"},[n("form-item",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" После "),n("strong",[t._v("одобрения")]),t._v(" заявки клиент будет направлен по этому адресу ")]},proxy:!0},{key:"default",fn:function(){return[n("form-input-new",{attrs:{size:"lg",placeholder:"sitemyshop.com ",mask:t.urlMask},model:{value:t.successUrl,callback:function(e){t.successUrl=e},expression:"successUrl"}})]},proxy:!0}],null,!1,3972022274)})],1),n("div",{staticClass:"col-5"},[n("form-item",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" Адрес для перехода в случае "),n("strong",[t._v("отказа")]),t._v(" в кредите ")]},proxy:!0},{key:"default",fn:function(){return[n("form-input-new",{attrs:{size:"lg",placeholder:"sitemyshop.com ",mask:t.urlMask},model:{value:t.failUrl,callback:function(e){t.failUrl=e},expression:"failUrl"}})]},proxy:!0}],null,!1,770387996)})],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-5"},[t.showUtm?t._e():n("plus-link",{staticClass:"crm-mb-16",on:{click:function(e){t.showUtm=!0}}},[t._v(" UTM метки ")]),t.showUtm?n("form-item",{staticClass:"crm-mb-24",attrs:{label:"UTM метка для отслеживания продуктовых метрик"}},[n("additional-wrapper",{on:{click:t.onCloseUtm}},[n("form-input-new",{attrs:{size:"lg",placeholder:"utm_campaign"},model:{value:t.utm,callback:function(e){t.utm=e},expression:"utm"}})],1)],1):t._e(),t.showReceivingMethod?t._e():n("plus-link",{on:{click:function(e){t.showReceivingMethod=!0}}},[t._v(" Способ получения заказа ")]),t.showReceivingMethod?n("form-item",{staticClass:"crm-mb-24",attrs:{label:"Способ получения заказа клиентом"}},[n("additional-wrapper",{on:{click:t.onCloseReceivingMethod}},[n("crm-select",{attrs:{options:t.receivingMethods,size:"lg",placeholder:"Выберите из списка"},model:{value:t.receivingMethod,callback:function(e){t.receivingMethod=e},expression:"receivingMethod"}})],1)],1):t._e()],1)])]:t._e(),n("div",{staticClass:"row"},[n("div",{staticClass:"col-5"},[n("div",{class:t.$style.goods},[n("goods",{attrs:{"button-text":"Создать ссылку","is-add-goods":""}})],1)])]),t.showAddressModal?n("address-edit",{attrs:{address:t.address,url:t.url,addresses:t.addresses},on:{back:function(e){return t.$router.push({name:"constructor"})},close:function(e){t.showAddressModal=!1},save:t.onAddressSave}}):t._e()],2)},OR=[],CR=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],staticClass:"otp-select-as-dropdown",class:t.classes},[n("div",{staticClass:"otp-select-as-dropdown__activator",on:{click:t.visibleControl}},[n("div",{staticClass:"otp-select-as-dropdown__control",class:{_focused:t.focused}},[n("div",{staticClass:"otp-select-as-dropdown__values"},[n("div",[t.value?t._e():n("div",{staticClass:"otp-select-as-dropdown__placeholder"},[t._v(" "+t._s(t.placeholder)+" ")]),t.value?[n("div",{staticClass:"otp-select-as-dropdown__title _selected"},[t._v(" "+t._s(t.selectedValue.title)+" ")]),t.selectedValue.subtitle?n("div",{staticClass:"otp-select-as-dropdown__subtitle"},[t._v(" "+t._s(t.selectedValue.subtitle)+" ")]):t._e()]:t._e()],2)]),n("div",{staticClass:"otp-select-as-dropdown__icon"},[n("chevron")],1)])]),t.show?n("div",{staticClass:"otp-select-as-dropdown__options"},t._l(t.options,(function(e,r){return n("div",{key:r,staticClass:"otp-select-as-dropdown__option",class:{_selected:e.title===t.selected,"_has-subtitle":e.subtitle},on:{click:function(n){return t.select(e)}}},[n("div",{staticClass:"otp-select-as-dropdown__title",class:{_selected:e.title===t.selected}},[t._v(" "+t._s(e.title)+" ")]),e.subtitle?n("div",{staticClass:"otp-select-as-dropdown__subtitle"},[t._v(" "+t._s(e.subtitle)+" ")]):t._e()])})),0):t._e()])},xR=[],SR={value:"",title:"",subtitle:""},PR={name:"SelectAsDropdown",components:{Chevron:ya},model:{prop:"value",event:"input"},props:{value:{type:[String,Number],required:!0},options:{type:Array,required:!0},error:Boolean,disabled:Boolean,placeholder:{type:String,default:""}},data:function(){return{selected:"",show:!1,focused:!1}},computed:{selectedValue:function(){var t=this,e=this.options.find((function(e){return e.value===t.value}));return e||SR},classes:function(){return{_opened:this.show,_disabled:this.disabled,"_has-error":this.error,"_has-value":this.value}}},watch:{selectedValue:{handler:function(){this.updateValue(this.selectedValue)},immediate:!0}},methods:{select:function(t){this.close(),this.updateValue(t)},visibleControl:function(){this.show=!this.show,this.focused=!0},close:function(){this.show=!1,this.focused=!1},updateValue:function(t){this.selected=t.title,this.$emit("input",t.value)}}},jR=PR,ER=(n("89d5"),Object(M["a"])(jR,CR,xR,!1,null,null,null)),RR=ER.exports,$R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"side-page"}},[n("side-page",{attrs:{size:"md","block-background":""},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Укажите адрес вашего магазина ")]},proxy:!0},{key:"default",fn:function(){return[n("form-item",{attrs:{label:"Адрес вашего магазина"}},[n("crm-select",{attrs:{value:t.fields.address,options:t.addresses,size:"lg",placeholder:"Выберите из списка"},on:{select:t.onAddressSelect}})],1),t.fields.address?n("form-item",{attrs:{label:"Адрес интернет-магазина"}},[n("form-input-new",{attrs:{size:"lg",placeholder:"sitemyshop.com",mask:t.mask},model:{value:t.fields.url,callback:function(e){t.$set(t.fields,"url",e)},expression:"fields.url"}})],1):t._e()]},proxy:!0},{key:"buttons",fn:function(){return[t.fields.address?n("otp-button",{on:{click:t.saveAndClose}},[t._v(" Сохранить ")]):t._e()]},proxy:!0},{key:"cancel-button",fn:function(){return[n("div",{on:{click:t.close}},[t._v(" Закрыть ")])]},proxy:!0}])})],1)},TR=[],AR={mask:"\\https://*{+}",placeholder:"",showMaskOnHover:!1,definitions:{"*":{casing:"title"}}},IR=function(){return{address:"",url:""}},DR={name:"AddressEdit",components:{SidePage:Ho,FormItem:it,FormInputNew:At,CrmSelect:Ja,OtpButton:ie},props:{address:{type:String,default:""},url:{type:String,default:""},addresses:{type:Array,required:!0}},data:function(){return{fields:IR(),mask:AR}},computed:{isNew:function(){return!this.address}},created:function(){this.isNew||(this.fields.address=this.address,this.fields.url=this.url)},methods:{close:function(){var t=this.isNew?"back":"close";this.$emit(t)},onAddressSelect:function(t,e){var n=e.url;this.fields.address=t,this.fields.url=n},save:function(){var t=this.fields,e=t.address,n=t.url;this.$emit("save",{address:e,url:n})},saveAndClose:function(){this.save(),this.$emit("close")}}},zR=DR,NR=Object(M["a"])(zR,$R,TR,!1,null,null,null),MR=NR.exports,LR=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.$style.root},[r("div",{class:t.$style["text-holder"]},[t._t("default",[t._v(" "+t._s(t.value)+" ")])],2),r("div",{class:t.$style.icon,on:{click:function(e){return t.$emit("click")}}},[r("img",{attrs:{src:n("6f32")("./"+t.icon+".svg"),alt:"edit",width:"16",height:"16"}})])])},BR=[],FR={name:"EditLink",props:{value:{type:String,default:""},icon:{type:String,default:"edit",validator:function(t){return["edit","trash"].includes(t)}}}},qR=FR,UR=n("96dc");function GR(t){this["$style"]=UR["default"].locals||UR["default"]}var VR=Object(M["a"])(qR,LR,BR,!1,GR,null,null),HR=VR.exports,WR=function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{class:e.$style.root},[r("div",{class:e.$style.title},[e._v(" Товары ")]),e.isAddGoods?[e.hasGoods?e._e():r("div",{class:e.$style.helper},[e._v(" Добавьте товары в форму или мы попросим клиента внести товары самостоятельно при заполнении формы ")]),e.hasGoods?r("goods-list",{attrs:{goods:e.goods},on:{"select-item":e.selectItem,delete:e.deleteGoods}}):e._e(),r("otp-button",{attrs:{design:"outline"},on:{click:function(t){e.showModal=!0}}},[e._v(" Добавить товар ")])]:r("select-as-dropdown",{staticClass:"crm-mt-24",attrs:{options:e.goodsAddingOptions},model:{value:e.goodsVariant,callback:function(t){e.goodsVariant=t},expression:"goodsVariant"}}),r("div",{class:[e.$style["sum-block"],(t={},t[e.$style["has-goods"]]=e.hasGoods,t)]},[e.hasGoods?[e._v(" Сумма заказа: "),r("div",{class:e.$style.sum},[e._v(" "+e._s(e.totalSum)+" ₽ ")])]:e._e()],2),r("div",{class:e.$style.buttons},[e.hasGoods?r("div",{class:e.$style.reset,on:{click:e.clearGoods}},[e._v(" Сбросить ")]):e._e(),r("otp-button",{attrs:{size:"md"},on:{click:function(t){e.step=2}}},[e._v(" "+e._s(e.buttonText)+" ")])],1),e.showModal?r("goods-edit",{attrs:{goods:e.selectedItem},on:{save:e.addGoods,edit:e.editItem,close:e.onClose}}):e._e()],2)},KR=[],YR=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.$style.root},t._l(t.goods,(function(e,a){return r("div",{key:a,class:t.$style.item},[r("div",{class:t.$style.name},[t._v(" "+t._s(a+1)+". "),r("span",{on:{click:function(n){return t.$emit("select-item",e)}}},[t._v(" "+t._s(e.name)+" ")])]),r("div",{class:t.$style.quantity},[t._v(" X"+t._s(e.quantity)+" ")]),r("div",{class:t.$style.price},[t._v(" "+t._s(t.formatPrice(e.price))+" ₽ ")]),r("div",{class:t.$style.delete,on:{click:function(e){return t.$emit("delete",a)}}},[r("img",{attrs:{src:n("af22"),alt:"delete",width:"16",height:"16"}})])])})),0)},ZR=[],QR={name:"GoodsList",props:{goods:{type:Array,required:!0}},methods:{formatPrice:function(t){return ym(t)}}},JR=QR,XR=n("f8f8");function t$(t){this["$style"]=XR["default"].locals||XR["default"]}var e$=Object(M["a"])(JR,YR,ZR,!1,t$,null,null),n$=e$.exports,r$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"side-page"}},[n("side-page",{attrs:{size:"md","block-background":""},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Добавление товара ")]},proxy:!0},{key:"default",fn:function(){return[n("form-item",[n("crm-select",{attrs:{options:t.categories,"model-field":"value",label:"title",placeholder:"Выберите категорию товара",size:"lg",filterable:""},model:{value:t.fields.category,callback:function(e){t.$set(t.fields,"category",e)},expression:"fields.category"}})],1),n("form-item",{attrs:{label:"Наименование товара"}},[n("form-input-new",{attrs:{placeholder:"Samsung Galaxy S21 Ultra",size:"lg"},model:{value:t.fields.name,callback:function(e){t.$set(t.fields,"name",e)},expression:"fields.name"}})],1),n("div",{staticClass:"row"},[n("div",{staticClass:"col-5"},[n("form-item",{attrs:{label:"Цена"}},[n("form-input-new",{attrs:{value:t.fields.price,placeholder:"120 000",size:"lg",mask:t.mask},on:{input:function(e){return t.fields.price=t.formatToNumber(e)}},scopedSlots:t._u([{key:"suffix-with-line",fn:function(){return[t._v(" Руб. ")]},proxy:!0}])})],1)],1),n("div",{staticClass:"col"},[n("form-item",{attrs:{label:"Цена"}},[n("otp-counter",{attrs:{min:1,max:10},model:{value:t.fields.quantity,callback:function(e){t.$set(t.fields,"quantity",e)},expression:"fields.quantity"}})],1)],1)])]},proxy:!0},!t.isNew||t.hasValues?{key:"buttons",fn:function(){return[n("otp-button",{attrs:{design:"outline"},on:{click:t.saveAndReset}},[t._v(" Добавить ещё товар ")]),n("otp-button",{on:{click:t.saveAndClose}},[t._v(" Сохранить ")])]},proxy:!0}:null,{key:"cancel-button",fn:function(){return[n("div",{on:{click:t.close}},[t._v(" Закрыть ")])]},proxy:!0}],null,!0)})],1)},a$=[],o$=function(){return{id:Ua(),category:"",name:"",price:"",quantity:1}},s$={name:"GoodsEdit",components:{SidePage:Ho,OtpButton:ie,FormItem:it,FormInputNew:At,CrmSelect:Ja,OtpCounter:nP},props:{goods:{type:[Object,null],default:null}},data:function(){return{fields:o$(),categories:pa,mask:{alias:"decimal",groupSeparator:" ",autoGroup:!0,rightAlign:!1,allowMinus:!1}}},computed:{isNew:function(){return!this.goods},hasValues:function(){var t=this;return Object.keys(this.fields).every((function(e){return Boolean(t.fields[e])}))}},created:function(){this.setFields()},methods:{close:function(){this.reset(),this.$emit("close")},reset:function(){this.fields=o$()},setFields:function(){this.isNew||(this.fields=Object(De["a"])({},this.goods))},save:function(){var t=this.isNew?"save":"edit";this.$emit(t,this.fields)},saveAndClose:function(){this.save(),this.close()},saveAndReset:function(){this.save(),this.reset()},formatToNumber:function(t){return wm(t)}}},i$=s$,c$=Object(M["a"])(i$,r$,a$,!1,null,null,null),l$=c$.exports,u$=[{value:"goods",title:"Внесу я",subtitle:"Укажите товары, клиенту останется оформить заявку на кредит"},{value:"developer",title:"Разместит разработчик",subtitle:"Кнопка и товары будут автоматически добавлены в карточки товаров"}],d$={name:"Goods",components:{OtpButton:ie,GoodsList:n$,GoodsEdit:l$,SelectAsDropdown:RR},props:{buttonText:{type:String,required:!0},isAddGoods:Boolean},data:function(){return{selectedItem:null,showModal:!1,goodsAddingOptions:u$}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("crmConstructor",{goods:function(t){return t.form.goods}})),Object(Qb["b"])("crmConstructor",{step:"step",goodsVariant:"form.goodsVariant"})),{},{hasGoods:function(){return this.goods.length>0},totalSum:function(){if(!this.hasGoods)return 0;var t=this.goods.reduce((function(t,e){var n=e.price,r=e.quantity;return t+n*r}),0);return ym(t)}}),methods:Object(De["a"])(Object(De["a"])({},Object(Vn["d"])("crmConstructor",["addGoods","editGoods","deleteGoods","clearGoods"])),{},{selectItem:function(t){this.selectedItem=t,this.showModal=!0},editItem:function(t){this.editGoods(t),this.selectedItem=null},onClose:function(){this.showModal=!1,this.selectedItem=null}})},p$=d$,f$=n("1cde");function m$(t){this["$style"]=f$["default"].locals||f$["default"]}var h$=Object(M["a"])(p$,WR,KR,!1,m$,null,null),v$=h$.exports,g$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root,on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)},b$=[],_$={name:"PlusLink"},k$=_$,y$=n("d451");function w$(t){this["$style"]=y$["default"].locals||y$["default"]}var O$=Object(M["a"])(k$,g$,b$,!1,w$,null,null),C$=O$.exports,x$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.$style.root},[t._t("default"),r("img",{attrs:{src:n("af22"),alt:"edit",width:"16",height:"16"},on:{click:function(e){return t.$emit("click")}}})],2)},S$=[],P$={name:"AdditionalWrapper"},j$=P$,E$=n("69c2");function R$(t){this["$style"]=E$["default"].locals||E$["default"]}var $$=Object(M["a"])(j$,x$,S$,!1,R$,null,null),T$=$$.exports,A$=[{name:"Курьерская доставка"},{name:"Самовывоз"}],I$=[{title:"UTM метки",field:"utm"},{title:"Способ получения заказа ",field:"receivingMethod"}],D$={mask:"\\https://*{+}",placeholder:"",showMaskOnHover:!1,definitions:{"*":{casing:"title"}}},z$={name:"StepOne",components:{CrmSelect:Ja,FormItem:it,FormInputNew:At,CrmSelectAsDropdown:RR,Goods:v$,EditLink:HR,PlusLink:C$,AdditionalWrapper:T$,Checkbox:qi,AddressEdit:MR},props:{isPro:Boolean},data:function(){return{creditTypes:fa,urlMask:D$,receivingMethods:A$,additionals:I$,showUtm:!1,showReceivingMethod:!1,showAddressModal:!0}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("crmConstructor",{creditProducts:function(t){return t.creditProducts}})),Object(Qb["b"])("crmConstructor",{address:"form.address",url:"form.url",creditType:"form.creditType",firstPayment:"form.firstPayment",creditProduct:"form.creditProduct",successUrl:"form.successUrl",failUrl:"form.failUrl",receivingMethod:"form.receivingMethod",utm:"form.utm"})),Object(Vn["c"])("crmConstructor",["addresses","addressAndSite"])),created:function(){this.fetchCreditProducts(),this.fetchShops()},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("crmConstructor",["fetchShops","fetchCreditProducts"])),{},{onAddressSave:function(t){var e=t.address,n=t.url;this.address=e,this.url=n},onCloseReceivingMethod:function(){this.showReceivingMethod=!1,this.receivingMethod=""},onCloseUtm:function(){this.showUtm=!1,this.utm=""}})},N$=z$,M$=n("b21e");function L$(t){this["$style"]=M$["default"].locals||M$["default"]}var B$=Object(M["a"])(N$,wR,OR,!1,L$,null,null),F$=B$.exports,q$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("green-block",{staticClass:"crm-mb-24",staticStyle:{"max-width":"496px"}},[n("a",{class:t.$style.link,attrs:{href:t.getUrl,target:"_blank"}},[t._v(" Так ")]),t._v(" будет выглядеть анкета."),n("br"),t._v(" Теперь разместите или отправьте ссылку вашему клиенту. ")]),n("div",{class:t.$style.columns},[n("div",[n("integration-instagram",{attrs:{url:t.getUrl}})],1),n("div",[n("integration-link",{staticClass:"crm-mb-24",attrs:{url:t.getUrl}}),n("integration-qr-code",{attrs:{url:t.getUrl}})],1)])],1)},U$=[],G$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.$style.root,t.$style[t.type]]},[t._t("default")],2)},V$=[],H$={name:"GreenBlock",props:{type:{type:String,default:"default",validator:function(t){return["default","outline"].includes(t)}}}},W$=H$,K$=n("6b2d");function Y$(t){this["$style"]=K$["default"].locals||K$["default"]}var Z$=Object(M["a"])(W$,G$,V$,!1,Y$,null,null),Q$=Z$.exports,J$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("integration-block",{attrs:{title:"Ссылка для профиля Instagram"}},[r("div",{class:t.$style["text-block"]},[r("div",{class:t.$style.text},[r("div",{class:t.$style.row},[r("div",[r("span",{staticClass:"crm-fw-700"},[t._v("А.")]),t._v(" Скопируйте ссылку на анкету ")]),r("copy-button",{attrs:{content:"https://google.com","use-short-link":""}})],1)]),r("div",{class:t.$style.text},[r("span",{staticClass:"crm-fw-700"},[t._v("Б.")]),t._v(' Вставьте её в раздел "Сайт" в настройках профиля Instagram ')])]),r("img",{attrs:{src:n("1e37"),alt:"phone"}})])},X$=[],tT=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[n("div",{class:t.$style.title},[t._v(" "+t._s(t.title)+" "),t._t("title")],2),t._t("default")],2)},eT=[],nT={name:"IntegrationBlock",props:{title:{type:String,default:""}}},rT=nT,aT=n("508a");function oT(t){this["$style"]=aT["default"].locals||aT["default"]}var sT=Object(M["a"])(rT,tT,eT,!1,oT,null,null),iT=sT.exports,cT=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[[n("otp-button",{attrs:{disabled:t.disabled,design:"outline"},on:{click:t.click}},[t._v(" "+t._s(t.disabled?"Скопировано":"Копировать ссылку")+" ")])]],2)},lT=[],uT={name:"CopyButton",components:{OtpButton:ie},props:{content:{type:String,default:""},useShortLink:Boolean},data:function(){return{disabled:!1,shortLink:""}},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("crmConstructor",["generateShortLink"])),{},{createShortLink:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.generateShortLink();case 3:n=e.sent,r=n.shortLink,t.shortLink=r,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.shortLink=t.content;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},copy:function(){this.useShortLink?Sc(this.shortLink):Sc(this.content),this.toggleButton(),this.$emit("copy")},toggleButton:function(){var t=this;this.disabled=!0,setTimeout((function(){t.disabled=!1}),1500)},click:function(){var t=this;return Object(Gn["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.useShortLink){e.next=3;break}return e.next=3,t.createShortLink();case 3:t.copy();case 4:case"end":return e.stop()}}),e)})))()}})},dT=uT,pT=n("16bf");function fT(t){this["$style"]=pT["default"].locals||pT["default"]}var mT=Object(M["a"])(dT,cT,lT,!1,fT,null,null),hT=mT.exports,vT={name:"IntegrationInstagram",components:{IntegrationBlock:iT,CopyButton:hT},props:{url:{type:String,default:""}}},gT=vT,bT=n("6e62");function _T(t){this["$style"]=bT["default"].locals||bT["default"]}var kT=Object(M["a"])(gT,J$,X$,!1,_T,null,null),yT=kT.exports,wT=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("integration-block",{scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{class:t.$style.title},[t._v(" Ссылка для отправки "),n("integration-link-icons")],1)]},proxy:!0},{key:"default",fn:function(){return[n("div",{class:t.$style.text},[t._v(" Её можно отправить клиенту в мессенджере или в социальных сетях. Также вы можете интегрировать ссылку в конструктор сайтов (например Wix или Tilda) ")]),n("div",{class:t.$style.button},[n("copy-button",{attrs:{content:"https://yandex.ru","use-short-link":""}})],1)]},proxy:!0}])})},OT=[],CT=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},t._l(t.icons,(function(t,e){return n(t.name,{key:e,tag:"component"})})),1)},xT=[],ST=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"12",height:"21",viewBox:"0 0 12 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M10.431 11.723l.579-3.772H7.39V5.505c0-1.032.505-2.039 2.126-2.039h1.647V.255S9.669 0 8.242 0C5.26 0 3.313 1.807 3.313 5.077V7.95H0v3.772h3.313v9.119c.665.105 1.346.158 2.039.158.693 0 1.374-.053 2.039-.158v-9.119h3.04z",fill:"#000"}})])},PT=[],jT={name:"IconFacebook"},ET=jT,RT=Object(M["a"])(ET,ST,PT,!1,null,null,null),$T=RT.exports,TT=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"23",height:"14",viewBox:"0 0 23 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22.343.94c.17-.53 0-.916-.751-.916h-2.496c-.63 0-.921.338-1.09.7 0 0-1.285 3.088-3.079 5.09-.581.58-.848.773-1.163.773-.17 0-.387-.193-.387-.724V.917c0-.627-.194-.917-.727-.917H8.724c-.388 0-.63.29-.63.58 0 .602.896.747.993 2.436v3.667c0 .796-.145.941-.46.941-.848 0-2.908-3.112-4.144-6.659C4.241.265 3.998 0 3.368 0H.848C.121 0 0 .338 0 .7c0 .651.848 3.932 3.95 8.275 2.06 2.968 4.992 4.56 7.633 4.56 1.6 0 1.794-.362 1.794-.965v-2.244c0-.724.145-.844.654-.844.363 0 1.018.193 2.496 1.616 1.696 1.69 1.987 2.461 2.932 2.461h2.496c.727 0 1.066-.362.873-1.061-.219-.7-1.043-1.713-2.109-2.92-.581-.675-1.454-1.423-1.72-1.785-.364-.483-.267-.676 0-1.11-.024 0 3.029-4.294 3.344-5.742z",fill:"#000"}})])},AT=[],IT={name:"IconVk"},DT=IT,zT=Object(M["a"])(DT,TT,AT,!1,null,null,null),NT=zT.exports,MT=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.989 21.811c-1.825 0-3.618-.458-5.21-1.327L0 22l1.547-5.65A10.882 10.882 0 01.09 10.9C.094 4.89 4.984 0 10.993 0a10.83 10.83 0 017.712 3.197 10.835 10.835 0 013.19 7.712c-.003 6.01-4.891 10.9-10.902 10.902h-.004zm-4.94-3.304l.33.196a9.047 9.047 0 004.612 1.263H11.023c4.994 0 9.03-4.064 9.033-9.06 0-2.422-.941-4.698-2.652-6.41a9 9 0 00-6.406-2.658c-4.998 0-9.062 4.064-9.064 9.06a9.04 9.04 0 001.385 4.822l.215.343-.915 3.344 3.43-.9zm10.067-5.252c.19.092.318.154.373.246.068.113.068.659-.16 1.295-.226.636-1.315 1.217-1.838 1.295-.47.07-1.063.1-1.716-.108a15.648 15.648 0 01-1.552-.574c-2.554-1.102-4.28-3.577-4.606-4.045a3.183 3.183 0 00-.048-.068l-.002-.003c-.144-.192-1.11-1.48-1.11-2.814 0-1.255.616-1.913.9-2.216.02-.02.037-.04.053-.057a1 1 0 01.727-.34 10.821 10.821 0 01.583.01c.159-.001.356-.002.552.466l.3.73c.235.571.494 1.202.54 1.293.068.136.113.295.022.477l-.038.078c-.068.14-.118.242-.234.377-.046.053-.093.11-.14.167a4.51 4.51 0 01-.269.31c-.136.136-.278.283-.12.556.16.272.706 1.165 1.516 1.887a7.035 7.035 0 002.01 1.27c.076.033.136.06.18.082.273.136.432.113.59-.068.16-.182.682-.796.863-1.069.182-.272.364-.227.613-.136.25.091 1.59.75 1.861.886l.15.073z",fill:"#000"}})])},LT=[],BT={name:"IconWhatsapp"},FT=BT,qT=Object(M["a"])(FT,MT,LT,!1,null,null,null),UT=qT.exports,GT=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"24",height:"17",viewBox:"0 0 24 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M2.467 16C1.657 16 1 15.328 1 14.5v-12C1 1.672 1.657 1 2.467 1h19.066C22.343 1 23 1.672 23 2.5v12c0 .828-.657 1.5-1.467 1.5H2.467zM16 7l4 4M8 7l-4 4",stroke:"#000","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M22 2l-8.753 6.573c-.823.57-1.911.57-2.734 0L2 2",stroke:"#000","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"}})])},VT=[],HT={name:"IconMail"},WT=HT,KT=Object(M["a"])(WT,GT,VT,!1,null,null,null),YT=KT.exports,ZT=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"21",height:"21",viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.5 0C7.65 0 7.292.012 6.172.063c-1.117.052-1.88.229-2.548.488a5.141 5.141 0 00-1.86 1.211A5.154 5.154 0 00.55 3.622C.291 4.29.114 5.052.063 6.17.013 7.29 0 7.648 0 10.5c0 2.852.013 3.208.063 4.328.052 1.118.229 1.881.488 2.549.269.69.627 1.276 1.211 1.86a5.14 5.14 0 001.86 1.212c.668.26 1.43.436 2.548.488 1.12.05 1.478.063 4.33.063 2.851 0 3.208-.012 4.328-.063 1.118-.052 1.882-.229 2.55-.488a5.138 5.138 0 001.859-1.212 5.155 5.155 0 001.212-1.86c.258-.668.435-1.431.487-2.548.05-1.12.064-1.477.064-4.329 0-2.852-.013-3.21-.064-4.33-.052-1.117-.23-1.88-.488-2.548a5.153 5.153 0 00-1.211-1.86 5.133 5.133 0 00-1.86-1.21c-.67-.26-1.432-.437-2.55-.489C13.707.013 13.35 0 10.497 0h.004zm-.348 1.891h.35c2.804 0 3.136.01 4.243.06 1.024.047 1.58.219 1.95.362.49.19.839.418 1.206.786.368.367.595.717.786 1.207.144.37.315.925.361 1.95.05 1.106.062 1.438.062 4.24 0 2.803-.011 3.135-.061 4.242-.047 1.024-.218 1.58-.362 1.95-.19.49-.418.838-.786 1.206a3.247 3.247 0 01-1.206.785c-.37.144-.926.315-1.95.362-1.107.05-1.44.06-4.243.06-2.804 0-3.136-.01-4.243-.06-1.023-.048-1.58-.219-1.95-.362-.49-.19-.84-.418-1.207-.786a3.254 3.254 0 01-.786-1.207c-.143-.37-.315-.925-.361-1.949-.05-1.107-.06-1.439-.06-4.243 0-2.804.01-3.135.06-4.241.047-1.024.218-1.58.361-1.95.19-.49.419-.84.786-1.208A3.259 3.259 0 014.31 2.31c.37-.145.926-.315 1.95-.362.968-.044 1.343-.057 3.3-.06v.003h.592zm4.693 3.005a1.26 1.26 0 112.52 0 1.26 1.26 0 01-2.52 0zm-4.344.211a5.392 5.392 0 10.001 10.785 5.392 5.392 0 000-10.785zm3.503 5.393a3.5 3.5 0 10-7 0 3.5 3.5 0 007 0z",fill:"#000"}})])},QT=[],JT={name:"IconInstagram"},XT=JT,tA=Object(M["a"])(XT,ZT,QT,!1,null,null,null),eA=tA.exports,nA={name:"IntegrationLinkIcons",components:Object(De["a"])({},o),computed:{icons:function(){return o}}},rA=nA,aA=n("f13e");function oA(t){this["$style"]=aA["default"].locals||aA["default"]}var sA=Object(M["a"])(rA,CT,xT,!1,oA,null,null),iA=sA.exports,cA={name:"IntegrationLink",components:{IntegrationBlock:iT,IntegrationLinkIcons:iA,CopyButton:hT},props:{url:{type:String,default:""}}},lA=cA,uA=n("56e7");function dA(t){this["$style"]=uA["default"].locals||uA["default"]}var pA=Object(M["a"])(lA,wT,OT,!1,dA,null,null),fA=pA.exports,mA=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("integration-block",{attrs:{title:"QR код "}},[n("div",{class:t.$style.text},[t._v(" можно разместить как на сайте, так и на бумажных носителях в точках продаж, чтобы клиент смог быстро перейти к заполнению анкеты ")]),n("div",{class:t.$style.row},[n("div",{class:t.$style["qrcode-container"]},[n("qrcode",{ref:"qrcode",attrs:{tag:"img",value:t.url,options:{width:223}}})],1),n("div",{class:t.$style.links},[n("update-button",{ref:"download",staticClass:"crm-mb-16",attrs:{value:t.url,icon:"download",tag:"a",download:""},on:{click:t.download}},[t._v(" Скачать png ")]),n("update-button",{attrs:{icon:"copy"},on:{click:t.copy}},[t._v(" Копировать ссылку ")])],1)])])},hA=[],vA={name:"IntegrationQrCode",components:{IntegrationBlock:iT,UpdateButton:ra},props:{url:{type:String,default:""}},methods:{copy:function(){Sc(this.url),this.$emit("copy")},download:function(){var t=this.$refs.qrcode,e=this.$refs.download;e.$el.href=t.$el.src}}},gA=vA,bA=n("51bb");function _A(t){this["$style"]=bA["default"].locals||bA["default"]}var kA=Object(M["a"])(gA,mA,hA,!1,_A,null,null),yA=kA.exports,wA={name:"StepTwo",components:{GreenBlock:Q$,IntegrationInstagram:yT,IntegrationLink:fA,IntegrationQrCode:yA},computed:Object(De["a"])({},Object(Vn["c"])("crmConstructor",["getUrl"]))},OA=wA,CA=n("1034");function xA(t){this["$style"]=CA["default"].locals||CA["default"]}var SA=Object(M["a"])(OA,q$,U$,!1,xA,null,null),PA=SA.exports,jA={name:"CreateLink",components:{NavBack:hp,Breadcrumbs:vi,ScenarioWrapper:yR,OtpSwitcher:lp,StepOne:F$,StepTwo:PA,ProModeIcon:fR},data:function(){return{isPro:!1}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("crmConstructor",{address:function(t){return t.form.address}})),Object(Qb["b"])("crmConstructor",["step"])),{},{stepOne:function(){return 1===this.step},stepTwo:function(){return 2===this.step},title:function(){return this.stepOne?"Формирование ссылки на анкету":"Ссылка на анкету готова"}}),beforeDestroy:function(){this.step=1},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["d"])("crmConstructor",["resetProModeFields"])),{},{onClickProMode:function(t){t||this.resetProModeFields(),this.isPro=t}})},EA=jA,RA=Object(M["a"])(EA,JE,XE,!1,null,null,null),$A=RA.exports,TA=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("scenario-wrapper",{scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[t.stepOne?n("breadcrumbs"):t._e(),t.stepTwo?n("nav-back",{staticStyle:{height:"22px"},on:{click:function(e){t.step=1}}}):t._e()]},proxy:!0},{key:"step",fn:function(){return[t._v(" Шаг "+t._s(t.step)+" из 2 ")]},proxy:!0},{key:"title",fn:function(){return[t._v(" "+t._s(t.title)+" ")]},proxy:!0},{key:"activator",fn:function(){return[t.address&&t.stepOne?n("otp-switcher",{attrs:{checked:t.isPro,"text-position":"left",theme:"primary"},on:{change:t.onClickProMode}},[n("pro-mode-icon",[t._v(" PRO режим ")])],1):t._e()]},proxy:!0},{key:"default",fn:function(){return[n("keep-alive",[t.stepOne?n("step-one",{attrs:{"is-pro":t.isPro}}):t._e(),t.stepTwo?n("step-two"):t._e()],1)]},proxy:!0}])})},AA=[],IA=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[t.address?n("div",{staticClass:"row crm-mb-16"},[n("div",{staticClass:"col-5"},[n("edit-link",{attrs:{value:t.addressAndSite},on:{click:function(e){t.showAddressModal=!0}}})],1)]):t._e(),n("div",{staticClass:"row crm-mb-24"},[n("div",{staticClass:"col-5"},[t.fileName?n("edit-link",{attrs:{value:t.fileName,icon:"trash"},on:{click:t.deleteFile}}):n("otp-button",{attrs:{design:"outline",wide:""},on:{click:function(e){t.showGoodsUploadModal=!0}}},[t._v(" На 20% поднять уровень одобрения заявок ")])],1)]),n("div",{staticClass:"row crm-mb-24"},[n("div",{staticClass:"col-5"},[n("form-item",{attrs:{label:"Тип кредитования для клиента"}},[n("select-as-dropdown",{attrs:{options:t.creditTypes},model:{value:t.creditType,callback:function(e){t.creditType=e},expression:"creditType"}})],1)],1),t.isPro?n("div",{staticClass:"col-5"},[n("form-item",{attrs:{label:"Этот кредитный продукт будет указан для клиента первым "}},[n("select-as-dropdown",{attrs:{options:t.creditProducts,placeholder:"Выберите из списка"},model:{value:t.creditProduct,callback:function(e){t.creditProduct=e},expression:"creditProduct"}})],1)],1):t._e()]),n("otp-checkbox",{staticClass:"crm-mb-24",attrs:{title:"Клиент сможет внести первоначальный взнос"},model:{value:t.firstPayment,callback:function(e){t.firstPayment=e},expression:"firstPayment"}}),t.isPro?[n("div",{staticClass:"row crm-mb-24"},[n("div",{staticClass:"col-5"},[n("form-item",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" После "),n("strong",[t._v("одобрения")]),t._v(" заявки клиент будет направлен по этому адресу ")]},proxy:!0},{key:"default",fn:function(){return[n("form-input-new",{attrs:{size:"lg",placeholder:"sitemyshop.com ",mask:t.urlMask},model:{value:t.successUrl,callback:function(e){t.successUrl=e},expression:"successUrl"}})]},proxy:!0}],null,!1,3972022274)})],1),n("div",{staticClass:"col-5"},[n("form-item",{scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" Адрес для перехода в случае "),n("strong",[t._v("отказа")]),t._v(" в кредите ")]},proxy:!0},{key:"default",fn:function(){return[n("form-input-new",{attrs:{size:"lg",placeholder:"sitemyshop.com ",mask:t.urlMask},model:{value:t.failUrl,callback:function(e){t.failUrl=e},expression:"failUrl"}})]},proxy:!0}],null,!1,770387996)})],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-5"},[t.showUtm?t._e():n("plus-link",{staticClass:"crm-mb-16",on:{click:function(e){t.showUtm=!0}}},[t._v(" UTM метки ")]),t.showUtm?n("form-item",{staticClass:"crm-mb-24",attrs:{label:"UTM метка для отслеживания продуктовых метрик"}},[n("additional-wrapper",{on:{click:t.onCloseUtm}},[n("form-input-new",{attrs:{size:"lg",placeholder:"utm_campaign"},model:{value:t.utm,callback:function(e){t.utm=e},expression:"utm"}})],1)],1):t._e()],1)])]:t._e(),n("div",{staticClass:"row"},[n("div",{staticClass:"col-5"},[n("div",{class:t.$style.goods},[n("goods",{attrs:{"button-text":"Создать кнопку"}})],1)])]),t.showAddressModal?n("address-edit",{attrs:{address:t.address,url:t.url,addresses:t.addresses},on:{back:function(e){return t.$router.push({name:"constructor"})},close:function(e){t.showAddressModal=!1},save:t.onAddressSave}}):t._e(),t.showGoodsUploadModal?n("goods-upload",{on:{uploaded:function(e){return t.fileName=e},close:function(e){t.showGoodsUploadModal=!1}}}):t._e()],2)},DA=[],zA=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("portal",{attrs:{to:"side-page"}},[n("side-page",{attrs:{size:"md","block-background":""},on:{close:t.close},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" Загрузка товарного каталога ")]},proxy:!0},{key:"default",fn:function(){return[n("div",{class:t.$style.root},[n("div",{class:t.$style["text-1"]},[t._v(" Чтобы ваши клиенты чаще получали кредит на покупку, а заполнение заявки на кредит было максимально быстрым — загрузите каталог ваших товаров на платформу. ")]),n("div",{class:t.$style["rules-title"]},[t._v(" Важно учесть! ")]),n("ul",{class:t.$style.rules},[n("li",[t._v("расширение документа .xslx")]),n("li",[t._v("все товары должны быть размещены в первой колонке")]),n("li",[t._v("максимальный размер документа 10МБ")])]),n("div",{class:t.$style["upload-block"]},[t.loading?n("div",{class:t.$style.row},[n("otp-loading"),n("div",{class:t.$style["upload-text"]},[t._v(" Загружаем каталог."),n("br"),t._v(" Обычно занимает не более 2х секунд ")])],1):n("otp-file-upload-button",{attrs:{accept:".xls, .xlsx"},on:{change:t.upload}},[t._v(" Загрузить каталог товаров ")])],1)])]},proxy:!0},{key:"cancel-button",fn:function(){return[n("div",{on:{click:t.close}},[t._v(" Закрыть ")])]},proxy:!0}])})],1)},NA=[],MA=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{class:t.$style.root},[n("input",{class:t.$style.input,attrs:{tabindex:"-1",type:"file",accept:t.accept},on:{change:function(e){return t.$emit("change",e.target.files)}}}),t._t("default")],2)},LA=[],BA={name:"OtpFileUploadButton",props:{accept:{type:String,default:""}}},FA=BA,qA=n("0d3f");function UA(t){this["$style"]=qA["default"].locals||qA["default"]}var GA=Object(M["a"])(FA,MA,LA,!1,UA,null,null),VA=GA.exports,HA={name:"GoodsUpload",components:{SidePage:Ho,OtpLoading:hw,OtpFileUploadButton:VA},data:function(){return{loading:!1}},methods:{close:function(){this.$emit("close")},upload:function(t){var e=this,n=t[0];this.loading=!0,setTimeout((function(){e.loading=!1,e.$emit("uploaded",n.name),e.close()}),2e3)}}},WA=HA,KA=n("7531");function YA(t){this["$style"]=KA["default"].locals||KA["default"]}var ZA=Object(M["a"])(WA,zA,NA,!1,YA,null,null),QA=ZA.exports,JA={name:"StepOne",components:{EditLink:HR,OtpButton:ie,AddressEdit:MR,FormItem:it,FormInputNew:At,SelectAsDropdown:RR,OtpCheckbox:qi,GoodsUpload:QA,Goods:v$,PlusLink:C$,AdditionalWrapper:T$},props:{isPro:Boolean},data:function(){var t={mask:"\\https://*{+}",placeholder:"",showMaskOnHover:!1,definitions:{"*":{casing:"title"}}};return{showAddressModal:!0,showGoodsUploadModal:!1,creditTypes:fa,urlMask:t,showUtm:!1}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("crmConstructor",{creditProducts:function(t){return t.creditProducts}})),Object(Vn["c"])("crmConstructor",["addresses","addressAndSite"])),Object(Qb["b"])("crmConstructor",{address:"form.address",url:"form.url",successUrl:"form.successUrl",failUrl:"form.failUrl",creditType:"form.creditType",creditProduct:"form.creditProduct",firstPayment:"form.firstPayment",fileName:"form.fileName",utm:"form.utm"})),created:function(){this.fetchCreditProducts(),this.fetchShops()},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["b"])("crmConstructor",["fetchShops","fetchCreditProducts"])),{},{onAddressSave:function(t){var e=t.address,n=t.url;this.address=e,this.url=n},deleteFile:function(){this.fileName=""},onCloseUtm:function(){this.showUtm=!1,this.utm=""}})},XA=JA,tI=n("49f8");function eI(t){this["$style"]=tI["default"].locals||tI["default"]}var nI=Object(M["a"])(XA,IA,DA,!1,eI,null,null),rI=nI.exports,aI=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.$style.root},[r("div",{class:t.$style.example},[r("a",{class:t.$style["example-button"],attrs:{href:t.getUrl,target:"_blank"}},[t._v(" Купить в кредит ")]),r("div",{class:t.$style["example-text"]},[t._v(" Так будет выглядить кнопка для ваших клиентов. "),r("br"),t._v(" По клику вы увидете форму заявки на покупку в кредит ")])]),r("div",{class:t.$style.variants},[r("div",{class:t.$style["variants-title"]},[t._v(" Варианты размещения кнопки: ")]),r("ul",{class:t.$style["variants-list"]},[r("li",[t._v('1. В карточке товара рядом с кнопкой "Купить";')]),r("li",[t._v("2. В корзине или в Способах оплаты.")])])]),r("green-block",{class:t.$style["green-block"],attrs:{type:"outline"}},[t._v(" Скопируйте ссылку на инструкцию → "),r("img",{class:t.$style["copy-img"],attrs:{src:n("5b64"),alt:"copy"}}),t._v(" и передайте разработчику для размещения кнопки на сайте магазина ")]),r("div",{class:t.$style["codes-block"]},[r("div",{class:t.$style["code-title"]},[t._v(" Установка кнопки с помощью скрипта ")]),r("code-block",{staticClass:"crm-mb-24",attrs:{caption:"1. Подключите скрипт",code:t.getUrl}}),r("code-block",{attrs:{caption:"2. Вставьте код кнопки в html-код сайта",code:t.getUrl}})],1),r("constructor-table",{staticClass:"crm-mb-32",attrs:{title:"Конфигурация",headers:t.headers,items:t.params}}),r("constructor-table",{attrs:{title:"Список товаров",description:"Для добавления товара заполните параметр items",headers:t.headers,items:t.products}})],1)},oI=[],sI=function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{class:e.$style.root},[r("div",{class:e.$style["title-block"]},[r("div",{class:[[e.$style.title],(t={},t[e.$style["has-description"]]=!!e.description,t)]},[e._v(" "+e._s(e.title)+" ")]),e.description?r("div",{class:e.$style.description},[e._v(" "+e._s(e.description)+" ")]):e._e()]),r("div",{class:e.$style.wrapper},[r("table",{class:e.$style.table},[r("thead",{class:e.$style.thead},[r("tr",e._l(e.headers,(function(t,n){return r("th",{key:n},[e._v(" "+e._s(t.text)+" ")])})),0)]),r("tbody",{class:e.$style.tbody},e._l(e.items,(function(t,n){return r("tr",{key:n},[r("td",[e._v(" "+e._s(t.name)+" ")]),r("td",{domProps:{innerHTML:e._s(t.description)}}),r("td",[t.required?r("div",{class:e.$style.icon},[r("icon-check")],1):e._e()]),r("td",[e._v(" "+e._s(t.type)+" ")])])})),0)])])])},iI=[],cI=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M2 11.5714L9.27273 19L22 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},lI=[],uI={name:"CheckIcon"},dI=uI,pI=Object(M["a"])(dI,cI,lI,!1,null,null,null),fI=pI.exports,mI={name:"ConstructorTable",components:{IconCheck:fI},props:{headers:{type:Array,default:function(){return[]}},items:{type:Array,default:function(){return[]}},title:{type:String,default:""},description:{type:String,default:""}}},hI=mI,vI=n("a7e1");function gI(t){this["$style"]=vI["default"].locals||vI["default"]}var bI=Object(M["a"])(hI,sI,iI,!1,gI,null,null),_I=bI.exports,kI=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.root},[t.caption?n("div",{class:t.$style.caption},[t._v(" "+t._s(t.caption)+" ")]):t._e(),n("div",{class:t.$style.code},[n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:t.code,expression:"code"}]},[n("code",{staticClass:"javascript"})]),n("copy2",{class:t.$style.icon,attrs:{width:"16",height:"16"},nativeOn:{click:function(e){return t.copy(e)}}})],1)])},yI=[],wI=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"clip-rule":"evenodd",d:"M16.125 21.106c0 .774-.616 1.4-1.375 1.4H5.125c-.76 0-1.375-.626-1.375-1.4V8.502c0-.773.616-1.4 1.375-1.4h6.993c.365 0 .714.147.972.41l2.633 2.68c.257.263.402.62.402.99v9.924z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),n("path",{attrs:{d:"M7.875 7.102V2.9c0-.773.616-1.4 1.375-1.4h6.993c.365 0 .714.147.972.41l2.633 2.681c.257.263.402.619.402.99v9.924c0 .773-.616 1.4-1.375 1.4h-2.75",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},OI=[],CI={name:"Copy2"},xI=CI,SI=Object(M["a"])(xI,wI,OI,!1,null,null,null),PI=SI.exports,jI={name:"CodeBlock",components:{Copy2:PI},props:{caption:{type:String,default:""},code:{type:String,default:""}},methods:{copy:function(){Sc(this.code)}}},EI=jI,RI=n("fadc");function $I(t){this["$style"]=RI["default"].locals||RI["default"]}var TI=Object(M["a"])(EI,kI,yI,!1,$I,null,null),AI=TI.exports,II=[{text:"Параметр"},{text:"Описание"},{text:"Обязательно"},{text:"Тип"}],DI=[{name:"view",description:"Открывать в модальном окне или в новой вкладке",required:!0,type:"string"},{name:"accessID",description:"Уникальный идентификатор магазина (ТО), на реквизиты которой будут перечислены денежные средства. ID можно уточнить у куратора Банка",required:!0,type:"string"},{name:"tradeID",description:"Уникальный идентификатор торговой точки (ТТ). ID можно уточнить у куратора Банка",required:!0,type:"string"},{name:"creditFirstPaymentFrom",description:"Минимальный первоначальный взнос (в % от суммы кредита)",required:!1,type:"string"},{name:"creditFirstPaymentTo",description:"Максимальный первоначальный взнос (в % от суммы кредита)",required:!1,type:"string"},{name:"creditTermFrom",description:"Минимальный срок кредита (месяцев)",required:!1,type:"string"},{name:"creditTermTo",description:"Максимальный срок кредита (месяцев)",required:!1,type:"string"},{name:"creditType",description:'Отвечает за отображение параметров Кредит/Рассрочка.<br>"0" — клиенту доступны оба варианта,<br>"1" — доступен только вариант "Кредит",<br>"2" — доступен только вариант "Рассрочка".',required:!1,type:"string"},{name:"items",description:"Массив из товаров. Параметры поля item в следующей таблице",required:!1,type:"array"}],zI=[{name:"name",description:"Название товара",required:!0,type:"string"},{name:"price",description:"Цена товара",required:!0,type:"string"},{name:"count",description:"Количество единиц товаров",required:!0,type:"string"}],NI={name:"StepTwo",components:{ConstructorTable:_I,GreenBlock:Q$,CodeBlock:AI},data:function(){return{headers:II,params:DI,products:zI}},computed:Object(De["a"])({},Object(Vn["c"])("crmConstructor",["getUrl"]))},MI=NI,LI=n("9955");function BI(t){this["$style"]=LI["default"].locals||LI["default"]}var FI=Object(M["a"])(MI,aI,oI,!1,BI,null,null),qI=FI.exports,UI={name:"CreateButton",components:{NavBack:hp,Breadcrumbs:vi,ScenarioWrapper:yR,OtpSwitcher:lp,StepOne:rI,StepTwo:qI,ProModeIcon:fR},data:function(){return{isPro:!1}},computed:Object(De["a"])(Object(De["a"])(Object(De["a"])({},Object(Vn["e"])("crmConstructor",{address:function(t){return t.form.address}})),Object(Qb["b"])("crmConstructor",["step"])),{},{stepOne:function(){return 1===this.step},stepTwo:function(){return 2===this.step},title:function(){return this.stepOne?"Настройка кнопки":"Подключение кнопки"}}),beforeDestroy:function(){this.step=1},methods:Object(De["a"])(Object(De["a"])({},Object(Vn["d"])("crmConstructor",["resetProModeFields"])),{},{onClickProMode:function(t){t||this.resetProModeFields(),this.isPro=t}})},GI=UI,VI=Object(M["a"])(GI,TA,AA,!1,null,null,null),HI=VI.exports;s["default"].use(W["a"]);var WI=[{path:"/change-password",name:"changePassword",component:ke},{path:"/",name:"home",component:Fn},{path:"/organizations",name:"organizations",component:ti},{path:"/users",name:"users",component:mh},{path:"/shops",name:"shops",component:Bj},{path:"/add-user",name:"AddUser",component:Uv,meta:{breadcrumb:[{caption:"Пользователи",name:"users"},{caption:"Добавление пользователя"}]}},{path:"/users/:id(\\d+)",name:"user",component:fg,meta:{breadcrumb:[{caption:"Пользователи",name:"users"},{caption:"Карточка пользователя"}]}},{path:"/organizations/:id(\\d+)",name:"organization",component:Fd,meta:{breadcrumb:[{caption:"Торговые организации",name:"organizations"},{caption:"Карточка ТО"}]}},{path:"/organizations/:id/edit-credit-products",name:"organizationEditCreditProducts",component:kp,meta:{breadcrumb:[{caption:"Торговые организации",name:"organizations"},{caption:"Карточка ТО",name:"organization",id:!0},{caption:"Список кредитных продуктов"}]}},{path:"/organizations/:id/edit-additional-products",name:"organizationEditAdditionalProducts",component:Tp,props:!0,meta:{breadcrumb:[{caption:"Торговые организации",name:"organizations"},{caption:"Карточка ТО",name:"organization",id:!0},{caption:"Список доп. продуктов"}]}},{path:"/products",name:"creditProducts",component:mf},{path:"/products/:id",name:"creditProduct",component:qf,meta:{breadcrumb:[{caption:"Кредитные продукты",name:"creditProducts"},{caption:"Карточка продукта"}]}},{path:"/products/:id/connected-to",name:"creditProductAddTo",component:Yf,meta:{breadcrumb:[{caption:"Кредитные продукты",name:"creditProducts"},{caption:"Карточка продукта",name:"creditProduct",id:!0},{caption:"Список торговых организаций"}]}},{path:"/additional-products",name:"additionalProducts",component:vm},{path:"/additional-products/:id",name:"additionalProduct",component:Km,meta:{breadcrumb:[{caption:"Доп. продукты и услуги",name:"additionalProducts"},{caption:"Карточка доп.продукта"}]}},{path:"/additional-products/:id/connected-to",name:"additionalProductAddTo",component:sh,props:!0,meta:{breadcrumb:[{caption:"Доп. продукты и услуги",name:"additionalProducts"},{caption:"Карточка доп. продукта",name:"additionalProduct",id:!0},{caption:"Список торговых организаций"}]}},{path:"/requests",name:"requests",component:Bg},{path:"/request/:id",name:"request",component:MO,meta:{breadcrumb:[{caption:"Заявки на кредит",name:"requests"},{caption:"Карточка заявки"}]}},{path:"/constructor",name:"constructor",component:QE},{path:"/constructor/create-link",name:"create-link",component:$A,meta:{breadcrumb:[{caption:"Выбор сценария",name:"constructor"},{caption:"Ссылка на анкету"}]}},{path:"/constructor/create-button",name:"create-button",component:HI,meta:{breadcrumb:[{caption:"Выбор сценария",name:"constructor"},{caption:"Кнопка «Купить в кредит»"}]}}].concat(Object(H["a"])($j)),KI=new W["a"]({mode:"history",base:"/crm-poc/",routes:WI}),YI=KI,ZI={agentLimitedAccess:"Агент (ограниченный доступ ТО)",agentFullAccess:"Агент (полный доступ ТО)",agentBank:"Агент (сотрудник Банка)",admin:"Администратор",adminTo:"Администратор ТО",kuratorTt:"Куратор ТТ",kuratorFacilities:"Куратор сети",registrator:"Регистратор",callCenterEmployee:"Сотрудник колцентра"},QI={name:"FieldsListProvider",props:{userRole:String},computed:{fieldsList:function(){var t=this.userRole,e=[],n={label:"Прикрепляемые ТО",type:"select",placeholder:"Выберите из списка"},r={label:"Прикрепляемые ТT",type:"select",placeholder:"Выберите из списка"},a={label:"Прикрепляемые ККО",type:"select",placeholder:"Выберите из списка"},o={name:"fio",label:"ФИО сотрудника",type:"input",placeholder:"Иванов Константин Петрович"},s={name:"login",label:"Логин",type:"input",placeholder:"konstantinopolskaiak"},i={name:"birthdate",label:"Дата рождения",type:"date",placeholder:"27/07/1988"},c={name:"email",label:"E-mail",type:"input",placeholder:"surnamename@otpbank.ru"},l={name:"phone",label:"Телефон",type:"input",placeholder:"+7 (987) 654 32 10"},u=[n,o,s,i,c,l],d=[o,s,i,c,l],p=[o,s,i,c,l],f=[o,s,i,c,l],m=[o,s,i,c,l],h=[o,s,i,c,l],v=[a,o,s,i,c,l],g=[a,n,r,o,s,i,c,l],b=[a,n,r,o,i,c,l];switch(t){case ZI.registrator:e.push.apply(e,p);break;case ZI.adminTo:e.push.apply(e,u);break;case ZI.admin:e.push.apply(e,d);break;case ZI.kuratorTt:e.push.apply(e,f);break;case ZI.kuratorFacilities:e.push.apply(e,m);break;case ZI.callCenterEmployee:e.push.apply(e,h);break;case ZI.agentBank:e.push.apply(e,v);break;case ZI.agentFullAccess:e.push.apply(e,g);break;case ZI.agentLimitedAccess:e.push.apply(e,b);break;default:return e}return e}},render:function(){return this.$scopedSlots.default({fieldsList:this.fieldsList})}};s["default"].component(QI.name,QI);var JI=n("7699").default;s["default"].component("tippy",C["a"]),s["default"].component(S.a.name,S.a),s["default"].use(y.a),s["default"].use(O.a),s["default"].use(C["b"],{directive:"tippy",flipDuration:0,popperOptions:{modifiers:{preventOverflow:{enabled:!1},hide:{enabled:!1}}},arrow:!0,arrowType:"round"}),s["default"].use(JI),s["default"].use(j.a),s["default"].config.productionTip=!1,s["default"].use(R.a,{init:{onLoad:"login-required"},config:{url:"https://kc.lending.isb:8443/auth",clientId:"fedor-test",realm:"demo"},onReady:function(t){t.updateToken(70).then((function(){var e=t.token,n=t.refreshToken;_.updateCredentials({token:e,refreshToken:n})})),new s["default"]({router:YI,store:d_,render:function(t){return t(V)}}).$mount("#app"),setInterval((function(){t.updateToken(70).then((function(){var e=t.token,n=t.refreshToken;_.updateCredentials({token:e,refreshToken:n})}))}),6e4)}})},"56e7":function(t,e,n){"use strict";var r=n("66be"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"56f1":function(t,e,n){"use strict";n("1571")},5730:function(t,e,n){t.exports=n.p+"img/pdf.9a5598ee.svg"},"59b2":function(t,e,n){"use strict";n("26f6")},"5a81":function(t,e,n){"use strict";var r=n("1dcb"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"5aa3":function(t,e,n){t.exports={root:"OtpHeader_root_1NaaS",inner:"OtpHeader_inner_2myFc",brand:"OtpHeader_brand_2IEO6",menu:"OtpHeader_menu_2wElz"}},"5b1c":function(t,e,n){t.exports=n.p+"img/logo.6436d1fc.svg"},"5b5b":function(t,e,n){"use strict";n("db06")},"5b64":function(t,e,n){t.exports=n.p+"img/copy2.a561a7ac.svg"},"5c0b":function(t,e,n){"use strict";n("9c0c")},"5eaf":function(t,e,n){"use strict";n("2aa4")},"5f36":function(t,e,n){t.exports={root:"MenuBlock_root_1kTYH",list:"MenuBlock_list_m04hL",item:"MenuBlock_item_fJsb-","icon-block":"MenuBlock_icon-block_3Qxfp",icon:"MenuBlock_icon_3xx4h",caption:"MenuBlock_caption_lwScT"}},6193:function(t,e,n){t.exports={root:"Scenarios_root_3QFhs",item:"Scenarios_item_1aOi0"}},6333:function(t,e,n){t.exports={root:"Breadcrumbs_root_2Pp0u",link:"Breadcrumbs_link_3QCNX"}},6336:function(t,e,n){t.exports={root:"LinkPrint_root_tIWjF",text:"LinkPrint_text_1EsG1"}},6441:function(t,e,n){},"64a9":function(t,e,n){"use strict";n("7ff5")},6502:function(t,e,n){},6553:function(t,e,n){t.exports={root:"Tags_root_1PwDs",inner:"Tags_inner_2PFUw"}},"65ad":function(t,e,n){t.exports={error:"DocsAgreementSigned_error_2oLTE"}},"662e":function(t,e,n){},"66be":function(t,e,n){t.exports={title:"IntegrationLink_title_tuAFW",text:"IntegrationLink_text_PqX-C",button:"IntegrationLink_button_2qbWt"}},"674f":function(t,e,n){t.exports={error:"DocsCreateAgreement_error_2ERiv"}},"67e8":function(t,e,n){t.exports={root:"AddUser_root_9wQnZ",form:"AddUser_form_3YPV6"}},"68b0":function(t,e,n){},"68f6":function(t,e,n){"use strict";n("6502")},"690c":function(t,e,n){t.exports={root:"IntegrationBlock_root_1X_IH",title:"IntegrationBlock_title_3d_--"}},"69c2":function(t,e,n){"use strict";var r=n("1579"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"6ae9":function(t,e,n){t.exports={param:"RequestCardContent_param_3lY9d",label:"RequestCardContent_label_3l_4m",value:"RequestCardContent_value_FfpSS",link:"RequestCardContent_link_byVxu"}},"6af9":function(t,e,n){"use strict";n("9123")},"6b2d":function(t,e,n){"use strict";var r=n("4103"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"6b92":function(t,e,n){"use strict";n("6d05")},"6ce0":function(t,e,n){t.exports={error:"EditUser_error_34akc"}},"6d05":function(t,e,n){},"6d3f":function(t,e,n){"use strict";n("e39c")},"6dea":function(t,e,n){t.exports={"title-wrap":"ShopDetails_title-wrap_3Vf7P","status-wrap":"ShopDetails_status-wrap_1DDv_",active:"ShopDetails_active_13I5d",inactive:"ShopDetails_inactive_1et3F"}},"6e5d":function(t,e,n){t.exports={root:"Goods_root_16evd",title:"Goods_title_2Aoyg",helper:"Goods_helper_3BLKh","sum-block":"Goods_sum-block_3G1t7","has-goods":"Goods_has-goods_3B8KH",sum:"Goods_sum_2kHCK",buttons:"Goods_buttons_1lxEd",reset:"Goods_reset_2CGVG"}},"6e62":function(t,e,n){"use strict";var r=n("043d"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"6f10":function(t,e,n){"use strict";n("75aa")},"6f32":function(t,e,n){var r={"./alarm.svg":"c3bd","./back.svg":"7338","./calendar.svg":"b8bd","./check-success.svg":"f955","./chevron-left.svg":"d0fe","./chevron-right.svg":"88ee","./close.svg":"8b1b","./copy.svg":"8aac","./copy2.svg":"5b64","./cross.svg":"2ad7","./double-chevron-left.svg":"eecd","./double-chevron-right.svg":"2a9a","./download.svg":"f28e","./edit.svg":"daf0","./external-link.svg":"b64a","./eye.svg":"7364","./info.svg":"76ed","./link.svg":"40a1","./logo.svg":"5b1c","./msword.svg":"84af","./pdf.svg":"5730","./plus.svg":"eb38","./profile.svg":"95dc","./trash.svg":"af22"};function a(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=o,t.exports=a,a.id="6f32"},"6f5a":function(t,e,n){"use strict";n("8188")},"70ee":function(t,e,n){"use strict";n("68b0")},"717a":function(t,e,n){"use strict";n("74dc")},7338:function(t,e,n){t.exports=n.p+"img/back.45f0563f.svg"},7364:function(t,e,n){t.exports=n.p+"img/eye.da96ff14.svg"},"73a9":function(t,e,n){"use strict";var r=n("7d8e"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},7436:function(t,e,n){"use strict";n("a888")},"74dc":function(t,e,n){},"74ff":function(t,e,n){"use strict";var r=n("3661"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},7531:function(t,e,n){"use strict";var r=n("3be0"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"75aa":function(t,e,n){},"76b3":function(t,e,n){},"76ed":function(t,e,n){t.exports=n.p+"img/info.40dbd05a.svg"},"77bb":function(t,e,n){"use strict";var r=n("a0f4"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"77ec":function(t,e,n){"use strict";n("842d")},7844:function(t,e,n){t.exports={root:"Home_root_3Ztbo",title:"Home_title_1EeBs"}},7871:function(t,e,n){"use strict";var r=n("6333"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},7911:function(t,e,n){"use strict";var r=n("6336"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"7d8e":function(t,e,n){t.exports={root:"Badge_root_Zz6O1",primary:"Badge_primary_3MGYi",success:"Badge_success_p518Y",danger:"Badge_danger_3sbTf",purple:"Badge_purple_3GiJd",dark:"Badge_dark_2u09b",light:"Badge_light_34MuG"}},"7ff5":function(t,e,n){},8188:function(t,e,n){},"842d":function(t,e,n){},"84af":function(t,e,n){t.exports=n.p+"img/msword.a13c3197.svg"},"84f4":function(t,e,n){t.exports={root:"OtpExpansionPanel_root_1xYe_",expanded:"OtpExpansionPanel_expanded_Ey-aW",icon:"OtpExpansionPanel_icon_3xsWe",activator:"OtpExpansionPanel_activator_12lbq",inner:"OtpExpansionPanel_inner_2lE-t","for-documents":"OtpExpansionPanel_for-documents_30009",body:"OtpExpansionPanel_body_2ubpI",header:"OtpExpansionPanel_header_3H_YJ",title:"OtpExpansionPanel_title_3nbSY"}},"86c4":function(t,e,n){t.exports={root:"PlusLink_root_2YVHK"}},"86e6":function(t,e,n){},8753:function(t,e,n){},"88b9":function(t,e,n){},"88ee":function(t,e,n){t.exports=n.p+"img/chevron-right.27dff5ec.svg"},8910:function(t,e,n){"use strict";var r=n("2f9d"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"89d5":function(t,e,n){"use strict";n("f434")},"8aac":function(t,e,n){t.exports=n.p+"img/copy.438503d0.svg"},"8b1b":function(t,e,n){t.exports=n.p+"img/close.f6e720a4.svg"},"8b6f":function(t,e,n){"use strict";n("f9f8")},"8bd5":function(t,e,n){},"8e28":function(t,e,n){},"904f":function(t,e,n){},9061:function(t,e,n){},9123:function(t,e,n){},"918e":function(t,e,n){"use strict";n("9c22")},"924a":function(t,e,n){t.exports={root:"GoodsList_root_XNfwG",item:"GoodsList_item_TQVJB",name:"GoodsList_name_3suQk",quantity:"GoodsList_quantity_1RsOr",price:"GoodsList_price_3alZR",delete:"GoodsList_delete_LBPLI"}},"92b1":function(t,e,n){"use strict";n("e73a")},"93fb":function(t,e,n){"use strict";n("76b3")},"941f":function(t,e,n){"use strict";var r=n("503f"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"94d8":function(t,e,n){"use strict";var r=n("05b7"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"950b":function(t,e,n){t.exports={root:"StepTwo_root_3ekU3",link:"StepTwo_link_1C91W",columns:"StepTwo_columns_1yGOq"}},"95dc":function(t,e,n){t.exports=n.p+"img/profile.126d1ef0.svg"},"96dc":function(t,e,n){"use strict";var r=n("3df7"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"972e":function(t,e,n){t.exports=n.p+"img/esAgreement.29198f68.png"},9955:function(t,e,n){"use strict";var r=n("e99d"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"99a1":function(t,e,n){"use strict";n("07ae")},"99b1":function(t,e,n){},"9a26":function(t,e,n){t.exports={root:"SidePage_root_3PlCt","block-background":"SidePage_block-background_25XhA","icon-container":"SidePage_icon-container_1-6ec",overlay:"SidePage_overlay_3fkaL",container:"SidePage_container_1--C5","overflow-container":"SidePage_overflow-container_2_DYD",inner:"SidePage_inner_zqaTq",header:"SidePage_header_3lTO-","header-container":"SidePage_header-container_NQv3f","header-inner":"SidePage_header-inner_1yV6T",fixed:"SidePage_fixed_1b0GU",title:"SidePage_title_1zlpW",content:"SidePage_content_2vjoJ","buttons-container":"SidePage_buttons-container_1FgJN",buttons:"SidePage_buttons_1FyaD","buttons-inner":"SidePage_buttons-inner_1H09U","with-shadow":"SidePage_with-shadow_18RAV","cancel-button":"SidePage_cancel-button_1ojUH","size-xl":"SidePage_size-xl_1_UD-","size-md":"SidePage_size-md_YnAqs","size-sm":"SidePage_size-sm_2x0yU"}},"9a5b":function(t,e,n){"use strict";n("cfe9")},"9c0c":function(t,e,n){},"9c22":function(t,e,n){},"9d22":function(t,e,n){},"9dcd":function(t,e,n){"use strict";var r=n("08d0"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"9dce":function(t,e,n){t.exports={root:"OtpIconHolder_root_38eeT","has-text":"OtpIconHolder_has-text_3zOGv",inner:"OtpIconHolder_inner_2q0QE",text:"OtpIconHolder_text_37Jvo"}},"9dfb":function(t,e,n){"use strict";n("86e6")},"9ecf":function(t,e,n){"use strict";var r=n("9a26"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},"9ee4":function(t,e,n){"use strict";n("3686")},a040:function(t,e,n){},a0f4:function(t,e,n){t.exports={root:"OtpAuthPageWrapper_root_1QZj6"}},a32b:function(t,e,n){},a60e:function(t,e,n){"use strict";var r=n("f2bb"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},a7e1:function(t,e,n){"use strict";var r=n("c07a"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},a838:function(t,e,n){},a888:function(t,e,n){},a8b5:function(t,e,n){"use strict";var r=n("29c3"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},a927:function(t,e,n){"use strict";var r=n("6ce0"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},aa55:function(t,e,n){},ab09:function(t,e,n){t.exports={root:"CreateUserForm_root_389pB","buttons-panel":"CreateUserForm_buttons-panel_3oAem","button-panel":"CreateUserForm_button-panel_o8AwC","inline-flex":"CreateUserForm_inline-flex_29-w-","form-container":"CreateUserForm_form-container_Z-jlN",controls:"CreateUserForm_controls_1CHp_",error:"CreateUserForm_error_m5fj3","data-wrapper":"CreateUserForm_data-wrapper_3DAJT","data-count":"CreateUserForm_data-count_13T2R"}},ab33:function(t,e,n){"use strict";var r=n("efc7"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},ab6f:function(t,e,n){"use strict";n("1245")},ada9:function(t,e,n){},aec8:function(t,e,n){"use strict";n("383e")},af22:function(t,e,n){t.exports=n.p+"img/trash.3577f26e.svg"},afb1:function(t,e,n){t.exports={root:"OtpFileUploadButton_root_3G4uX",input:"OtpFileUploadButton_input_2JDUR"}},afef:function(t,e,n){},b089:function(t,e,n){"use strict";n("b61e")},b122:function(t,e,n){},b1ed:function(t,e,n){"use strict";n("4765")},b21e:function(t,e,n){"use strict";var r=n("2dfb"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},b220:function(t,e,n){"use strict";var r=n("4e08"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},b275:function(t,e,n){"use strict";n("f534")},b2b8:function(t,e,n){"use strict";var r=n("65ad"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},b33a:function(t,e,n){t.exports={root:"CreditProducts_root_YUk6_",filters:"CreditProducts_filters_3dxak",input:"CreditProducts_input_Lj4A3",table:"CreditProducts_table_3p2qI"}},b546:function(t,e,n){"use strict";var r=n("3afe"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},b61e:function(t,e,n){},b64a:function(t,e,n){t.exports=n.p+"img/external-link.486b9fac.svg"},b8bd:function(t,e,n){t.exports=n.p+"img/calendar.d8ad04a7.svg"},bc3a:function(t,e,n){t.exports={root:"DetailItem_root_2DLQc","no-mb":"DetailItem_no-mb_1Cttk",label:"DetailItem_label_1_uIf",value:"DetailItem_value_1ZVjv"}},bc75:function(t,e,n){t.exports={root:"IntegrationLinkIcons_root_1r5Al"}},bcd9:function(t,e,n){},bcee:function(t,e,n){"use strict";var r=n("d954"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},bd96:function(t,e,n){t.exports={root:"OtpSimpleLink_root_3Hofq",link:"OtpSimpleLink_link_1PlUc",green:"OtpSimpleLink_green_7k-4h",black:"OtpSimpleLink_black_1rmHV",icon:"OtpSimpleLink_icon_25znP"}},bdfe:function(t,e,n){"use strict";var r=n("27de"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},bec9:function(t,e,n){t.exports={root:"Scenario_root_3yUs5",inner:"Scenario_inner_3T2ix",icon:"Scenario_icon_3NlW6",title:"Scenario_title_2ZqIv",description:"Scenario_description_2ktyd",link:"Scenario_link_1mCyY"}},befd:function(t,e,n){"use strict";var r=n("5aa3"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},bfaf:function(t,e,n){"use strict";var r=n("2311"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},c07a:function(t,e,n){t.exports={root:"ConstructorTable_root_GDEgI","title-block":"ConstructorTable_title-block_Wa3Mk",title:"ConstructorTable_title_1V5FN","has-description":"ConstructorTable_has-description_YcSoD",description:"ConstructorTable_description_29NMy",wrapper:"ConstructorTable_wrapper_2ZMOF",table:"ConstructorTable_table_2Cocc",thead:"ConstructorTable_thead_Fap5p",tbody:"ConstructorTable_tbody_3gO0E",icon:"ConstructorTable_icon_3uov7"}},c239:function(t,e,n){},c340:function(t,e,n){"use strict";n("fb30")},c3bd:function(t,e,n){t.exports=n.p+"img/alarm.e3ed3c39.svg"},c3f1:function(t,e,n){t.exports={root:"OtpCounterButton_root_3NvRi",increment:"OtpCounterButton_increment_1QQWs",decrement:"OtpCounterButton_decrement_34NJU"}},c4bc:function(t,e,n){"use strict";n("c239")},c570:function(t,e,n){"use strict";n("24d0")},c697:function(t,e,n){"use strict";var r=n("111c"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},c7e6:function(t,e,n){},c824:function(t,e,n){"use strict";n("28cb")},c826:function(t,e,n){"use strict";var r=n("4083"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},c903:function(t,e,n){"use strict";var r=n("1f49"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},ccd8:function(t,e,n){"use strict";var r=n("bd96"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},cd16:function(t,e,n){"use strict";var r=n("e873"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},cf1d:function(t,e,n){"use strict";var r=n("e7e6"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},cfe9:function(t,e,n){},d028:function(t,e,n){t.exports={root:"CodeBlock_root_1VZ-6",caption:"CodeBlock_caption_1lcB3",code:"CodeBlock_code_1gIZB",icon:"CodeBlock_icon_3ahno"}},d0a7:function(t,e,n){t.exports={root:"CopyButton_root_2s2LR"}},d0e2:function(t,e,n){"use strict";n("b122")},d0fe:function(t,e,n){t.exports=n.p+"img/chevron-left.c7bbf8ee.svg"},d12d:function(t,e,n){"use strict";var r=n("0d4d"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},d1af:function(t,e,n){t.exports=n.p+"img/close.1d0f8b0f.svg"},d20f:function(t,e,n){t.exports={root:"OtpHeading_root_1j7RP",h1:"OtpHeading_h1_2Egi4",h2:"OtpHeading_h2_10rQc",h3:"OtpHeading_h3_1yDe7",h4:"OtpHeading_h4_3CA-J"}},d27f:function(t,e,n){"use strict";n("1901")},d3e6:function(t,e,n){"use strict";n("afef")},d451:function(t,e,n){"use strict";var r=n("86c4"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},d478:function(t,e,n){"use strict";n("3c40")},d792:function(t,e,n){"use strict";var r=n("4dde"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},d852:function(t,e,n){t.exports={root:"OtpAuthWrapper_root_3XOKg",logo:"OtpAuthWrapper_logo_17IZg",title:"OtpAuthWrapper_title_1PjW8"}},d86b:function(t,e,n){"use strict";n("c7e6")},d954:function(t,e,n){t.exports={root:"ScenarioWrapper_root_35YiP",breadcrumbs:"ScenarioWrapper_breadcrumbs_39_fT",step:"ScenarioWrapper_step_3cPbi","title-block":"ScenarioWrapper_title-block_KJp-8"}},da13:function(t,e,n){},daf0:function(t,e,n){t.exports=n.p+"img/edit.6932a77a.svg"},db06:function(t,e,n){},dcfb:function(t,e,n){"use strict";n("8bd5")},dd1b:function(t,e,n){"use strict";n("a040")},ddd9:function(t,e,n){"use strict";var r=n("fa27"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},dee4:function(t,e,n){"use strict";var r=n("b33a"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},e1631:function(t,e,n){"use strict";n("6441")},e1ea:function(t,e,n){"use strict";n("a32b")},e20b:function(t,e,n){"use strict";var r=n("1513"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},e354:function(t,e,n){"use strict";var r=n("e920"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},e39c:function(t,e,n){},e3b3:function(t,e,n){"use strict";n("0460")},e660:function(t,e,n){"use strict";var r=n("4fb4"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},e73a:function(t,e,n){},e7e6:function(t,e,n){t.exports={root:"UserParams_root_3ifg1","btn-container":"UserParams_btn-container_ay8_S"}},e873:function(t,e,n){t.exports={root:"OtpEmptyProducts_root_1Fh4x","empty-title":"OtpEmptyProducts_empty-title_2yGku",title:"OtpEmptyProducts_title_140_U"}},e920:function(t,e,n){t.exports={root:"PageWrapper_root_JXBhK",main:"PageWrapper_main_3ugyf",title:"PageWrapper_title_13UY6",breadcrumbs:"PageWrapper_breadcrumbs_FDnzf",header:"PageWrapper_header_3yKNk","with-border":"PageWrapper_with-border_z6c5m",buttons:"PageWrapper_buttons_2hO5N",tabs:"PageWrapper_tabs_YlUei",filters:"PageWrapper_filters_1X9bZ",body:"PageWrapper_body_2Pkc3"}},e99d:function(t,e,n){t.exports={root:"StepTwo_root_2bIVP",example:"StepTwo_example_En6O3","example-button":"StepTwo_example-button_Tf_uR","example-text":"StepTwo_example-text_3_zt5",variants:"StepTwo_variants_3xtU_","variants-title":"StepTwo_variants-title_Kjduy","variants-list":"StepTwo_variants-list_1Cfrg","green-block":"StepTwo_green-block_H8tx6","copy-img":"StepTwo_copy-img_2yXke","codes-block":"StepTwo_codes-block_1znKV","code-title":"StepTwo_code-title_vxIWL"}},ea81:function(t,e,n){"use strict";n("a838")},ea92:function(t,e,n){"use strict";var r=n("674f"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},eb38:function(t,e,n){t.exports=n.p+"img/plus.bf4091d1.svg"},eecd:function(t,e,n){t.exports=n.p+"img/double-chevron-left.21691691.svg"},eefa:function(t,e,n){"use strict";var r=n("6553"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},ef2d:function(t,e,n){t.exports=n.p+"img/clientWithPassport.8d8e9b82.png"},ef72:function(t,e,n){"use strict";n("f95b")},efc7:function(t,e,n){t.exports={root:"Counter_root_26jbK",close:"Counter_close_3URa3",amount:"Counter_amount_34wKr"}},f071:function(t,e,n){t.exports={root:"StepOne_root_3YnIM",goods:"StepOne_goods_2E_qf"}},f0e5:function(t,e,n){"use strict";var r=n("bc3a"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},f13e:function(t,e,n){"use strict";var r=n("bc75"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},f28e:function(t,e,n){t.exports=n.p+"img/download.5f953f75.svg"},f2bb:function(t,e,n){t.exports={root:"OtpMultiselect_root_3M9Pe",focused:"OtpMultiselect_focused_23x6N",selected:"OtpMultiselect_selected_cItjY",icon:"OtpMultiselect_icon_9TNlO","size-sm":"OtpMultiselect_size-sm_3jeio",options:"OtpMultiselect_options_Fag-z",option:"OtpMultiselect_option_2HYfR","size-md":"OtpMultiselect_size-md_mzHVx","size-lg":"OtpMultiselect_size-lg_1B4T1",opened:"OtpMultiselect_opened_1rhUZ",counter:"OtpMultiselect_counter_3npWn",option__selected:"OtpMultiselect_option__selected_2zrSW",controls:"OtpMultiselect_controls_3ckHf"}},f434:function(t,e,n){},f534:function(t,e,n){},f578:function(t,e,n){"use strict";n("fa4e")},f591:function(t,e,n){"use strict";var r=n("84f4"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},f8f8:function(t,e,n){"use strict";var r=n("924a"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},f955:function(t,e,n){t.exports=n.p+"img/check-success.882f2fec.svg"},f95b:function(t,e,n){},f988:function(t,e,n){"use strict";var r=n("d20f"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},f9f8:function(t,e,n){},fa27:function(t,e,n){t.exports={link:"OtpLink_link_ksK_W",green:"OtpLink_green_2QJh0",black:"OtpLink_black_3z5S7",disabled:"OtpLink_disabled_5oAQi"}},fa4d:function(t,e,n){t.exports=n.p+"img/passportInfo.c31b2804.png"},fa4e:function(t,e,n){},fac1:function(t,e,n){"use strict";n("904f")},fadc:function(t,e,n){"use strict";var r=n("d028"),a=n.n(r);n.d(e,"default",(function(){return a.a}))},fb30:function(t,e,n){},fdf0:function(t,e,n){"use strict";var r=n("6193"),a=n.n(r);n.d(e,"default",(function(){return a.a}))}});